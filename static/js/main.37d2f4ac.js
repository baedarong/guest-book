/*! For license information please see main.37d2f4ac.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||b(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},309:function(e,t,n){"use strict";e.exports=n(746)},571:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},151:function(e,t,n){var r=n(571);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return u(a(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,u="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],y=n[3],m=n[4],g=n[5],k=n[6],w=n[7];u&&(r.push(u),u="");var b=null!=v&&null!=p&&p!==v,_="+"===k||"*"===k,x="?"===k||"*"===k,T=n[2]||l,I=m||g;r.push({name:y||a++,prefix:v||"",delimiter:T,optional:x,repeat:_,partial:b,asterisk:!!w,pattern:I?c(I):w?".*":"[^"+s(T)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",u=t||{},s=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=u[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"===typeof c)o+=s(c);else{var h=s(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=s(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));function u(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var s=!1,c=null,l=!1,f=null,h={onError:function(e){s=!0,c=e}};function d(e,t,n,r,i,a,o,l,f){s=!1,c=null,u.apply(h,arguments)}var p=null,v=null,y=null;function m(e,t,n){var r=e.type||"unknown-event";e.currentTarget=y(n),function(e,t,n,r,i,a,u,h,p){if(d.apply(this,arguments),s){if(!s)throw Error(o(198));var v=c;s=!1,c=null,l||(l=!0,f=v)}}(r,t,void 0,e),e.currentTarget=null}var g=null,k={};function w(){if(g)for(var e in k){var t=k[e],n=g.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!_[n]){if(!t.extractEvents)throw Error(o(97,e));for(var r in _[n]=t,n=t.eventTypes){var i=void 0,a=n[r],u=t,s=r;if(x.hasOwnProperty(s))throw Error(o(99,s));x[s]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&b(c[i],u,s);i=!0}else a.registrationName?(b(a.registrationName,u,s),i=!0):i=!1;if(!i)throw Error(o(98,r,e))}}}}function b(e,t,n){if(T[e])throw Error(o(100,e));T[e]=t,I[e]=t.eventTypes[n].dependencies}var _=[],x={},T={},I={};function E(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!k.hasOwnProperty(t)||k[t]!==r){if(k[t])throw Error(o(102,t));k[t]=r,n=!0}}n&&w()}var S=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),C=null,N=null,A=null;function R(e){if(e=v(e)){if("function"!==typeof C)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),C(e.stateNode,e.type,t))}}function P(e){N?A?A.push(e):A=[e]:N=e}function O(){if(N){var e=N,t=A;if(A=N=null,R(e),t)for(e=0;e<t.length;e++)R(t[e])}}function D(e,t){return e(t)}function M(e,t,n,r,i){return e(t,n,r,i)}function L(){}var F=D,U=!1,V=!1;function j(){null===N&&null===A||(L(),O())}function q(e,t,n){if(V)return e(t,n);V=!0;try{return F(e,t,n)}finally{V=!1,j()}}var z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B=Object.prototype.hasOwnProperty,W={},K={};function H(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){G[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];G[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){G[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){G[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){G[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){G[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){G[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){G[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){G[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,Y);G[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,Y);G[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,Y);G[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){G[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),G.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){G[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $(e,t,n,r){var i=G.hasOwnProperty(t)?G[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!B.call(K,e)||!B.call(W,e)&&(z.test(e)?K[e]=!0:(W[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}X.hasOwnProperty("ReactCurrentDispatcher")||(X.ReactCurrentDispatcher={current:null}),X.hasOwnProperty("ReactCurrentBatchConfig")||(X.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,re=Z?Symbol.for("react.strict_mode"):60108,ie=Z?Symbol.for("react.profiler"):60114,ae=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,ue=Z?Symbol.for("react.concurrent_mode"):60111,se=Z?Symbol.for("react.forward_ref"):60112,ce=Z?Symbol.for("react.suspense"):60113,le=Z?Symbol.for("react.suspense_list"):60120,fe=Z?Symbol.for("react.memo"):60115,he=Z?Symbol.for("react.lazy"):60116,de=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ve(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function ye(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case ie:return"Profiler";case re:return"StrictMode";case ce:return"Suspense";case le:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ae:return"Context.Provider";case se:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case fe:return ye(e.type);case de:return ye(e.render);case he:if(e=1===e._status?e._result:null)return ye(e)}return null}function me(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,a=ye(e.type);n=null,r&&(n=ye(r.type)),r=a,a="",i?a=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+a}t+=n,e=e.return}while(e);return t}function ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ke(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function we(e){e._valueTracker||(e._valueTracker=function(e){var t=ke(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function be(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ke(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function _e(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function xe(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Te(e,t){null!=(t=t.checked)&&$(e,"checked",t,!1)}function Ie(e,t){Te(e,t);var n=ge(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Se(e,t.type,n):t.hasOwnProperty("defaultValue")&&Se(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Se(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ce(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function Pe(e,t){var n=ge(t.value),r=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var De="http://www.w3.org/1999/xhtml",Me="http://www.w3.org/2000/svg";function Le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ue,Ve,je=(Ve=function(e,t){if(e.namespaceURI!==Me||"innerHTML"in e)e.innerHTML=t;else{for((Ue=Ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Ve(e,t)}))}:Ve);function qe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function ze(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Be={animationend:ze("Animation","AnimationEnd"),animationiteration:ze("Animation","AnimationIteration"),animationstart:ze("Animation","AnimationStart"),transitionend:ze("Transition","TransitionEnd")},We={},Ke={};function He(e){if(We[e])return We[e];if(!Be[e])return e;var t,n=Be[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ke)return We[e]=n[t];return e}S&&(Ke=document.createElement("div").style,"AnimationEvent"in window||(delete Be.animationend.animation,delete Be.animationiteration.animation,delete Be.animationstart.animation),"TransitionEvent"in window||delete Be.transitionend.transition);var Ge=He("animationend"),Qe=He("animationiteration"),Ye=He("animationstart"),Xe=He("transitionend"),$e="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function rt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return nt(i),e;if(a===r)return nt(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function it(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function at(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function ut(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)m(e,t[r],n[r]);else t&&m(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=it(ot,e)),e=ot,ot=null,e){if(at(e,ut),ot)throw Error(o(95));if(l)throw e=f,l=!1,f=null,e}}function ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function lt(e){if(!S)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ft=[];function ht(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ft.length&&ft.push(e)}function dt(e,t,n,r){if(ft.length){var i=ft.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Rn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=ct(e.nativeEvent);r=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var u=null,s=0;s<_.length;s++){var c=_[s];c&&(c=c.extractEvents(r,t,a,i,o))&&(u=it(u,c))}st(u)}}function vt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Yt(t,"scroll",!0);break;case"focus":case"blur":Yt(t,"focus",!0),Yt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":lt(e)&&Yt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===$e.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var yt,mt,gt,kt=!1,wt=[],bt=null,_t=null,xt=null,Tt=new Map,It=new Map,Et=[],St="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ct="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Nt(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function At(e,t){switch(e){case"focus":case"blur":bt=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Rt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=Nt(t,n,r,i,a),null!==t&&(null!==(t=Pn(t))&&mt(t)),e):(e.eventSystemFlags|=r,e)}function Pt(e){var t=Rn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Pn(t);return null!==n&&mt(n),e.blockedOn=t,!1}return!0}function Dt(e,t,n){Ot(e)&&n.delete(t)}function Mt(){for(kt=!1;0<wt.length;){var e=wt[0];if(null!==e.blockedOn){null!==(e=Pn(e.blockedOn))&&yt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:wt.shift()}null!==bt&&Ot(bt)&&(bt=null),null!==_t&&Ot(_t)&&(_t=null),null!==xt&&Ot(xt)&&(xt=null),Tt.forEach(Dt),It.forEach(Dt)}function Lt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Mt)))}function Ft(e){function t(t){return Lt(t,e)}if(0<wt.length){Lt(wt[0],e);for(var n=1;n<wt.length;n++){var r=wt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==bt&&Lt(bt,e),null!==_t&&Lt(_t,e),null!==xt&&Lt(xt,e),Tt.forEach(t),It.forEach(t),n=0;n<Et.length;n++)(r=Et[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Et.length&&null===(n=Et[0]).blockedOn;)Pt(n),null===n.blockedOn&&Et.shift()}var Ut={},Vt=new Map,jt=new Map,qt=["abort","abort",Ge,"animationEnd",Qe,"animationIteration",Ye,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Xe,"transitionEnd","waiting","waiting"];function zt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t},jt.set(r,t),Vt.set(r,a),Ut[i]=a}}zt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),zt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),zt(qt,2);for(var Bt="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Wt=0;Wt<Bt.length;Wt++)jt.set(Bt[Wt],0);var Kt=a.unstable_UserBlockingPriority,Ht=a.unstable_runWithPriority,Gt=!0;function Qt(e,t){Yt(t,e,!1)}function Yt(e,t,n){var r=jt.get(t);switch(void 0===r?2:r){case 0:r=Xt.bind(null,t,1,e);break;case 1:r=$t.bind(null,t,1,e);break;default:r=Jt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Xt(e,t,n,r){U||L();var i=Jt,a=U;U=!0;try{M(i,e,t,n,r)}finally{(U=a)||j()}}function $t(e,t,n,r){Ht(Kt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){if(Gt)if(0<wt.length&&-1<St.indexOf(e))e=Nt(null,e,t,n,r),wt.push(e);else{var i=Zt(e,t,n,r);if(null===i)At(e,r);else if(-1<St.indexOf(e))e=Nt(i,e,t,n,r),wt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return bt=Rt(bt,e,t,n,r,i),!0;case"dragenter":return _t=Rt(_t,e,t,n,r,i),!0;case"mouseover":return xt=Rt(xt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Tt.set(a,Rt(Tt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,It.set(a,Rt(It.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){At(e,r),e=dt(e,r,null,t);try{q(pt,e)}finally{ht(e)}}}}function Zt(e,t,n,r){if(null!==(n=Rn(n=ct(r)))){var i=et(n);if(null===i)n=null;else{var a=i.tag;if(13===a){if(null!==(n=tt(i)))return n;n=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=dt(e,r,n,t);try{q(pt,e)}finally{ht(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=nn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var an=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(an[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function un(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=De;function cn(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=I[t];for(var r=0;r<t.length;r++)vt(t[r],e,n)}function ln(){}function fn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var n,r=hn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hn(r)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vn(){for(var e=window,t=fn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=fn((e=t.contentWindow).document)}return t}function yn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn="$?",gn="$!",kn=null,wn=null;function bn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function _n(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var xn="function"===typeof setTimeout?setTimeout:void 0,Tn="function"===typeof clearTimeout?clearTimeout:void 0;function In(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function En(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||n===gn||n===mn){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Sn=Math.random().toString(36).slice(2),Cn="__reactInternalInstance$"+Sn,Nn="__reactEventHandlers$"+Sn,An="__reactContainere$"+Sn;function Rn(e){var t=e[Cn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[An]||n[Cn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=En(e);null!==e;){if(n=e[Cn])return n;e=En(e)}return t}n=(e=n).parentNode}return null}function Pn(e){return!(e=e[Cn]||e[An])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function On(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Dn(e){return e[Nn]||null}function Mn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Ln(e,t){var n=e.stateNode;if(!n)return null;var r=p(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function Fn(e,t,n){(t=Ln(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function Un(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Mn(t);for(t=n.length;0<t--;)Fn(n[t],"captured",e);for(t=0;t<n.length;t++)Fn(n[t],"bubbled",e)}}function Vn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Ln(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=it(n._dispatchListeners,t),n._dispatchInstances=it(n._dispatchInstances,e))}function jn(e){e&&e.dispatchConfig.registrationName&&Vn(e._targetInst,null,e)}function qn(e){at(e,Un)}var zn=null,Bn=null,Wn=null;function Kn(){if(Wn)return Wn;var e,t,n=Bn,r=n.length,i="value"in zn?zn.value:zn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Wn=i.slice(e,1<t?1-t:void 0)}function Hn(){return!0}function Gn(){return!1}function Qn(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Hn:Gn,this.isPropagationStopped=Gn,this}function Yn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Xn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function $n(e){e.eventPool=[],e.getPooled=Yn,e.release=Xn}i(Qn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Hn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Hn)},persist:function(){this.isPersistent=Hn},isPersistent:Gn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Gn,this._dispatchInstances=this._dispatchListeners=null}}),Qn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Qn.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,$n(n),n},$n(Qn);var Jn=Qn.extend({data:null}),Zn=Qn.extend({data:null}),er=[9,13,27,32],tr=S&&"CompositionEvent"in window,nr=null;S&&"documentMode"in document&&(nr=document.documentMode);var rr=S&&"TextEvent"in window&&!nr,ir=S&&(!tr||nr&&8<nr&&11>=nr),ar=String.fromCharCode(32),or={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ur=!1;function sr(e,t){switch(e){case"keyup":return-1!==er.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function cr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var lr=!1;var fr={eventTypes:or,extractEvents:function(e,t,n,r){var i;if(tr)e:{switch(e){case"compositionstart":var a=or.compositionStart;break e;case"compositionend":a=or.compositionEnd;break e;case"compositionupdate":a=or.compositionUpdate;break e}a=void 0}else lr?sr(e,n)&&(a=or.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=or.compositionStart);return a?(ir&&"ko"!==n.locale&&(lr||a!==or.compositionStart?a===or.compositionEnd&&lr&&(i=Kn()):(Bn="value"in(zn=r)?zn.value:zn.textContent,lr=!0)),a=Jn.getPooled(a,t,n,r),i?a.data=i:null!==(i=cr(n))&&(a.data=i),qn(a),i=a):i=null,(e=rr?function(e,t){switch(e){case"compositionend":return cr(t);case"keypress":return 32!==t.which?null:(ur=!0,ar);case"textInput":return(e=t.data)===ar&&ur?null:e;default:return null}}(e,n):function(e,t){if(lr)return"compositionend"===e||!tr&&sr(e,t)?(e=Kn(),Wn=Bn=zn=null,lr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ir&&"ko"!==t.locale?null:t.data}}(e,n))?((t=Zn.getPooled(or.beforeInput,t,n,r)).data=e,qn(t)):t=null,null===i?t:null===t?i:[i,t]}},hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!hr[e.type]:"textarea"===t}var pr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function vr(e,t,n){return(e=Qn.getPooled(pr.change,e,t,n)).type="change",P(n),qn(e),e}var yr=null,mr=null;function gr(e){st(e)}function kr(e){if(be(On(e)))return e}function wr(e,t){if("change"===e)return t}var br=!1;function _r(){yr&&(yr.detachEvent("onpropertychange",xr),mr=yr=null)}function xr(e){if("value"===e.propertyName&&kr(mr))if(e=vr(mr,e,ct(e)),U)st(e);else{U=!0;try{D(gr,e)}finally{U=!1,j()}}}function Tr(e,t,n){"focus"===e?(_r(),mr=n,(yr=t).attachEvent("onpropertychange",xr)):"blur"===e&&_r()}function Ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return kr(mr)}function Er(e,t){if("click"===e)return kr(t)}function Sr(e,t){if("input"===e||"change"===e)return kr(t)}S&&(br=lt("input")&&(!document.documentMode||9<document.documentMode));var Cr={eventTypes:pr,_isInputEventSupported:br,extractEvents:function(e,t,n,r){var i=t?On(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=wr;else if(dr(i))if(br)o=Sr;else{o=Ir;var u=Tr}else(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Er);if(o&&(o=o(e,t)))return vr(o,n,r);u&&u(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Se(i,"number",i.value)}},Nr=Qn.extend({view:null,detail:null}),Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ar[e])&&!!t[e]}function Pr(){return Rr}var Or=0,Dr=0,Mr=!1,Lr=!1,Fr=Nr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Pr,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Or;return Or=e.screenX,Mr?"mousemove"===e.type?e.screenX-t:0:(Mr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Dr;return Dr=e.screenY,Lr?"mousemove"===e.type?e.screenY-t:0:(Lr=!0,0)}}),Ur=Fr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Vr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},jr={eventTypes:Vr,extractEvents:function(e,t,n,r,i){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?Rn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var u=Fr,s=Vr.mouseLeave,c=Vr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(u=Ur,s=Vr.pointerLeave,c=Vr.pointerEnter,l="pointer");if(e=null==o?a:On(o),a=null==t?a:On(t),(s=u.getPooled(s,o,n,r)).type=l+"leave",s.target=e,s.relatedTarget=a,(n=u.getPooled(c,t,n,r)).type=l+"enter",n.target=a,n.relatedTarget=e,l=t,(r=o)&&l)e:{for(c=l,o=0,e=u=r;e;e=Mn(e))o++;for(e=0,t=c;t;t=Mn(t))e++;for(;0<o-e;)u=Mn(u),o--;for(;0<e-o;)c=Mn(c),e--;for(;o--;){if(u===c||u===c.alternate)break e;u=Mn(u),c=Mn(c)}u=null}else u=null;for(c=u,u=[];r&&r!==c&&(null===(o=r.alternate)||o!==c);)u.push(r),r=Mn(r);for(r=[];l&&l!==c&&(null===(o=l.alternate)||o!==c);)r.push(l),l=Mn(l);for(l=0;l<u.length;l++)Vn(u[l],"bubbled",s);for(l=r.length;0<l--;)Vn(r[l],"captured",n);return 0===(64&i)?[s]:[s,n]}};var qr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},zr=Object.prototype.hasOwnProperty;function Br(e,t){if(qr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!zr.call(t,n[r])||!qr(e[n[r]],t[n[r]]))return!1;return!0}var Wr=S&&"documentMode"in document&&11>=document.documentMode,Kr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Hr=null,Gr=null,Qr=null,Yr=!1;function Xr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Yr||null==Hr||Hr!==fn(n)?null:("selectionStart"in(n=Hr)&&yn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Qr&&Br(Qr,n)?null:(Qr=n,(e=Qn.getPooled(Kr.select,Gr,e,t)).type="select",e.target=Hr,qn(e),e))}var $r={eventTypes:Kr,extractEvents:function(e,t,n,r,i,a){if(!(a=!(i=a||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ze(i),a=I.onSelect;for(var o=0;o<a.length;o++)if(!i.has(a[o])){i=!1;break e}i=!0}a=!i}if(a)return null;switch(i=t?On(t):window,e){case"focus":(dr(i)||"true"===i.contentEditable)&&(Hr=i,Gr=t,Qr=null);break;case"blur":Qr=Gr=Hr=null;break;case"mousedown":Yr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Yr=!1,Xr(n,r);case"selectionchange":if(Wr)break;case"keydown":case"keyup":return Xr(n,r)}return null}},Jr=Qn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Zr=Qn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ei=Nr.extend({relatedTarget:null});function ti(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ii=Nr.extend({key:function(e){if(e.key){var t=ni[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ti(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ri[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Pr,charCode:function(e){return"keypress"===e.type?ti(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ti(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ai=Fr.extend({dataTransfer:null}),oi=Nr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Pr}),ui=Qn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),si=Fr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),ci={eventTypes:Ut,extractEvents:function(e,t,n,r){var i=Vt.get(e);if(!i)return null;switch(e){case"keypress":if(0===ti(n))return null;case"keydown":case"keyup":e=ii;break;case"blur":case"focus":e=ei;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ai;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=oi;break;case Ge:case Qe:case Ye:e=Jr;break;case Xe:e=ui;break;case"scroll":e=Nr;break;case"wheel":e=si;break;case"copy":case"cut":case"paste":e=Zr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ur;break;default:e=Qn}return qn(t=e.getPooled(i,t,n,r)),t}};if(g)throw Error(o(101));g=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),p=Dn,v=Pn,y=On,E({SimpleEventPlugin:ci,EnterLeaveEventPlugin:jr,ChangeEventPlugin:Cr,SelectEventPlugin:$r,BeforeInputEventPlugin:fr});var li=[],fi=-1;function hi(e){0>fi||(e.current=li[fi],li[fi]=null,fi--)}function di(e,t){fi++,li[fi]=e.current,e.current=t}var pi={},vi={current:pi},yi={current:!1},mi=pi;function gi(e,t){var n=e.type.contextTypes;if(!n)return pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ki(e){return null!==(e=e.childContextTypes)&&void 0!==e}function wi(){hi(yi),hi(vi)}function bi(e,t,n){if(vi.current!==pi)throw Error(o(168));di(vi,t),di(yi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,ye(t)||"Unknown",a));return i({},n,{},r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pi,mi=vi.current,di(vi,e),di(yi,yi.current),!0}function Ti(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=_i(e,t,mi),r.__reactInternalMemoizedMergedChildContext=e,hi(yi),hi(vi),di(vi,e)):hi(yi),di(yi,n)}var Ii=a.unstable_runWithPriority,Ei=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_requestPaint,Ni=a.unstable_now,Ai=a.unstable_getCurrentPriorityLevel,Ri=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Di=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Li={},Fi=a.unstable_shouldYield,Ui=void 0!==Ci?Ci:function(){},Vi=null,ji=null,qi=!1,zi=Ni(),Bi=1e4>zi?Ni:function(){return Ni()-zi};function Wi(){switch(Ai()){case Ri:return 99;case Pi:return 98;case Oi:return 97;case Di:return 96;case Mi:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Ri;case 98:return Pi;case 97:return Oi;case 96:return Di;case 95:return Mi;default:throw Error(o(332))}}function Hi(e,t){return e=Ki(e),Ii(e,t)}function Gi(e,t,n){return e=Ki(e),Ei(e,t,n)}function Qi(e){return null===Vi?(Vi=[e],ji=Ei(Ri,Xi)):Vi.push(e),Li}function Yi(){if(null!==ji){var e=ji;ji=null,Si(e)}Xi()}function Xi(){if(!qi&&null!==Vi){qi=!0;var e=0;try{var t=Vi;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(n){throw null!==Vi&&(Vi=Vi.slice(e+1)),Ei(Ri,Yi),n}finally{qi=!1}}}function $i(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Ji(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Zi={current:null},ea=null,ta=null,na=null;function ra(){na=ta=ea=null}function ia(e){var t=Zi.current;hi(Zi),e.type._context._currentValue=t}function aa(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function oa(e,t){ea=e,na=ta=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Do=!0),e.firstContext=null)}function ua(e,t){if(na!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(na=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ta){if(null===ea)throw Error(o(308));ta=t,ea.dependencies={expirationTime:0,firstContext:t,responders:null}}else ta=ta.next=t;return e._currentValue}var sa=!1;function ca(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function la(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function fa(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function ha(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function da(e,t){var n=e.alternate;null!==n&&la(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function pa(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.baseQueue,u=a.shared.pending;if(null!==u){if(null!==o){var s=o.next;o.next=u.next,u.next=s}o=u,a.shared.pending=null,null!==(s=e.alternate)&&(null!==(s=s.updateQueue)&&(s.baseQueue=u))}if(null!==o){s=o.next;var c=a.baseState,l=0,f=null,h=null,d=null;if(null!==s)for(var p=s;;){if((u=p.expirationTime)<r){var v={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===d?(h=d=v,f=c):d=d.next=v,u>l&&(l=u)}else{null!==d&&(d=d.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),ds(u,p.suspenseConfig);e:{var y=e,m=p;switch(u=t,v=n,m.tag){case 1:if("function"===typeof(y=m.payload)){c=y.call(v,c,u);break e}c=y;break e;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(u="function"===typeof(y=m.payload)?y.call(v,c,u):y)||void 0===u)break e;c=i({},c,u);break e;case 2:sa=!0}}null!==p.callback&&(e.effectTag|=32,null===(u=a.effects)?a.effects=[p]:u.push(p))}if(null===(p=p.next)||p===s){if(null===(u=a.shared.pending))break;p=o.next=u.next,u.next=s,a.baseQueue=o=u,a.shared.pending=null}}null===d?f=c:d.next=h,a.baseState=f,a.baseQueue=d,ps(l),e.expirationTime=l,e.memoizedState=c}}function va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var ya=X.ReactCurrentBatchConfig,ma=(new r.Component).refs;function ga(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var ka={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=es(),i=ya.suspense;(i=fa(r=ts(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),ha(e,i),ns(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=es(),i=ya.suspense;(i=fa(r=ts(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ha(e,i),ns(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=es(),r=ya.suspense;(r=fa(n=ts(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),ha(e,r),ns(e,n)}};function wa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Br(n,r)||!Br(i,a))}function ba(e,t,n){var r=!1,i=pi,a=t.contextType;return"object"===typeof a&&null!==a?a=ua(a):(i=ki(t)?mi:vi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?gi(e,i):pi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ka,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _a(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ka.enqueueReplaceState(t,t.state,null)}function xa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ma,ca(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ua(a):(a=ki(t)?mi:vi.current,i.context=gi(e,a)),pa(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ga(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ka.enqueueReplaceState(i,i.state,null),pa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Ta=Array.isArray;function Ia(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===ma&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ea(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Sa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ds(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function u(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fs(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Ia(e,t,n),r.return=e,r):((r=Ms(n.type,n.key,n.props,null,e.mode,r)).ref=Ia(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Us(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ls(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Fs(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Ms(t.type,t.key,t.props,null,e.mode,n)).ref=Ia(e,null,t),n.return=e,n;case te:return(t=Us(t,e.mode,n)).return=e,t}if(Ta(t)||ve(t))return(t=Ls(t,e.mode,n,null)).return=e,t;Ea(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===i?n.type===ne?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case te:return n.key===i?l(e,t,n,r):null}if(Ta(n)||ve(n))return null!==i?null:f(e,t,n,r,null);Ea(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case ee:return e=e.get(null===r.key?n:r.key)||null,r.type===ne?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case te:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ta(r)||ve(r))return f(t,e=e.get(n)||null,r,i,null);Ea(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,u,s,c){var l=ve(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===ne&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case ee:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===ne){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=Ia(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===ne?((r=Ls(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Ms(a.type,a.key,a.props,null,e.mode,s)).ref=Ia(e,r,a),s.return=e,e=s)}return u(e);case te:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Us(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Fs(a,e.mode,s)).return=e,e=r),u(e);if(Ta(a))return v(e,r,a,s);if(ve(a))return y(e,r,a,s);if(l&&Ea(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Ca=Sa(!0),Na=Sa(!1),Aa={},Ra={current:Aa},Pa={current:Aa},Oa={current:Aa};function Da(e){if(e===Aa)throw Error(o(174));return e}function Ma(e,t){switch(di(Oa,t),di(Pa,e),di(Ra,Aa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}hi(Ra),di(Ra,t)}function La(){hi(Ra),hi(Pa),hi(Oa)}function Fa(e){Da(Oa.current);var t=Da(Ra.current),n=Fe(t,e.type);t!==n&&(di(Pa,e),di(Ra,n))}function Ua(e){Pa.current===e&&(hi(Ra),hi(Pa))}var Va={current:0};function ja(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===mn||n.data===gn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qa(e,t){return{responder:e,props:t}}var za=X.ReactCurrentDispatcher,Ba=X.ReactCurrentBatchConfig,Wa=0,Ka=null,Ha=null,Ga=null,Qa=!1;function Ya(){throw Error(o(321))}function Xa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qr(e[n],t[n]))return!1;return!0}function $a(e,t,n,r,i,a){if(Wa=a,Ka=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,za.current=null===e||null===e.memoizedState?bo:_o,e=n(r,i),t.expirationTime===Wa){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(o(301));a+=1,Ga=Ha=null,t.updateQueue=null,za.current=xo,e=n(r,i)}while(t.expirationTime===Wa)}if(za.current=wo,t=null!==Ha&&null!==Ha.next,Wa=0,Ga=Ha=Ka=null,Qa=!1,t)throw Error(o(300));return e}function Ja(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ga?Ka.memoizedState=Ga=e:Ga=Ga.next=e,Ga}function Za(){if(null===Ha){var e=Ka.alternate;e=null!==e?e.memoizedState:null}else e=Ha.next;var t=null===Ga?Ka.memoizedState:Ga.next;if(null!==t)Ga=t,Ha=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Ha=e).memoizedState,baseState:Ha.baseState,baseQueue:Ha.baseQueue,queue:Ha.queue,next:null},null===Ga?Ka.memoizedState=Ga=e:Ga=Ga.next=e}return Ga}function eo(e,t){return"function"===typeof t?t(e):t}function to(e){var t=Za(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Ha,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.expirationTime;if(l<Wa){var f={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,l>Ka.expirationTime&&(Ka.expirationTime=l,ps(l))}else null!==s&&(s=s.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ds(l,c.suspenseConfig),r=c.eagerReducer===e?c.eagerState:e(r,c.action);c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,qr(r,t.memoizedState)||(Do=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function no(e){var t=Za(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);qr(a,t.memoizedState)||(Do=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ro(e){var t=Ja();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:eo,lastRenderedState:e}).dispatch=ko.bind(null,Ka,e),[t.memoizedState,e]}function io(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Ka.updateQueue)?(t={lastEffect:null},Ka.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ao(){return Za().memoizedState}function oo(e,t,n,r){var i=Ja();Ka.effectTag|=e,i.memoizedState=io(1|t,n,void 0,void 0===r?null:r)}function uo(e,t,n,r){var i=Za();r=void 0===r?null:r;var a=void 0;if(null!==Ha){var o=Ha.memoizedState;if(a=o.destroy,null!==r&&Xa(r,o.deps))return void io(t,n,a,r)}Ka.effectTag|=e,i.memoizedState=io(1|t,n,a,r)}function so(e,t){return oo(516,4,e,t)}function co(e,t){return uo(516,4,e,t)}function lo(e,t){return uo(4,2,e,t)}function fo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,uo(4,2,fo.bind(null,t,e),n)}function po(){}function vo(e,t){return Ja().memoizedState=[e,void 0===t?null:t],e}function yo(e,t){var n=Za();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mo(e,t){var n=Za();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Xa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function go(e,t,n){var r=Wi();Hi(98>r?98:r,(function(){e(!0)})),Hi(97<r?97:r,(function(){var r=Ba.suspense;Ba.suspense=void 0===t?null:t;try{e(!1),n()}finally{Ba.suspense=r}}))}function ko(e,t,n){var r=es(),i=ya.suspense;i={expirationTime:r=ts(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Ka||null!==a&&a===Ka)Qa=!0,i.expirationTime=Wa,Ka.expirationTime=Wa;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.eagerReducer=a,i.eagerState=u,qr(u,o))return}catch(s){}ns(e,r)}}var wo={readContext:ua,useCallback:Ya,useContext:Ya,useEffect:Ya,useImperativeHandle:Ya,useLayoutEffect:Ya,useMemo:Ya,useReducer:Ya,useRef:Ya,useState:Ya,useDebugValue:Ya,useResponder:Ya,useDeferredValue:Ya,useTransition:Ya},bo={readContext:ua,useCallback:vo,useContext:ua,useEffect:so,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,oo(4,2,fo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oo(4,2,e,t)},useMemo:function(e,t){var n=Ja();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ja();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ko.bind(null,Ka,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ja().memoizedState=e},useState:ro,useDebugValue:po,useResponder:qa,useDeferredValue:function(e,t){var n=ro(e),r=n[0],i=n[1];return so((function(){var n=Ba.suspense;Ba.suspense=void 0===t?null:t;try{i(e)}finally{Ba.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ro(!1),n=t[0];return t=t[1],[vo(go.bind(null,t,e),[t,e]),n]}},_o={readContext:ua,useCallback:yo,useContext:ua,useEffect:co,useImperativeHandle:ho,useLayoutEffect:lo,useMemo:mo,useReducer:to,useRef:ao,useState:function(){return to(eo)},useDebugValue:po,useResponder:qa,useDeferredValue:function(e,t){var n=to(eo),r=n[0],i=n[1];return co((function(){var n=Ba.suspense;Ba.suspense=void 0===t?null:t;try{i(e)}finally{Ba.suspense=n}}),[e,t]),r},useTransition:function(e){var t=to(eo),n=t[0];return t=t[1],[yo(go.bind(null,t,e),[t,e]),n]}},xo={readContext:ua,useCallback:yo,useContext:ua,useEffect:co,useImperativeHandle:ho,useLayoutEffect:lo,useMemo:mo,useReducer:no,useRef:ao,useState:function(){return no(eo)},useDebugValue:po,useResponder:qa,useDeferredValue:function(e,t){var n=no(eo),r=n[0],i=n[1];return co((function(){var n=Ba.suspense;Ba.suspense=void 0===t?null:t;try{i(e)}finally{Ba.suspense=n}}),[e,t]),r},useTransition:function(e){var t=no(eo),n=t[0];return t=t[1],[yo(go.bind(null,t,e),[t,e]),n]}},To=null,Io=null,Eo=!1;function So(e,t){var n=Ps(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Co(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function No(e){if(Eo){var t=Io;if(t){var n=t;if(!Co(e,t)){if(!(t=In(n.nextSibling))||!Co(e,t))return e.effectTag=-1025&e.effectTag|2,Eo=!1,void(To=e);So(To,n)}To=e,Io=In(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Eo=!1,To=e}}function Ao(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;To=e}function Ro(e){if(e!==To)return!1;if(!Eo)return Ao(e),Eo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!_n(t,e.memoizedProps))for(t=Io;t;)So(e,t),t=In(t.nextSibling);if(Ao(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Io=In(e.nextSibling);break e}t--}else"$"!==n&&n!==gn&&n!==mn||t++}e=e.nextSibling}Io=null}}else Io=To?In(e.stateNode.nextSibling):null;return!0}function Po(){Io=To=null,Eo=!1}var Oo=X.ReactCurrentOwner,Do=!1;function Mo(e,t,n,r){t.child=null===e?Na(t,null,n,r):Ca(t,e.child,n,r)}function Lo(e,t,n,r,i){n=n.render;var a=t.ref;return oa(t,i),r=$a(e,t,n,r,a,i),null===e||Do?(t.effectTag|=1,Mo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Jo(e,t,i))}function Fo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Os(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ms(n.type,null,r,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Uo(e,t,o,r,i,a))}return o=e.child,i<a&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:Br)(i,r)&&e.ref===t.ref)?Jo(e,t,a):(t.effectTag|=1,(e=Ds(o,r)).ref=t.ref,e.return=t,t.child=e)}function Uo(e,t,n,r,i,a){return null!==e&&Br(e.memoizedProps,r)&&e.ref===t.ref&&(Do=!1,i<a)?(t.expirationTime=e.expirationTime,Jo(e,t,a)):jo(e,t,n,r,a)}function Vo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function jo(e,t,n,r,i){var a=ki(n)?mi:vi.current;return a=gi(t,a),oa(t,i),n=$a(e,t,n,r,a,i),null===e||Do?(t.effectTag|=1,Mo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Jo(e,t,i))}function qo(e,t,n,r,i){if(ki(n)){var a=!0;xi(t)}else a=!1;if(oa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ba(t,n,r),xa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ua(c):c=gi(t,c=ki(n)?mi:vi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&_a(t,o,r,c),sa=!1;var h=t.memoizedState;o.state=h,pa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||yi.current||sa?("function"===typeof l&&(ga(t,n,l,r),s=t.memoizedState),(u=sa||wa(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,la(e,t),u=t.memoizedProps,o.props=t.type===t.elementType?u:Ji(t.type,u),s=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=ua(c):c=gi(t,c=ki(n)?mi:vi.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&_a(t,o,r,c),sa=!1,s=t.memoizedState,o.state=s,pa(t,r,o,i),h=t.memoizedState,u!==r||s!==h||yi.current||sa?("function"===typeof l&&(ga(t,n,l,r),h=t.memoizedState),(l=sa||wa(t,n,u,r,s,h,c))?(f||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return zo(e,t,n,r,a,i)}function zo(e,t,n,r,i,a){Vo(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&Ti(t,n,!1),Jo(e,t,a);r=t.stateNode,Oo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&o?(t.child=Ca(t,e.child,null,a),t.child=Ca(t,null,u,a)):Mo(e,t,u,a),t.memoizedState=r.state,i&&Ti(t,n,!0),t.child}function Bo(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Ma(e,t.containerInfo)}var Wo,Ko,Ho,Go={dehydrated:null,retryTime:0};function Qo(e,t,n){var r,i=t.mode,a=t.pendingProps,o=Va.current,u=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&o)&&(null===e||null!==e.memoizedState)),r?(u=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),di(Va,1&o),null===e){if(void 0!==a.fallback&&No(t),u){if(u=a.fallback,(a=Ls(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Ls(u,i,n,null)).return=t,a.sibling=n,t.memoizedState=Go,t.child=a,n}return i=a.children,t.memoizedState=null,t.child=Na(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,u){if(a=a.fallback,(n=Ds(e,e.pendingProps)).return=t,0===(2&t.mode)&&(u=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=u;null!==u;)u.return=n,u=u.sibling;return(i=Ds(i,a)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Go,t.child=n,i}return n=Ca(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,u){if(u=a.fallback,(a=Ls(null,i,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=Ls(u,i,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=Go,t.child=a,n}return t.memoizedState=null,t.child=Ca(t,e,a.children,n)}function Yo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),aa(e.return,t)}function Xo(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function $o(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Mo(e,t,r.children,n),0!==(2&(r=Va.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Yo(e,n);else if(19===e.tag)Yo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(di(Va,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ja(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Xo(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ja(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Xo(t,!0,n,null,a,t.lastEffect);break;case"together":Xo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Jo(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&ps(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ds(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ds(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Zo(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function eu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ki(t.type)&&wi(),null;case 3:return La(),hi(yi),hi(vi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Ro(t)||(t.effectTag|=4),null;case 5:Ua(t),n=Da(Oa.current);var a=t.type;if(null!==e&&null!=t.stateNode)Ko(e,t,a,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Da(Ra.current),Ro(t)){r=t.stateNode,a=t.type;var u=t.memoizedProps;switch(r[Cn]=t,r[Nn]=u,a){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<$e.length;e++)Qt($e[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":xe(r,u),Qt("invalid",r),cn(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Qt("invalid",r),cn(n,"onChange");break;case"textarea":Re(r,u),Qt("invalid",r),cn(n,"onChange")}for(var s in on(a,u),e=null,u)if(u.hasOwnProperty(s)){var c=u[s];"children"===s?"string"===typeof c?r.textContent!==c&&(e=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(e=["children",""+c]):T.hasOwnProperty(s)&&null!=c&&cn(n,s)}switch(a){case"input":we(r),Ee(r,u,!0);break;case"textarea":we(r),Oe(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=ln)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(s=9===n.nodeType?n:n.ownerDocument,e===sn&&(e=Le(a)),e===sn?"script"===a?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(a,{is:r.is}):(e=s.createElement(a),"select"===a&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,a),e[Cn]=t,e[Nn]=r,Wo(e,t),t.stateNode=e,s=un(a,r),a){case"iframe":case"object":case"embed":Qt("load",e),c=r;break;case"video":case"audio":for(c=0;c<$e.length;c++)Qt($e[c],e);c=r;break;case"source":Qt("error",e),c=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),c=r;break;case"form":Qt("reset",e),Qt("submit",e),c=r;break;case"details":Qt("toggle",e),c=r;break;case"input":xe(e,r),c=_e(e,r),Qt("invalid",e),cn(n,"onChange");break;case"option":c=Ce(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Qt("invalid",e),cn(n,"onChange");break;case"textarea":Re(e,r),c=Ae(e,r),Qt("invalid",e),cn(n,"onChange");break;default:c=r}on(a,c);var l=c;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?rn(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&je(e,f):"children"===u?"string"===typeof f?("textarea"!==a||""!==f)&&qe(e,f):"number"===typeof f&&qe(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(T.hasOwnProperty(u)?null!=f&&cn(n,u):null!=f&&$(e,u,f,s))}switch(a){case"input":we(e),Ee(e,r,!1);break;case"textarea":we(e),Oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ge(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Ne(e,!!r.multiple,n,!1):null!=r.defaultValue&&Ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(e.onclick=ln)}bn(a,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Ho(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Da(Oa.current),Da(Ra.current),Ro(t)?(n=t.stateNode,r=t.memoizedProps,n[Cn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Cn]=t,t.stateNode=n)}return null;case 13:return hi(Va),r=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Ro(t):(r=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=a,a.nextEffect=u):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Va.current)?Mu===Cu&&(Mu=Nu):(Mu!==Cu&&Mu!==Nu||(Mu=Au),0!==ju&&null!==Pu&&(qs(Pu,Du),zs(Pu,ju)))),(n||r)&&(t.effectTag|=4),null);case 4:return La(),null;case 10:return ia(t),null;case 19:if(hi(Va),null===(r=t.memoizedState))return null;if(a=0!==(64&t.effectTag),null===(u=r.rendering)){if(a)Zo(r,!1);else if(Mu!==Cu||null!==e&&0!==(64&e.effectTag))for(u=t.child;null!==u;){if(null!==(e=ja(u))){for(t.effectTag|=64,Zo(r,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)u=n,(a=r).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=u,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,u=e.dependencies,a.dependencies=null===u?null:{expirationTime:u.expirationTime,firstContext:u.firstContext,responders:u.responders}),r=r.sibling;return di(Va,1&Va.current|2),t.child}u=u.sibling}}else{if(!a)if(null!==(e=ja(u))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Zo(r,!0),null===r.tail&&"hidden"===r.tailMode&&!u.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,Zo(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=r.last)?n.sibling=u:t.child=u,r.last=u)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Bi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Va.current,di(Va,a?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function tu(e){switch(e.tag){case 1:ki(e.type)&&wi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(La(),hi(yi),hi(vi),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Ua(e),null;case 13:return hi(Va),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return hi(Va),null;case 4:return La(),null;case 10:return ia(e),null;default:return null}}function nu(e,t){return{value:e,source:t,stack:me(t)}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ko=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var u,s,c=t.stateNode;switch(Da(Ra.current),e=null,n){case"input":o=_e(c,o),r=_e(c,r),e=[];break;case"option":o=Ce(c,o),r=Ce(c,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=Ae(c,o),r=Ae(c,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(c.onclick=ln)}for(u in on(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u)for(s in c=o[u])c.hasOwnProperty(s)&&(n||(n={}),n[s]="");else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(T.hasOwnProperty(u)?e||(e=[]):(e=e||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(e||(e=[]),e.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(u,l)):"children"===u?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(T.hasOwnProperty(u)?(null!=l&&cn(a,u),e||c===l||(e=[])):(e=e||[]).push(u,l))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Ho=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var ru="function"===typeof WeakSet?WeakSet:Set;function iu(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=me(n)),null!==n&&ye(n.type),t=t.value,null!==e&&1===e.tag&&ye(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function au(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Es(e,n)}else t.current=null}function ou(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(o(163))}function uu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function su(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void su(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&va(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}va(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&bn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Ft(n)))))}throw Error(o(163))}function lu(e,t,n){switch("function"===typeof As&&As(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Hi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(a){Es(i,a)}}e=e.next}while(e!==r)}))}break;case 1:au(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Es(e,n)}}(t,n);break;case 5:au(t);break;case 4:yu(e,t,n)}}function fu(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&fu(t)}function hu(e){return 5===e.tag||3===e.tag||4===e.tag}function du(e){e:{for(var t=e.return;null!==t;){if(hu(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.effectTag&&(qe(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||hu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?pu(e,n,t):vu(e,n,t)}function pu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ln));else if(4!==r&&null!==(e=e.child))for(pu(e,t,n),e=e.sibling;null!==e;)pu(e,t,n),e=e.sibling}function vu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(vu(e,t,n),e=e.sibling;null!==e;)vu(e,t,n),e=e.sibling}function yu(e,t,n){for(var r,i,a=t,u=!1;;){if(!u){u=a.return;e:for(;;){if(null===u)throw Error(o(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===a.tag||6===a.tag){e:for(var s=e,c=a,l=n,f=c;;)if(lu(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=a.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(lu(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(u=!1)}a.sibling.return=a.return,a=a.sibling}}function mu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void uu(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Nn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Te(n,r),un(e,i),t=un(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?rn(n,s):"dangerouslySetInnerHTML"===u?je(n,s):"children"===u?qe(n,s):$(n,u,s,t)}switch(e){case"input":Ie(n,r);break;case"textarea":Pe(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Ne(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Ne(n,!!r.multiple,r.defaultValue,!0):Ne(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Ft(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,zu=Bi()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,r?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,a.style.display=nn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void gu(t);case 19:return void gu(t)}throw Error(o(163))}function gu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ru),t.forEach((function(t){var r=Cs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var ku="function"===typeof WeakMap?WeakMap:Map;function wu(e,t,n){(n=fa(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Ku=r),iu(e,t)},n}function bu(e,t,n){(n=fa(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return iu(e,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this),iu(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var _u,xu=Math.ceil,Tu=X.ReactCurrentDispatcher,Iu=X.ReactCurrentOwner,Eu=16,Su=32,Cu=0,Nu=3,Au=4,Ru=0,Pu=null,Ou=null,Du=0,Mu=Cu,Lu=null,Fu=1073741823,Uu=1073741823,Vu=null,ju=0,qu=!1,zu=0,Bu=null,Wu=!1,Ku=null,Hu=null,Gu=!1,Qu=null,Yu=90,Xu=null,$u=0,Ju=null,Zu=0;function es(){return 0!==(48&Ru)?1073741821-(Bi()/10|0):0!==Zu?Zu:Zu=1073741821-(Bi()/10|0)}function ts(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Wi();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(Ru&Eu))return Du;if(null!==n)e=$i(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=$i(e,150,100);break;case 97:case 96:e=$i(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Pu&&e===Du&&--e,e}function ns(e,t){if(50<$u)throw $u=0,Ju=null,Error(o(185));if(null!==(e=rs(e,t))){var n=Wi();1073741823===t?0!==(8&Ru)&&0===(48&Ru)?us(e):(as(e),0===Ru&&Yi()):as(e),0===(4&Ru)||98!==n&&99!==n||(null===Xu?Xu=new Map([[e,t]]):(void 0===(n=Xu.get(e))||n>t)&&Xu.set(e,t))}}function rs(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Pu===i&&(ps(t),Mu===Au&&qs(i,Du)),zs(i,t)),i}function is(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!js(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function as(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Qi(us.bind(null,e));else{var t=is(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=es();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Li&&Si(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Qi(us.bind(null,e)):Gi(r,os.bind(null,e),{timeout:10*(1073741821-t)-Bi()}),e.callbackNode=t}}}function os(e,t){if(Zu=0,t)return Bs(e,t=es()),as(e),null;var n=is(e);if(0!==n){if(t=e.callbackNode,0!==(48&Ru))throw Error(o(327));if(xs(),e===Pu&&n===Du||ls(e,n),null!==Ou){var r=Ru;Ru|=Eu;for(var i=hs();;)try{ys();break}catch(s){fs(e,s)}if(ra(),Ru=r,Tu.current=i,1===Mu)throw t=Lu,ls(e,n),qs(e,n),as(e),t;if(null===Ou)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Mu,Pu=null,r){case Cu:case 1:throw Error(o(345));case 2:Bs(e,2<n?2:n);break;case Nu:if(qs(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=ks(i)),1073741823===Fu&&10<(i=zu+500-Bi())){if(qu){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,ls(e,n);break}}if(0!==(a=is(e))&&a!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=xn(ws.bind(null,e),i);break}ws(e);break;case Au:if(qs(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=ks(i)),qu&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,ls(e,n);break}if(0!==(i=is(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Uu?r=10*(1073741821-Uu)-Bi():1073741823===Fu?r=0:(r=10*(1073741821-Fu)-5e3,0>(r=(i=Bi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xu(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=xn(ws.bind(null,e),r);break}ws(e);break;case 5:if(1073741823!==Fu&&null!==Vu){a=Fu;var u=Vu;if(0>=(r=0|u.busyMinDurationMs)?r=0:(i=0|u.busyDelayMs,r=(a=Bi()-(10*(1073741821-a)-(0|u.timeoutMs||5e3)))<=i?0:i+r-a),10<r){qs(e,n),e.timeoutHandle=xn(ws.bind(null,e),r);break}}ws(e);break;default:throw Error(o(329))}if(as(e),e.callbackNode===t)return os.bind(null,e)}}return null}function us(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!==(48&Ru))throw Error(o(327));if(xs(),e===Pu&&t===Du||ls(e,t),null!==Ou){var n=Ru;Ru|=Eu;for(var r=hs();;)try{vs();break}catch(i){fs(e,i)}if(ra(),Ru=n,Tu.current=r,1===Mu)throw n=Lu,ls(e,t),qs(e,t),as(e),n;if(null!==Ou)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Pu=null,ws(e),as(e)}return null}function ss(e,t){var n=Ru;Ru|=1;try{return e(t)}finally{0===(Ru=n)&&Yi()}}function cs(e,t){var n=Ru;Ru&=-2,Ru|=8;try{return e(t)}finally{0===(Ru=n)&&Yi()}}function ls(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Tn(n)),null!==Ou)for(n=Ou.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&wi();break;case 3:La(),hi(yi),hi(vi);break;case 5:Ua(r);break;case 4:La();break;case 13:case 19:hi(Va);break;case 10:ia(r)}n=n.return}Pu=e,Ou=Ds(e.current,null),Du=t,Mu=Cu,Lu=null,Uu=Fu=1073741823,Vu=null,ju=0,qu=!1}function fs(e,t){for(;;){try{if(ra(),za.current=wo,Qa)for(var n=Ka.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Wa=0,Ga=Ha=Ka=null,Qa=!1,null===Ou||null===Ou.return)return Mu=1,Lu=t,Ou=null;e:{var i=e,a=Ou.return,o=Ou,u=t;if(t=Du,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var s=u;if(0===(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.expirationTime=c.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var l=0!==(1&Va.current),f=a;do{var h;if(h=13===f.tag){var d=f.memoizedState;if(null!==d)h=null!==d.dehydrated;else{var p=f.memoizedProps;h=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!l)}}if(h){var v=f.updateQueue;if(null===v){var y=new Set;y.add(s),f.updateQueue=y}else v.add(s);if(0===(2&f.mode)){if(f.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var m=fa(1073741823,null);m.tag=2,ha(o,m)}o.expirationTime=1073741823;break e}u=void 0,o=t;var g=i.pingCache;if(null===g?(g=i.pingCache=new ku,u=new Set,g.set(s,u)):void 0===(u=g.get(s))&&(u=new Set,g.set(s,u)),!u.has(o)){u.add(o);var k=Ss.bind(null,i,s,o);s.then(k,k)}f.effectTag|=4096,f.expirationTime=t;break e}f=f.return}while(null!==f);u=Error((ye(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+me(o))}5!==Mu&&(Mu=2),u=nu(u,o),f=a;do{switch(f.tag){case 3:s=u,f.effectTag|=4096,f.expirationTime=t,da(f,wu(f,s,t));break e;case 1:s=u;var w=f.type,b=f.stateNode;if(0===(64&f.effectTag)&&("function"===typeof w.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hu||!Hu.has(b)))){f.effectTag|=4096,f.expirationTime=t,da(f,bu(f,s,t));break e}}f=f.return}while(null!==f)}Ou=gs(Ou)}catch(_){t=_;continue}break}}function hs(){var e=Tu.current;return Tu.current=wo,null===e?wo:e}function ds(e,t){e<Fu&&2<e&&(Fu=e),null!==t&&e<Uu&&2<e&&(Uu=e,Vu=t)}function ps(e){e>ju&&(ju=e)}function vs(){for(;null!==Ou;)Ou=ms(Ou)}function ys(){for(;null!==Ou&&!Fi();)Ou=ms(Ou)}function ms(e){var t=_u(e.alternate,e,Du);return e.memoizedProps=e.pendingProps,null===t&&(t=gs(e)),Iu.current=null,t}function gs(e){Ou=e;do{var t=Ou.alternate;if(e=Ou.return,0===(2048&Ou.effectTag)){if(t=eu(t,Ou,Du),1===Du||1!==Ou.childExpirationTime){for(var n=0,r=Ou.child;null!==r;){var i=r.expirationTime,a=r.childExpirationTime;i>n&&(n=i),a>n&&(n=a),r=r.sibling}Ou.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ou.firstEffect),null!==Ou.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ou.firstEffect),e.lastEffect=Ou.lastEffect),1<Ou.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ou:e.firstEffect=Ou,e.lastEffect=Ou))}else{if(null!==(t=tu(Ou)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ou.sibling))return t;Ou=e}while(null!==Ou);return Mu===Cu&&(Mu=5),null}function ks(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function ws(e){var t=Wi();return Hi(99,bs.bind(null,e,t)),null}function bs(e,t){do{xs()}while(null!==Qu);if(0!==(48&Ru))throw Error(o(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=ks(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Pu&&(Ou=Pu=null,Du=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var a=Ru;Ru|=Su,Iu.current=null,kn=Gt;var u=vn();if(yn(u)){if("selectionStart"in u)var s={start:u.selectionStart,end:u.selectionEnd};else e:{var c=(s=(s=u.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(c&&0!==c.rangeCount){s=c.anchorNode;var l=c.anchorOffset,f=c.focusNode;c=c.focusOffset;try{s.nodeType,f.nodeType}catch(E){s=null;break e}var h=0,d=-1,p=-1,v=0,y=0,m=u,g=null;t:for(;;){for(var k;m!==s||0!==l&&3!==m.nodeType||(d=h+l),m!==f||0!==c&&3!==m.nodeType||(p=h+c),3===m.nodeType&&(h+=m.nodeValue.length),null!==(k=m.firstChild);)g=m,m=k;for(;;){if(m===u)break t;if(g===s&&++v===l&&(d=h),g===f&&++y===c&&(p=h),null!==(k=m.nextSibling))break;g=(m=g).parentNode}m=k}s=-1===d||-1===p?null:{start:d,end:p}}else s=null}s=s||{start:0,end:0}}else s=null;wn={activeElementDetached:null,focusedElem:u,selectionRange:s},Gt=!1,Bu=i;do{try{_s()}catch(E){if(null===Bu)throw Error(o(330));Es(Bu,E),Bu=Bu.nextEffect}}while(null!==Bu);Bu=i;do{try{for(u=e,s=t;null!==Bu;){var w=Bu.effectTag;if(16&w&&qe(Bu.stateNode,""),128&w){var b=Bu.alternate;if(null!==b){var _=b.ref;null!==_&&("function"===typeof _?_(null):_.current=null)}}switch(1038&w){case 2:du(Bu),Bu.effectTag&=-3;break;case 6:du(Bu),Bu.effectTag&=-3,mu(Bu.alternate,Bu);break;case 1024:Bu.effectTag&=-1025;break;case 1028:Bu.effectTag&=-1025,mu(Bu.alternate,Bu);break;case 4:mu(Bu.alternate,Bu);break;case 8:yu(u,l=Bu,s),fu(l)}Bu=Bu.nextEffect}}catch(E){if(null===Bu)throw Error(o(330));Es(Bu,E),Bu=Bu.nextEffect}}while(null!==Bu);if(_=wn,b=vn(),w=_.focusedElem,s=_.selectionRange,b!==w&&w&&w.ownerDocument&&pn(w.ownerDocument.documentElement,w)){null!==s&&yn(w)&&(b=s.start,void 0===(_=s.end)&&(_=b),"selectionStart"in w?(w.selectionStart=b,w.selectionEnd=Math.min(_,w.value.length)):(_=(b=w.ownerDocument||document)&&b.defaultView||window).getSelection&&(_=_.getSelection(),l=w.textContent.length,u=Math.min(s.start,l),s=void 0===s.end?u:Math.min(s.end,l),!_.extend&&u>s&&(l=s,s=u,u=l),l=dn(w,u),f=dn(w,s),l&&f&&(1!==_.rangeCount||_.anchorNode!==l.node||_.anchorOffset!==l.offset||_.focusNode!==f.node||_.focusOffset!==f.offset)&&((b=b.createRange()).setStart(l.node,l.offset),_.removeAllRanges(),u>s?(_.addRange(b),_.extend(f.node,f.offset)):(b.setEnd(f.node,f.offset),_.addRange(b))))),b=[];for(_=w;_=_.parentNode;)1===_.nodeType&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<b.length;w++)(_=b[w]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Gt=!!kn,wn=kn=null,e.current=n,Bu=i;do{try{for(w=e;null!==Bu;){var x=Bu.effectTag;if(36&x&&cu(w,Bu.alternate,Bu),128&x){b=void 0;var T=Bu.ref;if(null!==T){var I=Bu.stateNode;Bu.tag,b=I,"function"===typeof T?T(b):T.current=b}}Bu=Bu.nextEffect}}catch(E){if(null===Bu)throw Error(o(330));Es(Bu,E),Bu=Bu.nextEffect}}while(null!==Bu);Bu=null,Ui(),Ru=a}else e.current=n;if(Gu)Gu=!1,Qu=e,Yu=t;else for(Bu=i;null!==Bu;)t=Bu.nextEffect,Bu.nextEffect=null,Bu=t;if(0===(t=e.firstPendingTime)&&(Hu=null),1073741823===t?e===Ju?$u++:($u=0,Ju=e):$u=0,"function"===typeof Ns&&Ns(n.stateNode,r),as(e),Wu)throw Wu=!1,e=Ku,Ku=null,e;return 0!==(8&Ru)||Yi(),null}function _s(){for(;null!==Bu;){var e=Bu.effectTag;0!==(256&e)&&ou(Bu.alternate,Bu),0===(512&e)||Gu||(Gu=!0,Gi(97,(function(){return xs(),null}))),Bu=Bu.nextEffect}}function xs(){if(90!==Yu){var e=97<Yu?97:Yu;return Yu=90,Hi(e,Ts)}}function Ts(){if(null===Qu)return!1;var e=Qu;if(Qu=null,0!==(48&Ru))throw Error(o(331));var t=Ru;for(Ru|=Su,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:uu(5,n),su(5,n)}}catch(r){if(null===e)throw Error(o(330));Es(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Ru=t,Yi(),!0}function Is(e,t,n){ha(e,t=wu(e,t=nu(n,t),1073741823)),null!==(e=rs(e,1073741823))&&as(e)}function Es(e,t){if(3===e.tag)Is(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Is(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){ha(n,e=bu(n,e=nu(t,e),1073741823)),null!==(n=rs(n,1073741823))&&as(n);break}}n=n.return}}function Ss(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Pu===e&&Du===n?Mu===Au||Mu===Nu&&1073741823===Fu&&Bi()-zu<500?ls(e,Du):qu=!0:js(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,as(e)))}function Cs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=ts(t=es(),e,null)),null!==(e=rs(e,t))&&as(e)}_u=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||yi.current)Do=!0;else{if(r<n){switch(Do=!1,t.tag){case 3:Bo(t),Po();break;case 5:if(Fa(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:ki(t.type)&&xi(t);break;case 4:Ma(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,di(Zi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Qo(e,t,n):(di(Va,1&Va.current),null!==(t=Jo(e,t,n))?t.sibling:null);di(Va,1&Va.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return $o(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),di(Va,Va.current),!r)return null}return Jo(e,t,n)}Do=!1}}else Do=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=gi(t,vi.current),oa(t,n),i=$a(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ki(r)){var a=!0;xi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ca(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&ga(t,r,u,e),i.updater=ka,t.stateNode=i,i._reactInternalFiber=t,xa(t,r,e,n),t=zo(null,t,r,!0,a,n)}else t.tag=0,Mo(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,a=t.tag=function(e){if("function"===typeof e)return Os(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===se)return 11;if(e===fe)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=jo(null,t,i,e,n);break e;case 1:t=qo(null,t,i,e,n);break e;case 11:t=Lo(null,t,i,e,n);break e;case 14:t=Fo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Bo(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,la(e,t),pa(t,r,null,n),(r=t.memoizedState.element)===i)Po(),t=Jo(e,t,n);else{if((i=t.stateNode.hydrate)&&(Io=In(t.stateNode.containerInfo.firstChild),To=t,i=Eo=!0),i)for(n=Na(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Mo(e,t,r,n),Po();t=t.child}return t;case 5:return Fa(t),null===e&&No(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,_n(r,i)?u=null:null!==a&&_n(r,a)&&(t.effectTag|=16),Vo(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Mo(e,t,u,n),t=t.child),t;case 6:return null===e&&No(t),null;case 13:return Qo(e,t,n);case 4:return Ma(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ca(t,null,r,n):Mo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Lo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Mo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Mo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(di(Zi,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=qr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!yi.current){t=Jo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=fa(n,null)).tag=2,ha(s,l)),s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n),aa(s.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Mo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,oa(t,n),r=r(i=ua(i,a.unstable_observedBits)),t.effectTag|=1,Mo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),Fo(e,t,i,a=Ji(i.type,a),r,n);case 15:return Uo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,ki(r)?(e=!0,xi(t)):e=!1,oa(t,n),ba(t,r,i),xa(t,r,i,n),zo(null,t,r,!0,e,n);case 19:return $o(e,t,n)}throw Error(o(156,t.tag))};var Ns=null,As=null;function Rs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ps(e,t,n,r){return new Rs(e,t,n,r)}function Os(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ds(e,t){var n=e.alternate;return null===n?((n=Ps(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ms(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Os(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case ne:return Ls(n.children,i,a,t);case ue:u=8,i|=7;break;case re:u=8,i|=1;break;case ie:return(e=Ps(12,n,t,8|i)).elementType=ie,e.type=ie,e.expirationTime=a,e;case ce:return(e=Ps(13,n,t,i)).type=ce,e.elementType=ce,e.expirationTime=a,e;case le:return(e=Ps(19,n,t,i)).elementType=le,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ae:u=10;break e;case oe:u=9;break e;case se:u=11;break e;case fe:u=14;break e;case he:u=16,r=null;break e;case de:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ps(u,n,t,i)).elementType=e,t.type=r,t.expirationTime=a,t}function Ls(e,t,n,r){return(e=Ps(7,e,r,t)).expirationTime=n,e}function Fs(e,t,n){return(e=Ps(6,e,null,t)).expirationTime=n,e}function Us(e,t,n){return(t=Ps(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vs(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function js(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function qs(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function zs(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Bs(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Ws(e,t,n,r){var i=t.current,a=es(),u=ya.suspense;a=ts(a,i,u);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(ki(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(ki(c)){n=_i(n,c,s);break e}}n=s}else n=pi;return null===t.context?t.context=n:t.pendingContext=n,(t=fa(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ha(i,t),ns(i,a),a}function Ks(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hs(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Gs(e,t){Hs(e,t),(e=e.alternate)&&Hs(e,t)}function Qs(e,t,n){var r=new Vs(e,t,n=null!=n&&!0===n.hydrate),i=Ps(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,ca(i),e[An]=r.current,n&&0!==t&&function(e,t){var n=Ze(t);St.forEach((function(e){vt(e,t,n)})),Ct.forEach((function(e){vt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Ys(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xs(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=Ks(o);u.call(e)}}Ws(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Qs(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=Ks(o);s.call(e)}}cs((function(){Ws(t,o,e,i)}))}return Ks(o)}function $s(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Js(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ys(t))throw Error(o(200));return $s(e,t,null,n)}Qs.prototype.render=function(e){Ws(e,this._internalRoot,null,null)},Qs.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ws(null,e,null,(function(){t[An]=null}))},yt=function(e){if(13===e.tag){var t=$i(es(),150,100);ns(e,t),Gs(e,t)}},mt=function(e){13===e.tag&&(ns(e,3),Gs(e,3))},gt=function(e){if(13===e.tag){var t=es();ns(e,t=ts(t,e,null)),Gs(e,t)}},C=function(e,t,n){switch(t){case"input":if(Ie(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Dn(r);if(!i)throw Error(o(90));be(r),Ie(r,i)}}}break;case"textarea":Pe(e,n);break;case"select":null!=(t=n.value)&&Ne(e,!!n.multiple,t,!1)}},D=ss,M=function(e,t,n,r,i){var a=Ru;Ru|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(Ru=a)&&Yi()}},L=function(){0===(49&Ru)&&(function(){if(null!==Xu){var e=Xu;Xu=null,e.forEach((function(e,t){Bs(t,e),as(t)})),Yi()}}(),xs())},F=function(e,t){var n=Ru;Ru|=2;try{return e(t)}finally{0===(Ru=n)&&Yi()}};var Zs={Events:[Pn,On,Dn,E,x,qn,function(e){at(e,jn)},P,O,Jt,st,xs,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ns=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},As=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Rn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zs,t.createPortal=Js,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=rt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!==(48&Ru))throw Error(o(187));var n=Ru;Ru|=1;try{return Hi(99,e.bind(null,t))}finally{Ru=n,Yi()}},t.hydrate=function(e,t,n){if(!Ys(t))throw Error(o(200));return Xs(null,e,t,!0,n)},t.render=function(e,t,n){if(!Ys(t))throw Error(o(200));return Xs(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ys(e))throw Error(o(40));return!!e._reactRootContainer&&(cs((function(){Xs(null,null,e,!1,(function(){e._reactRootContainer=null,e[An]=null}))})),!0)},t.unstable_batchedUpdates=ss,t.unstable_createPortal=function(e,t){return Js(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ys(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return Xs(e,t,n,!1,r)},t.version="16.14.0"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===f}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,s=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function m(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k={};function w(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||g}function b(){}function _(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||g}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(m(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=w.prototype;var x=_.prototype=new b;x.constructor=_,r(x,w.prototype),x.isPureReactComponent=!0;var T={current:null},I=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,r)&&!E.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:T.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var N=/\/+/g,A=[];function R(e,t,n,r){if(A.length){var i=A.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var u=!1;if(null===e)u=!0;else switch(i){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return n(r,e,""===t?"."+M(e,0):t),1;if(u=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){var c=t+M(i=e[s],s);u+=O(i,c,n,r)}else if(null===e||"object"!==typeof e?c=null:c="function"===typeof(c=y&&e[y]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),s=0;!(i=e.next()).done;)u+=O(i=i.value,c=t+M(i,s++),n,r);else if("object"===i)throw n=""+e,Error(m(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return u}function D(e,t,n){return null==e?0:O(e,"",t,n)}function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,(function(e){return e})):null!=e&&(C(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(N,"$&/")+"/"),D(e,F,t=R(t,a,r,i)),P(t)}var V={current:null};function j(){var e=V.current;if(null===e)throw Error(m(321));return e}var q={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,L,t=R(null,null,t,n)),P(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!C(e))throw Error(m(143));return e}},t.Component=w,t.Fragment=u,t.Profiler=c,t.PureComponent=_,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(m(267,e));var i=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=T.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)I.call(t,l)&&!E.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:u,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:h,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return j().useCallback(e,t)},t.useContext=function(e,t){return j().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return j().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return j().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return j().useLayoutEffect(e,t)},t.useMemo=function(e,t){return j().useMemo(e,t)},t.useReducer=function(e,t,n){return j().useReducer(e,t,n)},t.useRef=function(e){return j().useRef(e)},t.useState=function(e){return j().useState(e)},t.version="16.14.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(R){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=I(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(N([])));b&&b!==n&&r.call(b,a)&&(k=b);var _=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return m.prototype=g,s(_,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(T.prototype),s(T.prototype,o,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),s(_,u,"Generator"),s(_,a,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,s=null,c=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},l=Date.now();t.unstable_now=function(){return Date.now()-l},n=function(e){null!==u?setTimeout(n,0,e):(u=e,setTimeout(c,0))},r=function(e,t){s=setTimeout(e,t)},i=function(){clearTimeout(s)},a=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,h=window.Date,d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var y=h.now();t.unstable_now=function(){return h.now()-y}}var m=!1,g=null,k=-1,w=5,b=0;a=function(){return t.unstable_now()>=b},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,x=_.port2;_.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();b=e+w;try{g(!0,e)?x.postMessage(null):(m=!1,g=null)}catch(n){throw x.postMessage(null),n}}else m=!1},n=function(e){g=e,m||(m=!0,x.postMessage(null))},r=function(e,n){k=d((function(){e(t.unstable_now())}),n)},i=function(){p(k),k=-1}}function T(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function I(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>S(o,n))void 0!==s&&0>S(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>S(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var C=[],N=[],A=1,R=null,P=3,O=!1,D=!1,M=!1;function L(e){for(var t=I(N);null!==t;){if(null===t.callback)E(N);else{if(!(t.startTime<=e))break;E(N),t.sortIndex=t.expirationTime,T(C,t)}t=I(N)}}function F(e){if(M=!1,L(e),!D)if(null!==I(C))D=!0,n(U);else{var t=I(N);null!==t&&r(F,t.startTime-e)}}function U(e,n){D=!1,M&&(M=!1,i()),O=!0;var o=P;try{for(L(n),R=I(C);null!==R&&(!(R.expirationTime>n)||e&&!a());){var u=R.callback;if(null!==u){R.callback=null,P=R.priorityLevel;var s=u(R.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?R.callback=s:R===I(C)&&E(C),L(n)}else E(C);R=I(C)}if(null!==R)var c=!0;else{var l=I(N);null!==l&&r(F,l.startTime-n),c=!1}return c}finally{R=null,P=o,O=!1}}function V(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var j=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||O||(D=!0,n(U))},t.unstable_getCurrentPriorityLevel=function(){return P},t.unstable_getFirstCallbackNode=function(){return I(C)},t.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var n=P;P=t;try{return e()}finally{P=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=j,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=P;P=e;try{return t()}finally{P=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();if("object"===typeof o&&null!==o){var s=o.delay;s="number"===typeof s&&0<s?u+s:u,o="number"===typeof o.timeout?o.timeout:V(e)}else o=V(e),s=u;return e={id:A++,callback:a,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>u?(e.sortIndex=s,T(N,e),null===I(C)&&e===I(N)&&(M?i():M=!0,r(F,s-u))):(e.sortIndex=o,T(C,e),D||O||(D=!0,n(U))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();L(e);var n=I(C);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<R.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=P;return function(){var n=P;P=t;try{return e.apply(this,arguments)}finally{P=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return tr},SDK_VERSION:function(){return ki},_DEFAULT_ENTRY_NAME:function(){return oi},_addComponent:function(){return li},_addOrOverwriteComponent:function(){return fi},_apps:function(){return si},_clearComponents:function(){return vi},_components:function(){return ci},_getProvider:function(){return di},_registerComponent:function(){return hi},_removeServiceInstance:function(){return pi},deleteApp:function(){return xi},getApp:function(){return bi},getApps:function(){return _i},initializeApp:function(){return wi},onLog:function(){return Ei},registerVersion:function(){return Ii},setLogLevel:function(){return Si}});var t=n(791),r=n(164);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||u()}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function h(e){return"/"===e.charAt(0)}function d(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var p=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&h(e),o=t&&h(t),u=a||o;if(e&&h(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var f=i[l];"."===f?d(i,l):".."===f?(d(i,l),c++):c&&(d(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&h(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p},v="Invariant failed";function y(e,t){if(!e)throw new Error(v)}function m(e){return"/"===e.charAt(0)?e:"/"+e}function g(e){return"/"===e.charAt(0)?e.substr(1):e}function k(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function w(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function b(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function _(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=f({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=p(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function x(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var T=!("undefined"===typeof window||!window.document||!window.document.createElement);function I(e,t){t(window.confirm(e))}var E="popstate",S="hashchange";function C(){try{return window.history.state||{}}catch(e){return{}}}function N(e){void 0===e&&{},T||y(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?I:u,c=i.keyLength,l=void 0===c?6:c,h=e.basename?w(m(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&k(a,h),_(a,r,n)}function p(){return Math.random().toString(36).substr(2,l)}var v=x();function g(e){f(j,e),j.length=t.length,v.notifyListeners(j.location,j.action)}function N(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(d(e.state))}function A(){P(d(C()))}var R=!1;function P(e){if(R)!1,g();else{v.confirmTransitionTo(e,"POP",s,(function(t){t?g({action:"POP",location:e}):function(e){var t=j.location,n=D.indexOf(t.key);-1===n&&0;var r=D.indexOf(e.key);-1===r&&0;var i=n-r;i&&(!0,L(i))}(e)}))}}var O=d(C()),D=[O.key];function M(e){return h+b(e)}function L(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?(window.addEventListener(E,N),r&&window.addEventListener(S,A)):0===F&&(window.removeEventListener(E,N),r&&window.removeEventListener(S,A))}var V=!1;var j={length:t.length,action:"POP",location:O,createHref:M,push:function(e,r){var i="PUSH",a=_(e,r,p(),j.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=M(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=D.indexOf(j.location.key),l=D.slice(0,c+1);l.push(a.key),l,g({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=_(e,r,p(),j.location);v.confirmTransitionTo(a,i,s,(function(e){if(e){var r=M(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=D.indexOf(j.location.key);-1!==c&&(D[c]=a.key),g({action:i,location:a})}else window.location.replace(r)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&!1;var t=v.setPrompt(e);return V||(U(1),!0),function(){return V&&(!1,U(-1)),t()}},listen:function(e){var t=v.appendListener(e);return U(1),function(){U(-1),t()}}};return j}var A="hashchange",R={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+g(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:g,decodePath:m},slash:{encodePath:m,decodePath:m}};function P(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function O(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function D(e){window.location.replace(P(window.location.href)+"#"+e)}function M(e){void 0===e&&(e={}),T||y(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?I:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?w(m(e.basename)):"",s=R[o],c=s.encodePath,l=s.decodePath;function h(){var e=l(O());return u&&(e=k(e,u)),_(e)}var d=x();function p(e){f(j,e),j.length=t.length,d.notifyListeners(j.location,j.action)}var v=!1,g=null;function E(){var e,t,n=O(),r=c(n);if(n!==r)D(r);else{var a=h(),o=j.location;if(!v&&(t=a,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(g===b(a))return;g=null,function(e){if(v)v=!1,p();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?p({action:t,location:e}):function(e){var t=j.location,n=M.lastIndexOf(b(t));-1===n&&(n=0);var r=M.lastIndexOf(b(e));-1===r&&(r=0);var i=n-r;i&&(v=!0,L(i))}(e)}))}}(a)}}var S=O(),C=c(S);S!==C&&D(C);var N=h(),M=[b(N)];function L(e){t.go(e)}var F=0;function U(e){1===(F+=e)&&1===e?window.addEventListener(A,E):0===F&&window.removeEventListener(A,E)}var V=!1;var j={length:t.length,action:"POP",location:N,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=P(window.location.href)),n+"#"+c(u+b(e))},push:function(e,t){var n="PUSH",r=_(e,void 0,void 0,j.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=b(r),i=c(u+t);if(O()!==i){g=t,function(e){window.location.hash=e}(i);var a=M.lastIndexOf(b(j.location)),o=M.slice(0,a+1);o.push(t),M=o,p({action:n,location:r})}else p()}}))},replace:function(e,t){var n="REPLACE",r=_(e,void 0,void 0,j.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=b(r),i=c(u+t);O()!==i&&(g=t,D(i));var a=M.indexOf(b(j.location));-1!==a&&(M[a]=t),p({action:n,location:r})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return V||(U(1),V=!0),function(){return V&&(V=!1,U(-1)),t()}},listen:function(e){var t=d.appendListener(e);return U(1),function(){U(-1),t()}}};return j}function L(e,t,n){return Math.min(Math.max(e,t),n)}function F(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,u=t.keyLength,s=void 0===u?6:u,c=x();function l(e){f(m,e),m.length=m.entries.length,c.notifyListeners(m.location,m.action)}function h(){return Math.random().toString(36).substr(2,s)}var d=L(o,0,i.length-1),p=i.map((function(e){return _(e,void 0,"string"===typeof e?h():e.key||h())})),v=b;function y(e){var t=L(m.index+e,0,m.entries.length-1),r=m.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?l({action:"POP",location:r,index:t}):l()}))}var m={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:v,push:function(e,t){var r="PUSH",i=_(e,t,h(),m.location);c.confirmTransitionTo(i,r,n,(function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),l({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=_(e,t,h(),m.location);c.confirmTransitionTo(i,r,n,(function(e){e&&(m.entries[m.index]=i,l({action:r,location:i}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&!1,c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return m}var U=n(7),V=n.n(U),j=1073741823,q="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function z(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var B=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return q[e]=(q[e]||0)+1}()+"__",o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=z(t.props.value),t}l(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):j,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=V().object.isRequired,r);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}l(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?j:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?j:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[a]=V().object,i),{Provider:o,Consumer:u}},W=B,K=n(151),H=n.n(K);n(228);function G(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var Q=function(e){var t=W();return t.displayName=e,t},Y=Q("Router-History"),X=Q("Router"),$=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}l(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(X.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(Y.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var J={},Z=0;function ee(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=J[n]||(J[n]={});if(r[e])return r[e];var i=[],a={regexp:H()(e,i,t),keys:i};return Z<1e4&&(r[e]=a,Z++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var te=function(e){function n(){return e.apply(this,arguments)||this}return l(n,e),n.prototype.render=function(){var e=this;return t.createElement(X.Consumer,null,(function(n){n||y(!1);var r=e.props.location||n.location,i=f({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?ee(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,s=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(X.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:u?t.createElement(u,i):s?s(i):null:"function"===typeof o?o(i):null)}))},n}(t.Component);function ne(e){return"/"===e.charAt(0)?e:"/"+e}function re(e,t){if(!e)return t;var n=ne(e);return 0!==t.pathname.indexOf(n)?t:f({},t,{pathname:t.pathname.substr(n.length)})}function ie(e){return"string"===typeof e?e:b(e)}function ae(e){return function(){y(!1)}}function oe(){}t.Component;var ue=function(e){function n(){return e.apply(this,arguments)||this}return l(n,e),n.prototype.render=function(){var e=this;return t.createElement(X.Consumer,null,(function(n){n||y(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?ee(a.pathname,f({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var se=t.useContext;t.Component;var ce=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=M(t.props),t}return l(n,e),n.prototype.render=function(){return t.createElement($,{history:this.history,children:this.props.children})},n}(t.Component);var le=function(e,t){return"function"===typeof e?e(t):e},fe=function(e,t){return"string"===typeof e?_(e,null,null,t):e},he=function(e){return e},de=t.forwardRef;"undefined"===typeof de&&(de=he);var pe=de((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=G(e,["innerRef","navigate","onClick"]),u=o.target,s=f({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=he!==de&&n||r,t.createElement("a",s)}));var ve=de((function(e,n){var r=e.component,i=void 0===r?pe:r,a=e.replace,o=e.to,u=e.innerRef,s=G(e,["component","replace","to","innerRef"]);return t.createElement(X.Consumer,null,(function(e){e||y(!1);var r=e.history,c=fe(le(o,e.location),e.location),l=c?r.createHref(c):"",h=f({},s,{href:l,navigate:function(){var t=le(o,e.location),n=b(e.location)===b(fe(t));(a||n?r.replace:r.push)(t)}});return he!==de?h.ref=n||u:h.innerRef=u,t.createElement(i,h)}))})),ye=function(e){return e},me=t.forwardRef;"undefined"===typeof me&&(me=ye);me((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,c=e.exact,l=e.isActive,h=e.location,d=e.sensitive,p=e.strict,v=e.style,m=e.to,g=e.innerRef,k=G(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(X.Consumer,null,(function(e){e||y(!1);var r=h||e.location,a=fe(le(m,r),r),w=a.pathname,b=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),_=b?ee(r.pathname,{path:b,exact:c,sensitive:d,strict:p}):null,x=!!(l?l(_,r):_),T="function"===typeof s?s(x):s,I="function"===typeof v?v(x):v;x&&(T=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(T,o),I=f({},I,u));var E=f({"aria-current":x&&i||null,className:T,style:I,to:a},k);return ye!==me?E.ref=n||g:E.innerRef=g,t.createElement(ve,E)}))}));function ge(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(Mh){return void n(Mh)}u.done?t(s):Promise.resolve(s).then(r,i)}function ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ge(a,r,i,o,u,"next",e)}function u(e){ge(a,r,i,o,u,"throw",e)}o(void 0)}))}}var we=n(757),be=n.n(we);function _e(e){return _e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Te(e,t,n[t])}))}return e}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Se=function(){},Ce={},Ne={},Ae={mark:Se,measure:Se};try{"undefined"!==typeof window&&(Ce=window),"undefined"!==typeof document&&(Ne=document),"undefined"!==typeof MutationObserver&&MutationObserver,"undefined"!==typeof performance&&(Ae=performance)}catch(ZM){}var Re=(Ce.navigator||{}).userAgent,Pe=void 0===Re?"":Re,Oe=Ce,De=Ne,Me=Ae,Le=(Oe.document,!!De.documentElement&&!!De.head&&"function"===typeof De.addEventListener&&"function"===typeof De.createElement),Fe=(~Pe.indexOf("MSIE")||Pe.indexOf("Trident/"),"svg-inline--fa"),Ue="data-fa-i2svg",Ve=(function(){try{}catch(ZM){return!1}}(),[1,2,3,4,5,6,7,8,9,10]),je=Ve.concat([11,12,13,14,15,16,17,18,19,20]),qe={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},ze=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",qe.GROUP,qe.SWAP_OPACITY,qe.PRIMARY,qe.SECONDARY].concat(Ve.map((function(e){return"".concat(e,"x")}))).concat(je.map((function(e){return"w-".concat(e)}))),Oe.FontAwesomeConfig||{});if(De&&"function"===typeof De.querySelector){[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=Ee(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=De.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(ze[r]=i)}))}var Be=Ie({},{familyPrefix:"fa",replacementClass:Fe,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},ze);Be.autoReplaceSvg||(Be.observeMutations=!1);var We=Ie({},Be);Oe.FontAwesomeConfig=We;var Ke=Oe||{};Ke.___FONT_AWESOME___||(Ke.___FONT_AWESOME___={}),Ke.___FONT_AWESOME___.styles||(Ke.___FONT_AWESOME___.styles={}),Ke.___FONT_AWESOME___.hooks||(Ke.___FONT_AWESOME___.hooks={}),Ke.___FONT_AWESOME___.shims||(Ke.___FONT_AWESOME___.shims=[]);var He=Ke.___FONT_AWESOME___,Ge=[];Le&&((De.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(De.readyState)||De.addEventListener("DOMContentLoaded",(function e(){De.removeEventListener("DOMContentLoaded",e),1,Ge.map((function(e){return e()}))})));var Qe,Ye="pending",Xe="settled",$e="fulfilled",Je="rejected",Ze=function(){},et="undefined"!==typeof n.g&&"undefined"!==typeof n.g.process&&"function"===typeof n.g.process.emit,tt="undefined"===typeof setImmediate?setTimeout:setImmediate,nt=[];function rt(){for(var e=0;e<nt.length;e++)nt[e][0](nt[e][1]);nt=[],Qe=!1}function it(e,t){nt.push([e,t]),Qe||(Qe=!0,tt(rt,0))}function at(e){var t=e.owner,n=t._state,r=t._data,i=e[n],a=e.then;if("function"===typeof i){n=$e;try{r=i(r)}catch(ZM){ct(a,ZM)}}ot(a,r)||(n===$e&&ut(a,r),n===Je&&ct(a,r))}function ot(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"===typeof t||"object"===_e(t))){var r=t.then;if("function"===typeof r)return r.call(t,(function(r){n||(n=!0,t===r?st(e,r):ut(e,r))}),(function(t){n||(n=!0,ct(e,t))})),!0}}catch(ZM){return n||ct(e,ZM),!0}return!1}function ut(e,t){e!==t&&ot(e,t)||st(e,t)}function st(e,t){e._state===Ye&&(e._state=Xe,e._data=t,it(ft,e))}function ct(e,t){e._state===Ye&&(e._state=Xe,e._data=t,it(ht,e))}function lt(e){e._then=e._then.forEach(at)}function ft(e){e._state=$e,lt(e)}function ht(e){e._state=Je,lt(e),!e._handled&&et&&n.g.process.emit("unhandledRejection",e._data,e)}function dt(e){n.g.process.emit("rejectionHandled",e)}function pt(e){if("function"!==typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof pt===!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function(e,t){function n(e){ct(t,e)}try{e((function(e){ut(t,e)}),n)}catch(ZM){n(ZM)}}(e,this)}pt.prototype={constructor:pt,_state:Ye,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(Ze),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===Je&&et&&it(dt,this)),this._state===$e||this._state===Je?it(at,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},pt.all=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.all().");return new pt((function(t,n){var r=[],i=0;function a(e){return i++,function(n){r[e]=n,--i||t(r)}}for(var o,u=0;u<e.length;u++)(o=e[u])&&"function"===typeof o.then?o.then(a(u),n):r[u]=o;i||t(r)}))},pt.race=function(e){if(!Array.isArray(e))throw new TypeError("You must pass an array to Promise.race().");return new pt((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"===typeof r.then?r.then(t,n):t(r)}))},pt.resolve=function(e){return e&&"object"===_e(e)&&e.constructor===pt?e:new pt((function(t){t(e)}))},pt.reject=function(e){return new pt((function(t,n){n(e)}))};var vt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function yt(e){if(e&&Le){var t=De.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=De.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}return De.head.insertBefore(t,r),e}}function mt(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function gt(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function kt(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n],";")}),"")}function wt(e){return e.size!==vt.size||e.x!==vt.x||e.y!==vt.y||e.rotate!==vt.rotate||e.flipX||e.flipY}function bt(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),u="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(u)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}var _t={x:0,y:0,width:"100%",height:"100%"};function xt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}function Tt(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,u=e.symbol,s=e.title,c=e.maskId,l=e.titleId,f=e.extra,h=e.watchable,d=void 0!==h&&h,p=r.found?r:n,v=p.width,y=p.height,m="fak"===i,g=m?"":"fa-w-".concat(Math.ceil(v/y*16)),k=[We.replacementClass,a?"".concat(We.familyPrefix,"-").concat(a):"",g].filter((function(e){return-1===f.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(f.classes).join(" "),w={children:[],attributes:Ie({},f.attributes,{"data-prefix":i,"data-icon":a,class:k,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(y)})},b=m&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/y*16*.0625,"em")}:{};d&&(w.attributes[Ue]=""),s&&w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(l||mt())},children:[s]});var _=Ie({},w,{prefix:i,iconName:a,main:n,mask:r,maskId:c,transform:o,symbol:u,styles:Ie({},b,f.styles)}),x=r.found&&n.found?function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,u=e.transform,s=i.width,c=i.icon,l=a.width,f=a.icon,h=bt({transform:u,containerWidth:l,iconWidth:s}),d={tag:"rect",attributes:Ie({},_t,{fill:"white"})},p=c.children?{children:c.children.map(xt)}:{},v={tag:"g",attributes:Ie({},h.inner),children:[xt(Ie({tag:c.tag,attributes:Ie({},c.attributes,h.path)},p))]},y={tag:"g",attributes:Ie({},h.outer),children:[v]},m="mask-".concat(o||mt()),g="clip-".concat(o||mt()),k={tag:"mask",attributes:Ie({},_t,{id:m,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,y]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:g},children:(t=f,"g"===t.tag?t.children:[t])},k]};return n.push(w,{tag:"rect",attributes:Ie({fill:"currentColor","clip-path":"url(#".concat(g,")"),mask:"url(#".concat(m,")")},_t)}),{children:n,attributes:r}}(_):function(e){var t=e.children,n=e.attributes,r=e.main,i=e.transform,a=kt(e.styles);if(a.length>0&&(n.style=a),wt(i)){var o=bt({transform:i,containerWidth:r.width,iconWidth:r.width});t.push({tag:"g",attributes:Ie({},o.outer),children:[{tag:"g",attributes:Ie({},o.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:Ie({},r.icon.attributes,o.path)}]}]})}else t.push(r.icon);return{children:t,attributes:n}}(_),T=x.children,I=x.attributes;return _.children=T,_.attributes=I,u?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ie({},i,{id:!0===a?"".concat(t,"-").concat(We.familyPrefix,"-").concat(n):a}),children:r}]}]}(_):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(wt(o)&&n.found&&!r.found){var u={x:n.width/n.height/2,y:.5};i.style=kt(Ie({},a,{"transform-origin":"".concat(u.x+o.x/16,"em ").concat(u.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(_)}var It=function(){},Et=(We.measurePerformance&&Me&&Me.mark&&Me.measure,function(e,t,n,r){var i,a,o,u=Object.keys(e),s=u.length,c=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[u[0]]):(i=0,o=n);i<s;i++)o=c(o,e[a=u[i]],a,e);return o});function St(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,a=Object.keys(t).reduce((function(e,n){var r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e}),{});"function"!==typeof He.hooks.addPack||i?He.styles[e]=Ie({},He.styles[e]||{},a):He.hooks.addPack(e,a),"fas"===e&&St("fa",t)}var Ct=He.styles,Nt=He.shims,At=function(){var e=function(e){return Et(Ct,(function(t,n,r){return t[r]=Et(n,e,{}),t}),{})};e((function(e,t,n){return t[3]&&(e[t[3]]=n),e})),e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in Ct;Et(Nt,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),e[r]={prefix:i,iconName:a},e}),{})};At();He.styles;function Rt(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}function Pt(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"===typeof e?gt(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(gt(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(Pt).join(""),"</").concat(t,">")}var Ot=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e?e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),t):t};function Dt(e){this.name="MissingIcon",this.message=e||"Icon unavailable",this.stack=(new Error).stack}Dt.prototype=Object.create(Error.prototype),Dt.prototype.constructor=Dt;var Mt={fill:"currentColor"},Lt={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Ft={tag:"path",attributes:Ie({},Mt,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})},Ut=Ie({},Lt,{attributeName:"opacity"});Ie({},Mt,{cx:"256",cy:"364",r:"28"}),Ie({},Lt,{attributeName:"r",values:"28;14;28;28;14;28;"}),Ie({},Ut,{values:"1;0;1;1;0;1;"}),Ie({},Mt,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Ie({},Ut,{values:"1;0;0;0;0;1;"}),Ie({},Mt,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Ie({},Ut,{values:"0;0;1;1;0;0;"}),He.styles;function Vt(e){var t=e[0],n=e[1],r=Ee(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(We.familyPrefix,"-").concat(qe.GROUP)},children:[{tag:"path",attributes:{class:"".concat(We.familyPrefix,"-").concat(qe.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(We.familyPrefix,"-").concat(qe.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}He.styles;function jt(){var e="fa",t=Fe,n=We.familyPrefix,r=We.replacementClass,i='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),u=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(u,".".concat(r))}return i}var qt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=Ie({},e.definitions[t]||{},i[t]),St(t,i[t]),At()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon;e[i]||(e[i]={}),e[i][a]=o})),e}}],n&&xe(t.prototype,n),r&&xe(t,r),e}();function zt(){We.autoAddCss&&!Gt&&(yt(jt()),Gt=!0)}function Bt(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return Pt(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(Le){var t=De.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function Wt(e){var t=e.prefix,n=void 0===t?"fa":t,r=e.iconName;if(r)return Rt(Ht.definitions,n,r)||Rt(He.styles,n,r)}var Kt,Ht=new qt,Gt=!1,Qt={transform:function(e){return Ot(e)}},Yt=(Kt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?vt:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,u=void 0===o?null:o,s=t.maskId,c=void 0===s?null:s,l=t.title,f=void 0===l?null:l,h=t.titleId,d=void 0===h?null:h,p=t.classes,v=void 0===p?[]:p,y=t.attributes,m=void 0===y?{}:y,g=t.styles,k=void 0===g?{}:g;if(e){var w=e.prefix,b=e.iconName,_=e.icon;return Bt(Ie({type:"icon"},e),(function(){return zt(),We.autoA11y&&(f?m["aria-labelledby"]="".concat(We.replacementClass,"-title-").concat(d||mt()):(m["aria-hidden"]="true",m.focusable="false")),Tt({icons:{main:Vt(_),mask:u?Vt(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:b,transform:Ie({},vt,r),symbol:a,title:f,maskId:c,titleId:d,extra:{attributes:m,styles:k,classes:v}})}))}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e||{}).icon?e:Wt(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:Wt(r||{})),Kt(n,Ie({},t,{mask:r}))});function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tn(e){return function(e){if(Array.isArray(e))return nn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return nn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rn(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var an=["style"];function on(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=rn(t.slice(0,r)),a=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=a:e[i]=a,e}),{})}var un=!1;try{un=!0}catch(ZM){}function sn(e){return e&&"object"===Jt(e)&&e.prefix&&e.iconName&&e.icon?e:Qt.icon?Qt.icon(e):null===e?null:e&&"object"===Jt(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function cn(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Zt({},e,t):{}}var ln=["forwardedRef"];function fn(e){var t=e.forwardedRef,n=en(e,ln),r=n.icon,i=n.mask,a=n.symbol,o=n.className,u=n.title,s=n.titleId,c=n.maskId,l=sn(r),f=cn("classes",[].concat(tn(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,a=e.bounce,o=e.shake,u=e.flash,s=e.spin,c=e.spinPulse,l=e.spinReverse,f=e.pulse,h=e.fixedWidth,d=e.inverse,p=e.border,v=e.listItem,y=e.flip,m=e.size,g=e.rotation,k=e.pull,w=(Zt(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":u,"fa-spin":s,"fa-spin-reverse":l,"fa-spin-pulse":c,"fa-pulse":f,"fa-fw":h,"fa-inverse":d,"fa-border":p,"fa-li":v,"fa-flip-horizontal":"horizontal"===y||"both"===y,"fa-flip-vertical":"vertical"===y||"both"===y},"fa-".concat(m),"undefined"!==typeof m&&null!==m),Zt(t,"fa-rotate-".concat(g),"undefined"!==typeof g&&null!==g&&0!==g),Zt(t,"fa-pull-".concat(k),"undefined"!==typeof k&&null!==k),Zt(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(w).map((function(e){return w[e]?e:null})).filter((function(e){return e}))}(n)),tn(o.split(" ")))),h=cn("transform","string"===typeof n.transform?Qt.transform(n.transform):n.transform),d=cn("mask",sn(i)),p=Yt(l,$t($t($t($t({},f),h),d),{},{symbol:a,title:u,titleId:s,maskId:c}));if(!p)return function(){var e;!un&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",l),null;var v=p.abstract,y={ref:t};return Object.keys(n).forEach((function(e){fn.defaultProps.hasOwnProperty(e)||(y[e]=n[e])})),hn(v[0],y)}fn.displayName="FontAwesomeIcon",fn.propTypes={beat:V().bool,border:V().bool,bounce:V().bool,className:V().string,fade:V().bool,flash:V().bool,mask:V().oneOfType([V().object,V().array,V().string]),maskId:V().string,fixedWidth:V().bool,inverse:V().bool,flip:V().oneOf(["horizontal","vertical","both"]),icon:V().oneOfType([V().object,V().array,V().string]),listItem:V().bool,pull:V().oneOf(["right","left"]),pulse:V().bool,rotation:V().oneOf([0,90,180,270]),shake:V().bool,size:V().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:V().bool,spinPulse:V().bool,spinReverse:V().bool,symbol:V().oneOfType([V().bool,V().string]),title:V().string,titleId:V().string,transform:V().oneOfType([V().string,V().object]),swapOpacity:V().bool},fn.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var hn=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=on(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[rn(t)]=r}return e}),{attrs:{}}),o=r.style,u=void 0===o?{}:o,s=en(r,an);return a.attrs.style=$t($t({},a.attrs.style),u),t.apply(void 0,[n.tag,$t($t({},a.attrs),s)].concat(tn(i)))}.bind(null,t.createElement),dn={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},pn={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]};function vn(e){return vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vn(e)}function yn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vn(e)););return e}function mn(){return mn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=yn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},mn.apply(this,arguments)}function gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function wn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ZM){return!1}}function bn(e){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(e)}function _n(e,t){if(t&&("object"===bn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return gn(e)}function xn(e){var t=wn();return function(){var n,r=vn(e);if(t){var i=vn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _n(this,n)}}function Tn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function In(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function En(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sn(e,t,n){return t&&En(e.prototype,t),n&&En(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cn(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Nn(e){return function(e){if(Array.isArray(e))return a(e)}(e)||Cn(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rn(e,t,n){return Rn=wn()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i},Rn.apply(null,arguments)}function Pn(e){var t="function"===typeof Map?new Map:void 0;return Pn=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Rn(e,arguments,vn(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),c(n,e)},Pn(e)}var On=!1,Dn=!1,Mn="${JSCORE_VERSION}",Ln=function(e,t){if(!e)throw Fn(t)},Fn=function(e){return new Error("Firebase Database ("+Mn+") INTERNAL ASSERT FAILED: "+e)},Un=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Vn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Un(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},jn=function(e){var t=Un(e);return Vn.encodeByteArray(t,!0)},qn=function(e){return jn(e).replace(/\./g,"")},zn=function(e){try{return Vn.decodeString(e,!0)}catch(ZM){console.error("base64Decode failed: ",ZM)}return null};function Bn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&Wn(n)&&(e[n]=Bn(e[n],t[n]));return e}function Wn(e){return"__proto__"!==e}var Kn=function(){function e(){var t=this;In(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Sn(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Hn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qn(JSON.stringify({alg:"none",type:"JWT"})),qn(JSON.stringify(a)),""].join(".")}function Gn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Qn(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function Yn(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(ZM){return!1}}function Xn(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function $n(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Jn(){var e=Gn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Zn(){return!0===On||!0===Dn}function er(){return"object"===typeof indexedDB}var tr=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a;return In(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(gn(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(gn(a),nr.prototype.create),a}return Sn(n)}(Pn(Error)),nr=function(){function e(t,n,r){In(this,e),this.service=t,this.serviceName=n,this.errors=r}return Sn(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?rr(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new tr(n,a,t);return o}}]),e}();function rr(e,t){return e.replace(ir,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var ir=/\{\$([^}]+)}/g;function ar(e){return JSON.parse(e)}function or(e){return JSON.stringify(e)}var ur=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ar(zn(a[0])||""),n=ar(zn(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(ZM){}return{header:t,claims:n,data:r,signature:i}};function sr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function cr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function lr(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function fr(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function hr(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(dr(u)&&dr(s)){if(!hr(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function dr(e){return null!==e&&"object"===typeof e}function pr(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function vr(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function yr(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var mr=function(){function e(){In(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return Sn(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function gr(e,t){var n=new kr(e,t);return n.subscribe.bind(n)}var kr=function(){function e(t,n){var r=this;In(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Sn(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Tn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=wr),void 0===r.error&&(r.error=wr),void 0===r.complete&&(r.complete=wr);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(ZM){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(ZM){"undefined"!==typeof console&&console.error&&console.error(ZM)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function wr(){}function br(e,t){return"".concat(e," failed: ").concat(t," argument ")}var _r=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function xr(e){return e&&e._delegate?e._delegate:e}var Tr=function(){function e(t,n,r){In(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Sn(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ir="[DEFAULT]",Er=function(){function e(t,n){In(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Sn(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Kn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(ZM){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(ZM){if(r)return null;throw ZM}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ir})}catch(ZM){}var t,n=Tn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(ZM){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ke(we.mark((function e(){var t;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Nn(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Nn(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Tn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Tn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(yA){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ir?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(yA){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir;return this.component?this.component.multipleInstances?e:Ir:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Sr,Cr,Nr=function(){function e(t){In(this,e),this.name=t,this.providers=new Map}return Sn(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Er(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ar=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Cr||(Cr={}));var Rr={debug:Cr.DEBUG,verbose:Cr.VERBOSE,info:Cr.INFO,warn:Cr.WARN,error:Cr.ERROR,silent:Cr.SILENT},Pr=Cr.INFO,Or=(An(Sr={},Cr.DEBUG,"log"),An(Sr,Cr.VERBOSE,"log"),An(Sr,Cr.INFO,"info"),An(Sr,Cr.WARN,"warn"),An(Sr,Cr.ERROR,"error"),Sr),Dr=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Or[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Mr=function(){function e(t){In(this,e),this.name=t,this._logLevel=Pr,this._logHandler=Dr,this._userLogHandler=null,Ar.push(this)}return Sn(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Cr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Rr[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Cr.DEBUG].concat(t)),this._logHandler.apply(this,[this,Cr.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Cr.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Cr.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Cr.INFO].concat(t)),this._logHandler.apply(this,[this,Cr.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Cr.WARN].concat(t)),this._logHandler.apply(this,[this,Cr.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Cr.ERROR].concat(t)),this._logHandler.apply(this,[this,Cr.ERROR].concat(t))}}]),e}();function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(n),!0).forEach((function(t){An(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ur,Vr;var jr=new WeakMap,qr=new WeakMap,zr=new WeakMap,Br=new WeakMap,Wr=new WeakMap;var Kr={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return qr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||zr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qr(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Hr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Vr||(Vr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Yr(this),n),Qr(jr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qr(e.apply(Yr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Yr(this),t].concat(r));return zr.set(a,t.sort?t.sort():[t]),Qr(a)}}function Gr(e){return"function"===typeof e?Hr(e):(e instanceof IDBTransaction&&function(e){if(!qr.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));qr.set(e,t)}}(e),t=e,(Ur||(Ur=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Kr):e);var t}function Qr(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Qr(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&jr.set(t,e)})).catch((function(){})),Wr.set(t,e),t}(e);if(Br.has(e))return Br.get(e);var t=Gr(e);return t!==e&&(Br.set(e,t),Wr.set(t,e)),t}var Yr=function(e){return Wr.get(e)};var Xr,$r,Jr=["get","getKey","getAll","getAllKeys","count"],Zr=["put","add","delete","clear"],ei=new Map;function ti(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(ei.get(t))return ei.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Zr.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Jr.includes(n))){var a=function(){var e=ke(we.mark((function e(t){var a,o,u,s,c,l,f=arguments;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return ei.set(t,a),a}}}Kr=function(e){return Fr(Fr({},e),{},{get:function(t,n,r){return ti(t,n)||e.get(t,n,r)},has:function(t,n){return!!ti(t,n)||e.has(t,n)}})}(Kr);var ni=function(){function e(t){In(this,e),this.container=t}return Sn(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ri="@firebase/app",ii="0.7.24",ai=new Mr("@firebase/app"),oi="[DEFAULT]",ui=(An(Xr={},ri,"fire-core"),An(Xr,"@firebase/app-compat","fire-core-compat"),An(Xr,"@firebase/analytics","fire-analytics"),An(Xr,"@firebase/analytics-compat","fire-analytics-compat"),An(Xr,"@firebase/app-check","fire-app-check"),An(Xr,"@firebase/app-check-compat","fire-app-check-compat"),An(Xr,"@firebase/auth","fire-auth"),An(Xr,"@firebase/auth-compat","fire-auth-compat"),An(Xr,"@firebase/database","fire-rtdb"),An(Xr,"@firebase/database-compat","fire-rtdb-compat"),An(Xr,"@firebase/functions","fire-fn"),An(Xr,"@firebase/functions-compat","fire-fn-compat"),An(Xr,"@firebase/installations","fire-iid"),An(Xr,"@firebase/installations-compat","fire-iid-compat"),An(Xr,"@firebase/messaging","fire-fcm"),An(Xr,"@firebase/messaging-compat","fire-fcm-compat"),An(Xr,"@firebase/performance","fire-perf"),An(Xr,"@firebase/performance-compat","fire-perf-compat"),An(Xr,"@firebase/remote-config","fire-rc"),An(Xr,"@firebase/remote-config-compat","fire-rc-compat"),An(Xr,"@firebase/storage","fire-gcs"),An(Xr,"@firebase/storage-compat","fire-gcs-compat"),An(Xr,"@firebase/firestore","fire-fst"),An(Xr,"@firebase/firestore-compat","fire-fst-compat"),An(Xr,"fire-js","fire-js"),An(Xr,"firebase","fire-js-all"),Xr),si=new Map,ci=new Map;function li(e,t){try{e.container.addComponent(t)}catch(ZM){ai.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),ZM)}}function fi(e,t){e.container.addOrOverwriteComponent(t)}function hi(e){var t=e.name;if(ci.has(t))return ai.debug("There were multiple attempts to register component ".concat(t,".")),!1;ci.set(t,e);var n,r=Tn(si.values());try{for(r.s();!(n=r.n()).done;){li(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function di(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function pi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oi;di(e,t).clearInstance(n)}function vi(){ci.clear()}var yi=(An($r={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),An($r,"bad-app-name","Illegal App name: '{$appName}"),An($r,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),An($r,"app-deleted","Firebase App named '{$appName}' already deleted"),An($r,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),An($r,"invalid-log-argument","First argument to `onLog` must be null or a function."),An($r,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),An($r,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),An($r,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),An($r,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),$r),mi=new nr("app","Firebase",yi),gi=function(){function e(t,n,r){var i=this;In(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tr("app",(function(){return i}),"PUBLIC"))}return Sn(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}]),e}(),ki="9.8.1";function wi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:oi,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw mi.create("bad-app-name",{appName:String(i)});var a=si.get(i);if(a){if(hr(e,a.options)&&hr(r,a.config))return a;throw mi.create("duplicate-app",{appName:i})}var o,u=new Nr(i),s=Tn(ci.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new gi(e,r,u);return si.set(i,l),l}function bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oi,t=si.get(e);if(!t)throw mi.create("no-app",{appName:e});return t}function _i(){return Array.from(si.values())}function xi(e){return Ti.apply(this,arguments)}function Ti(){return(Ti=ke(we.mark((function e(t){var n;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!si.has(n)){e.next=6;break}return si.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(e,t,n){var r,i=null!==(r=ui[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ai.warn(u.join(" "))}hi(new Tr("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ei(e,t){if(null!==e&&"function"!==typeof e)throw mi.create("invalid-log-argument");!function(e,t){var n,r=Tn(Ar);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Rr[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Cr[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Si(e){var t;t=e,Ar.forEach((function(e){e.setLogLevel(t)}))}var Ci="firebase-heartbeat-store",Ni=null;function Ai(){return Ni||(Ni=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Qr(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Qr(u.result),e.oldVersion,e.newVersion,Qr(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Ci)}}).catch((function(e){throw mi.create("storage-open",{originalErrorMessage:e.message})}))),Ni}function Ri(e){return Pi.apply(this,arguments)}function Pi(){return Pi=ke(we.mark((function e(t){var n;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ai();case 3:return n=e.sent,e.abrupt("return",n.transaction(Ci).objectStore(Ci).get(Mi(t)));case 7:throw e.prev=7,e.t0=e.catch(0),mi.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Pi.apply(this,arguments)}function Oi(e,t){return Di.apply(this,arguments)}function Di(){return Di=ke(we.mark((function e(t,n){var r,i,a;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ai();case 3:return r=e.sent,i=r.transaction(Ci,"readwrite"),a=i.objectStore(Ci),e.next=8,a.put(n,Mi(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),mi.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Di.apply(this,arguments)}function Mi(e){return"".concat(e.name,"!").concat(e.options.appId)}var Li=function(){function e(t){var n=this;In(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ji(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Sn(e,[{key:"triggerHeartbeat",value:function(){var e=ke(we.mark((function e(){var t,n,r;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Fi(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ke(we.mark((function e(){var t,n,r,i,a;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Fi(),n=Ui(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=qn(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Fi(){return(new Date).toISOString().substring(0,10)}function Ui(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Tn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),qi(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),qi(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Vi,ji=function(){function e(t){In(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Sn(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ke(we.mark((function e(){return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(er()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Mh){t(Mh)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ke(we.mark((function e(){var t;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ri(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ke(we.mark((function e(t){var n,r;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Oi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ke(we.mark((function e(t){var n,r;return we.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Oi(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Nn(r.heartbeats),Nn(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function qi(e){return qn(JSON.stringify({version:2,heartbeats:e})).length}Vi="",hi(new Tr("platform-logger",(function(e){return new ni(e)}),"PRIVATE")),hi(new Tr("heartbeat",(function(e){return new Li(e)}),"PRIVATE")),Ii(ri,ii,Vi),Ii(ri,ii,"esm2017"),Ii("fire-js","");function zi(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Bi;Object.create;var Wi="facebook.com",Ki="github.com",Hi="google.com",Gi="password",Qi="twitter.com",Yi="EMAIL_SIGNIN",Xi="PASSWORD_RESET",$i="RECOVER_EMAIL",Ji="REVERT_SECOND_FACTOR_ADDITION",Zi="VERIFY_AND_CHANGE_EMAIL",ea="VERIFY_EMAIL";function ta(){return An({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var na=function(){var e;return An(e={},"admin-restricted-operation","This operation is restricted to administrators only."),An(e,"argument-error",""),An(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),An(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),An(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),An(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),An(e,"cordova-not-ready","Cordova framework is not ready."),An(e,"cors-unsupported","This browser is not supported."),An(e,"credential-already-in-use","This credential is already associated with a different user account."),An(e,"custom-token-mismatch","The custom token corresponds to a different audience."),An(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),An(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),An(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),An(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),An(e,"email-already-in-use","The email address is already in use by another account."),An(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),An(e,"expired-action-code","The action code has expired."),An(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),An(e,"internal-error","An internal AuthError has occurred."),An(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),An(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),An(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),An(e,"invalid-auth-event","An internal AuthError has occurred."),An(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),An(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),An(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),An(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),An(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),An(e,"invalid-email","The email address is badly formatted."),An(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),An(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),An(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),An(e,"invalid-credential","The supplied auth credential is malformed or has expired."),An(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),An(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),An(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),An(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),An(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),An(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),An(e,"wrong-password","The password is invalid or the user does not have a password."),An(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),An(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),An(e,"invalid-provider-id","The specified provider ID is invalid."),An(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),An(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),An(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),An(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),An(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),An(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),An(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),An(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),An(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),An(e,"missing-continue-uri","A continue URL must be provided in the request."),An(e,"missing-iframe-start","An internal AuthError has occurred."),An(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),An(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),An(e,"missing-multi-factor-info","No second factor identifier is provided."),An(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),An(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),An(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),An(e,"app-deleted","This instance of FirebaseApp has been deleted."),An(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),An(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),An(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),An(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),An(e,"no-auth-event","An internal AuthError has occurred."),An(e,"no-such-provider","User was not linked to an account with the given provider."),An(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),An(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),An(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),An(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),An(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),An(e,"provider-already-linked","User can only be linked to one identity for the given provider."),An(e,"quota-exceeded","The project's quota for this operation has been exceeded."),An(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),An(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),An(e,"rejected-credential","The request contains malformed or mismatching credentials."),An(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),An(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),An(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),An(e,"timeout","The operation has timed out."),An(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),An(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),An(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),An(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),An(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),An(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),An(e,"unverified-email","The operation requires a verified email."),An(e,"user-cancelled","The user did not grant your application the permissions it requested."),An(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),An(e,"user-disabled","The user account has been disabled by an administrator."),An(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),An(e,"user-signed-out",""),An(e,"weak-password","The password must be 6 characters long or more."),An(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),An(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},ra=ta,ia=new nr("auth","Firebase",ta()),aa=new Mr("@firebase/auth");function oa(e){if(aa.logLevel<=Cr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];aa.error.apply(aa,["Auth (".concat(ki,"): ").concat(e)].concat(n))}}function ua(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw fa.apply(void 0,[e].concat(n))}function sa(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fa.apply(void 0,[e].concat(n))}function ca(e,t,n){var r=Object.assign(Object.assign({},ra()),An({},t,n));return new nr("auth","Firebase",r).create(t,{appName:e.name})}function la(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ua(e,"argument-error"),ca(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function fa(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Nn(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Nn(o)))}return ia.create.apply(ia,[e].concat(n))}function ha(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw fa.apply(void 0,[t].concat(r))}}function da(e){var t="INTERNAL ASSERTION FAILED: "+e;throw oa(t),new Error(t)}function pa(e,t){e||da(t)}var va=new Map;function ya(e){pa(e instanceof Function,"Expected a class definition");var t=va.get(e);return t?(pa(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,va.set(e,t),t)}function ma(e,t){var n=di(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(hr(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;ua(r,"already-initialized")}return n.initialize({options:t})}function ga(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ka(){return"http:"===wa()||"https:"===wa()}function wa(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var ba=function(){function e(t,n){In(this,e),this.shortDelay=t,this.longDelay=n,pa(n>t,"Short delay should be less than long delay!"),this.isMobile=Qn()||$n()}return Sn(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ka()||Xn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function _a(e,t){pa(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var xa=function(){function e(){In(this,e)}return Sn(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void da("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void da("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void da("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ta=(An(Bi={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),An(Bi,"MISSING_CUSTOM_TOKEN","internal-error"),An(Bi,"INVALID_IDENTIFIER","invalid-email"),An(Bi,"MISSING_CONTINUE_URI","internal-error"),An(Bi,"INVALID_PASSWORD","wrong-password"),An(Bi,"MISSING_PASSWORD","internal-error"),An(Bi,"EMAIL_EXISTS","email-already-in-use"),An(Bi,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),An(Bi,"INVALID_IDP_RESPONSE","invalid-credential"),An(Bi,"INVALID_PENDING_TOKEN","invalid-credential"),An(Bi,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),An(Bi,"MISSING_REQ_TYPE","internal-error"),An(Bi,"EMAIL_NOT_FOUND","user-not-found"),An(Bi,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),An(Bi,"EXPIRED_OOB_CODE","expired-action-code"),An(Bi,"INVALID_OOB_CODE","invalid-action-code"),An(Bi,"MISSING_OOB_CODE","internal-error"),An(Bi,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),An(Bi,"INVALID_ID_TOKEN","invalid-user-token"),An(Bi,"TOKEN_EXPIRED","user-token-expired"),An(Bi,"USER_NOT_FOUND","user-token-expired"),An(Bi,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),An(Bi,"INVALID_CODE","invalid-verification-code"),An(Bi,"INVALID_SESSION_INFO","invalid-verification-id"),An(Bi,"INVALID_TEMPORARY_PROOF","invalid-credential"),An(Bi,"MISSING_SESSION_INFO","missing-verification-id"),An(Bi,"SESSION_EXPIRED","code-expired"),An(Bi,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),An(Bi,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),An(Bi,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),An(Bi,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),An(Bi,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),An(Bi,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),An(Bi,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),An(Bi,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),An(Bi,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),An(Bi,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),An(Bi,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Bi),Ia=new ba(3e4,6e4);function Ea(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Sa(e,t,n,r){return Ca.apply(this,arguments)}function Ca(){return Ca=ke(be().mark((function e(t,n,r,i){var a,o=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Na(t,a,ke(be().mark((function e(){var a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=pr(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",xa.fetch()(Oa(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ca.apply(this,arguments)}function Na(e,t,n){return Aa.apply(this,arguments)}function Aa(){return Aa=ke(be().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ta),n),e.prev=2,a=new Da(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Ma(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Ma(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw Ma(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw ca(t,p,d);case 30:ua(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof tr)){e.next=37;break}throw e.t0;case 37:ua(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),Aa.apply(this,arguments)}function Ra(e,t,n,r){return Pa.apply(this,arguments)}function Pa(){return Pa=ke(be().mark((function e(t,n,r,i){var a,o,u=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Sa(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ua(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Oa(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?_a(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Da=function(){function e(t){var n=this;In(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(sa(n.auth,"network-request-failed"))}),Ia.get())}))}return Sn(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Ma(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=sa(e,t,r);return i.customData._tokenResponse=n,i}function La(e,t){return Fa.apply(this,arguments)}function Fa(){return Fa=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(e,t){return Va.apply(this,arguments)}function Va(){return Va=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Va.apply(this,arguments)}function ja(e,t){return qa.apply(this,arguments)}function qa(){return qa=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function za(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(ZM){}}function Ba(){return Ba=ke(be().mark((function e(t){var n,r,i,a,o,u,s=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=xr(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ha((a=Ka(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:za(Wa(a.auth_time)),issuedAtTime:za(Wa(a.iat)),expirationTime:za(Wa(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function Wa(e){return 1e3*Number(e)}function Ka(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return oa("JWT malformed, contained fewer than 3 sections"),null;try{var a=zn(r);return a?JSON.parse(a):(oa("Failed to decode base64 JWT payload"),null)}catch(ZM){return oa("Caught error parsing JWT payload as JSON",ZM),null}}function Ha(e,t){return Ga.apply(this,arguments)}function Ga(){return Ga=ke(be().mark((function e(t,n){var r=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof tr&&Qa(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ga.apply(this,arguments)}function Qa(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ya=function(){function e(t){In(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Sn(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Xa=function(){function e(t,n){In(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Sn(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=za(this.lastLoginAt),this.creationTime=za(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function $a(e){return Ja.apply(this,arguments)}function Ja(){return Ja=ke(be().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ha(t,ja(r,{idToken:i}));case 6:ha(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?to(o.providerUserInfo):[],s=eo(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Xa(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}function Za(){return(Za=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xr(t),e.next=3,$a(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eo(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Nn(n),Nn(t))}function to(e){return e.map((function(e){var t=e.providerId,n=zi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function no(e,t){return ro.apply(this,arguments)}function ro(){return ro=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na(t,{},ke(be().mark((function e(){var r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pr({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Oa(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",xa.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),ro.apply(this,arguments)}var io=function(){function e(){In(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Sn(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ha(e.idToken,"internal-error"),ha("undefined"!==typeof e.idToken,"internal-error"),ha("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Ka(e);return ha(t,"internal-error"),ha("undefined"!==typeof t.exp,"internal-error"),ha("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ke(be().mark((function e(t){var n,r=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ha(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,no(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return da("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ha("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ha("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ha("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function ao(e,t){ha("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var oo=function(){function e(t){In(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=zi(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ya(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Nn(a.providerData):[],this.metadata=new Xa(a.createdAt||void 0,a.lastLoginAt||void 0)}return Sn(e,[{key:"getIdToken",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ha(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ha(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ba.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Za.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ha(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){ha(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ke(be().mark((function e(t){var n,r,i=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,$a(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ha(this,La(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;ha(k&&x,t,"internal-error");var T=io.fromJSON(this.name,x);ha("string"===typeof k,t,"internal-error"),ao(f,t.name),ao(h,t.name),ha("boolean"===typeof w,t,"internal-error"),ha("boolean"===typeof b,t,"internal-error"),ao(d,t.name),ao(p,t.name),ao(v,t.name),ao(y,t.name),ao(m,t.name),ao(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:T,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=ke(be().mark((function t(n,r){var i,a,o,u=arguments;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new io).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,$a(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),uo=function(){function e(){In(this,e),this.type="NONE",this.storage={}}return Sn(e,[{key:"_isAvailable",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();uo.type="NONE";var so=uo;function co(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var lo=function(){function e(t,n,r){In(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=co(this.userKey,a.apiKey,o),this.fullPersistenceKey=co("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Sn(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?oo._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ke(be().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ya(so),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ya(so),u=co(i,n.config.apiKey,n.name),s=null,c=Tn(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=oo._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function fo(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(yo(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ho(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(go(t))return"Blackberry";if(ko(t))return"Webos";if(po(t))return"Safari";if((t.includes("chrome/")||vo(t))&&!t.includes("edge/"))return"Chrome";if(mo(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ho(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/firefox\//i.test(e)}function po(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function vo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/crios\//i.test(e)}function yo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/iemobile/i.test(e)}function mo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/android/i.test(e)}function go(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/blackberry/i.test(e)}function ko(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/webos/i.test(e)}function wo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/iphone|ipad|ipod/i.test(e)}function bo(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return wo(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function _o(){return Jn()&&10===document.documentMode}function xo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return wo(e)||mo(e)||ko(e)||go(e)||/windows phone/i.test(e)||yo(e)}function To(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=fo(Gn());break;case"Worker":t="".concat(fo(Gn()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ki,"/").concat(r)}var Io=function(){function e(t){In(this,e),this.auth=t,this.queue=[]}return Sn(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(ZM){r(ZM)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ke(be().mark((function e(t){var n,r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Tn(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Tn(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Eo=function(){function e(t,n,r){In(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Co(this),this.idTokenSubscription=new Co(this),this.beforeStateQueue=new Io(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ia,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Sn(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ya(t)),this._initializationPromise=this.queue(ke(be().mark((function r(){var i,a;return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,lo.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ke(be().mark((function e(t){var n,r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return ha(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$a(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?xr(t):null)&&ha(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ke(be().mark((function e(t){var n,r=this,i=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&ha(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ya(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new nr("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ha(n=t&&ya(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,lo.create(this,[ya(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ke(be().mark((function e(t){var n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ha(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ha(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=To(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ke(be().mark((function e(){var t,n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=An({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function So(e){return xr(e)}var Co=function(){function e(t){var n=this;In(this,e),this.auth=t,this.observer=null,this.addObserver=gr((function(e){return n.observer=e}))}return Sn(e,[{key:"next",get:function(){return ha(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function No(e,t,n){var r=So(e);ha(r._canInitEmulator,r,"emulator-config-failed"),ha(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Ao(t),o=function(e){var t=Ao(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ro(r.substr(a.length+1))}}var o=s(r.split(":"),2);return{host:o[0],port:Ro(o[1])}}(t),u=o.host,c=o.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ao(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ro(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Po=function(){function e(t,n){In(this,e),this.providerId=t,this.signInMethod=n}return Sn(e,[{key:"toJSON",value:function(){return da("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return da("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return da("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return da("not implemented")}}]),e}();function Oo(e,t){return Do.apply(this,arguments)}function Do(){return Do=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:resetPassword",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Mo(e,t){return Lo.apply(this,arguments)}function Lo(){return Lo=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function Fo(e,t){return Uo.apply(this,arguments)}function Uo(){return Uo=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:update",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}function Vo(e,t){return jo.apply(this,arguments)}function jo(){return jo=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,"POST","/v1/accounts:signInWithPassword",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function qo(e,t){return zo.apply(this,arguments)}function zo(){return zo=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:sendOobCode",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Bo(e,t){return Wo.apply(this,arguments)}function Wo(){return Wo=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qo(t,n));case 1:case"end":return e.stop()}}),e)}))),Wo.apply(this,arguments)}function Ko(e,t){return Ho.apply(this,arguments)}function Ho(){return Ho=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qo(t,n));case 1:case"end":return e.stop()}}),e)}))),Ho.apply(this,arguments)}function Go(e,t){return Qo.apply(this,arguments)}function Qo(){return Qo=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qo(t,n));case 1:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}function Yo(e,t){return Xo.apply(this,arguments)}function Xo(){return Xo=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qo(t,n));case 1:case"end":return e.stop()}}),e)}))),Xo.apply(this,arguments)}function $o(e,t){return Jo.apply(this,arguments)}function Jo(){return Jo=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,"POST","/v1/accounts:signInWithEmailLink",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jo.apply(this,arguments)}function Zo(e,t){return eu.apply(this,arguments)}function eu(){return eu=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,"POST","/v1/accounts:signInWithEmailLink",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}var tu=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return In(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Sn(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Vo(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",$o(t,{email:this._email,oobCode:this._password}));case 5:ua(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Mo(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Zo(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ua(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Po);function nu(e,t){return ru.apply(this,arguments)}function ru(){return ru=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,"POST","/v1/accounts:signInWithIdp",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),ru.apply(this,arguments)}var iu=function(e){kn(n,e);var t=xn(n);function n(){var e;return In(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Sn(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return nu(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,nu(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,nu(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pr(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ua("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=zi(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Po);function au(e,t){return ou.apply(this,arguments)}function ou(){return ou=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:sendVerificationCode",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function uu(){return uu=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,"POST","/v1/accounts:signInWithPhoneNumber",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}function su(){return su=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ra(t,"POST","/v1/accounts:signInWithPhoneNumber",Ea(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Ma(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),su.apply(this,arguments)}var cu=An({},"USER_NOT_FOUND","user-not-found");function lu(){return lu=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ra(t,"POST","/v1/accounts:signInWithPhoneNumber",Ea(t,r),cu));case 2:case"end":return e.stop()}}),e)}))),lu.apply(this,arguments)}var fu=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Sn(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return uu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return su.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return lu.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Po);var hu=function(){function e(t){var n,r,i,a,o,u;In(this,e);var s=vr(yr(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ha(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Sn(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=vr(yr(e)).link,n=t?vr(yr(t)).deep_link_id:null,r=vr(yr(e)).deep_link_id;return(r?vr(yr(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(yA){return null}}}]),e}();var du=function(){function e(){In(this,e),this.providerId=e.PROVIDER_ID}return Sn(e,null,[{key:"credential",value:function(e,t){return tu._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=hu.parseLink(t);return ha(n,"argument-error"),tu._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();du.PROVIDER_ID="password",du.EMAIL_PASSWORD_SIGN_IN_METHOD="password",du.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var pu=function(){function e(t){In(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Sn(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),vu=function(e){kn(n,e);var t=xn(n);function n(){var e;return In(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Sn(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Nn(this.scopes)}}]),n}(pu),yu=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return ha(e.idToken||e.accessToken,"argument-error"),iu._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return ha("providerId"in t&&"signInMethod"in t,"argument-error"),iu._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(ZM){return null}}}]),n}(vu),mu=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.call(this,"facebook.com")}return Sn(n,null,[{key:"credential",value:function(e){return iu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(yA){return null}}}]),n}(vu);mu.FACEBOOK_SIGN_IN_METHOD="facebook.com",mu.PROVIDER_ID="facebook.com";var gu=function(e){kn(n,e);var t=xn(n);function n(){var e;return In(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Sn(n,null,[{key:"credential",value:function(e,t){return iu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(yA){return null}}}]),n}(vu);gu.GOOGLE_SIGN_IN_METHOD="google.com",gu.PROVIDER_ID="google.com";var ku=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.call(this,"github.com")}return Sn(n,null,[{key:"credential",value:function(e){return iu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(yA){return null}}}]),n}(vu);ku.GITHUB_SIGN_IN_METHOD="github.com",ku.PROVIDER_ID="github.com";var wu=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Sn(n,[{key:"_getIdTokenResponse",value:function(e){return nu(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,nu(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,nu(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Po),bu=function(e){kn(n,e);var t=xn(n);function n(e){return In(this,n),ha(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Sn(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=wu.fromJSON(e);return ha(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return wu._create(r,n)}catch(ZM){return null}}}]),n}(pu),_u=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.call(this,"twitter.com")}return Sn(n,null,[{key:"credential",value:function(e,t){return iu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(yA){return null}}}]),n}(vu);function xu(e,t){return Tu.apply(this,arguments)}function Tu(){return Tu=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,"POST","/v1/accounts:signUp",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tu.apply(this,arguments)}_u.TWITTER_SIGN_IN_METHOD="twitter.com",_u.PROVIDER_ID="twitter.com";var Iu=function(){function e(t){In(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Sn(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ke(be().mark((function t(n,r,i){var a,o,u,s,c=arguments;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,oo._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Eu(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ke(be().mark((function t(n,r,i){var a;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Eu(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Eu(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Su(){return Su=ke(be().mark((function e(t){var n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=So(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Iu({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,xu(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Iu._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Su.apply(this,arguments)}var Cu=function(e){kn(n,e);var t=xn(n);function n(e,r,i,a){var o,u;return In(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(gn(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Sn(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(tr);function Nu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Cu._fromErrorAndOperation(e,n,t,r);throw n}))}function Au(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Ru(e,t){return Pu.apply(this,arguments)}function Pu(){return Pu=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xr(t),e.next=3,Mu(!0,r,n);case 3:return e.t0=Ua,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Au(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Pu.apply(this,arguments)}function Ou(e,t){return Du.apply(this,arguments)}function Du(){return Du=ke(be().mark((function e(t,n){var r,i,a=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ha,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Iu._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Mu(e,t,n){return Lu.apply(this,arguments)}function Lu(){return(Lu=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$a(n);case 2:i=Au(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",ha(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fu(e,t){return Uu.apply(this,arguments)}function Uu(){return Uu=ke(be().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Ha(t,Nu(i,a,n,t),r);case 6:return ha((o=e.sent).idToken,i,"internal-error"),ha(u=Ka(o.idToken),i,"internal-error"),s=u.sub,ha(t.uid===s,i,"user-mismatch"),e.abrupt("return",Iu._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&ua(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Uu.apply(this,arguments)}function Vu(e,t){return ju.apply(this,arguments)}function ju(){return ju=ke(be().mark((function e(t,n){var r,i,a,o,u=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Nu(t,i,n);case 4:return a=e.sent,e.next=7,Iu._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ju.apply(this,arguments)}function qu(e,t){return zu.apply(this,arguments)}function zu(){return zu=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vu(So(t),n));case 1:case"end":return e.stop()}}),e)}))),zu.apply(this,arguments)}function Bu(e,t){return Wu.apply(this,arguments)}function Wu(){return(Wu=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xr(t),e.next=3,Mu(!1,r,n.providerId);case 3:return e.abrupt("return",Ou(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(e,t){return Hu.apply(this,arguments)}function Hu(){return(Hu=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fu(xr(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gu(e,t){return Qu.apply(this,arguments)}function Qu(){return Qu=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ra(t,"POST","/v1/accounts:signInWithCustomToken",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),Qu.apply(this,arguments)}function Yu(){return Yu=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=So(t),e.next=3,Gu(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Iu._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}var Xu=function(){function e(t,n){In(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Sn(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?$u._fromServerResponse(e,t):ua(e,"internal-error")}}]),e}(),$u=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Sn(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Xu);function Ju(e,t,n){var r;ha((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ha("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ha(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ha(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Zu(){return Zu=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xr(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ju(i,a,r),e.next=5,Ko(i,a);case 5:case"end":return e.stop()}}),e)}))),Zu.apply(this,arguments)}function es(){return es=ke(be().mark((function e(t,n,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oo(xr(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(){return ts=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fo(xr(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(e,t){return rs.apply(this,arguments)}function rs(){return rs=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xr(t),e.next=3,Oo(r,{oobCode:n});case 3:i=e.sent,ha(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return ha(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:ha(i.mfaInfo,r,"internal-error");case 13:ha(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Xu._fromServerResponse(So(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),rs.apply(this,arguments)}function is(){return is=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ns(xr(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(e,t,n){return os.apply(this,arguments)}function os(){return os=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=So(t),e.next=3,xu(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Iu._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),os.apply(this,arguments)}function us(e,t,n){return qu(xr(e),du.credential(t,n))}function ss(){return ss=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xr(t),a={requestType:"EMAIL_SIGNIN",email:n},ha(r.handleCodeInApp,i,"argument-error"),r&&Ju(i,a,r),e.next=6,Go(i,a);case 6:case"end":return e.stop()}}),e)}))),ss.apply(this,arguments)}function cs(){return cs=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xr(t),ha((a=du.credentialWithLink(n,r||ga()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",qu(i,a));case 4:case"end":return e.stop()}}),e)}))),cs.apply(this,arguments)}function ls(e,t){return fs.apply(this,arguments)}function fs(){return fs=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:createAuthUri",Ea(t,n)));case 1:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}function hs(){return hs=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ka()?ga():"http://localhost",i={identifier:n,continueUri:r},e.next=4,ls(xr(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}function ds(){return(ds=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xr(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ju(r.auth,a,n),e.next=8,Bo(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ps(){return(ps=ke(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xr(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ju(i.auth,o,r),e.next=8,Yo(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(e,t){return ys.apply(this,arguments)}function ys(){return ys=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sa(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}function ms(e,t){return gs.apply(this,arguments)}function gs(){return(gs=ke(be().mark((function e(t,n){var r,i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=xr(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ha(a,vs(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ks(e,t,n){return ws.apply(this,arguments)}function ws(){return ws=ke(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ha(t,Mo(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),ws.apply(this,arguments)}var bs=Sn((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};In(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),_s=function(e){kn(n,e);var t=xn(n);function n(e,r,i,a){var o;return In(this,n),(o=t.call(this,e,r,i)).username=a,o}return Sn(n)}(bs),xs=function(e){kn(n,e);var t=xn(n);function n(e,r){return In(this,n),t.call(this,e,"facebook.com",r)}return Sn(n)}(bs),Ts=function(e){kn(n,e);var t=xn(n);function n(e,r){return In(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Sn(n)}(_s),Is=function(e){kn(n,e);var t=xn(n);function n(e,r){return In(this,n),t.call(this,e,"google.com",r)}return Sn(n)}(bs),Es=function(e){kn(n,e);var t=xn(n);function n(e,r,i){return In(this,n),t.call(this,e,"twitter.com",r,i)}return Sn(n)}(_s);function Ss(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Ka(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new bs(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new xs(a,i);case"github.com":return new Ts(a,i);case"google.com":return new Is(a,i);case"twitter.com":return new Es(a,i,e.screenName||null);case"custom":case"anonymous":return new bs(a,null);default:return new bs(a,r,i)}}(n)}var Cs=function(){function e(t,n){In(this,e),this.type=t,this.credential=n}return Sn(e,[{key:"toJSON",value:function(){return{multiFactorSession:An({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Ns=function(){function e(t,n,r){In(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Sn(e,[{key:"resolveSignIn",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=So(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Xu._fromServerResponse(r,e)}));ha(i.mfaPendingCredential,r,"internal-error");var o=Cs._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ke(be().mark((function e(t){var a,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Iu._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return ha(n.user,r,"internal-error"),e.abrupt("return",Iu._forOperation(n.user,n.operationType,u));case 17:ua(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function As(e,t){return Sa(e,"POST","/v2/accounts/mfaEnrollment:start",Ea(e,t))}function Rs(e,t){return Sa(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Ea(e,t))}var Ps=function(){function e(t){var n=this;In(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Xu._fromServerResponse(t.auth,e)})))}))}return Sn(e,[{key:"getSession",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Cs,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ha(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ke(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Ha(this.user,Rs(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Os=new WeakMap;var Ds="__sak",Ms=function(){function e(t,n){In(this,e),this.storageRetriever=t,this.type=n}return Sn(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ds,"1"),this.storage.removeItem(Ds),Promise.resolve(!0)):Promise.resolve(!1)}catch(yA){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Ls=function(e){kn(n,e);var t=xn(n);function n(){var e;return In(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Gn();return po(e)||wo(e)}()&&function(){try{return!(!window||window===window.top)}catch(ZM){return!1}}(),e.fallbackToPolling=xo(),e._shouldAllowMigration=!0,e}return Sn(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);_o()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ke(be().mark((function e(t,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn(vn(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ke(be().mark((function e(t){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn(vn(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn(vn(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ms);Ls.type="LOCAL";var Fs=Ls,Us=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Sn(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ms);Us.type="SESSION";var Vs=Us;function js(e){return Promise.all(e.map(function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var qs=function(){function e(t){In(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Sn(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ke(be().mark((function e(t){var n,r,i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,js(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function zs(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}qs.receivers=[];var Bs=function(){function e(t){In(this,e),this.target=t,this.handlers=new Set}return Sn(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ke(be().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=zs("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ws(){return window}function Ks(){return"undefined"!==typeof Ws().WorkerGlobalScope&&"function"===typeof Ws().importScripts}function Hs(){return Gs.apply(this,arguments)}function Gs(){return(Gs=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Qs(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ys="firebaseLocalStorageDb",Xs="firebaseLocalStorage",$s="fbase_key",Js=function(){function e(t){In(this,e),this.request=t}return Sn(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Zs(e,t){return e.transaction([Xs],t?"readwrite":"readonly").objectStore(Xs)}function ec(){var e=indexedDB.deleteDatabase(Ys);return new Js(e).toPromise()}function tc(){var e=indexedDB.open(Ys,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Xs,{keyPath:$s})}catch(ZM){n(ZM)}})),e.addEventListener("success",ke(be().mark((function n(){var r;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Xs)){n.next=12;break}return r.close(),n.next=5,ec();case 5:return n.t0=t,n.next=8,tc();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function nc(e,t,n){return rc.apply(this,arguments)}function rc(){return rc=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Zs(t,!0).put((An(i={},$s,n),An(i,"value",r),i)),e.abrupt("return",new Js(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}function ic(e,t){return ac.apply(this,arguments)}function ac(){return ac=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zs(t,!1).get(n),e.next=3,new Js(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),ac.apply(this,arguments)}function oc(e,t){var n=Zs(e,!0).delete(t);return new Js(n).toPromise()}var uc=function(){function e(){In(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Sn(e,[{key:"_openDb",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,tc();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ks()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ke(be().mark((function e(){var t=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=qs._getInstance(Ks()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ke(be().mark((function e(n,r){var i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ke(be().mark((function e(){var t,n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hs();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Bs(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Qs()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,tc();case 5:return t=e.sent,e.next=8,nc(t,Ds,"1");case 8:return e.next=10,oc(t,Ds);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ke(be().mark((function e(t,n){var r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return nc(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return ic(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ke(be().mark((function e(t){var n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return oc(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ke(be().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Zs(e,!1).getAll();return new Js(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Tn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();uc.type="LOCAL";var sc=uc;function cc(e,t){return Sa(e,"POST","/v2/accounts/mfaSignIn:start",Ea(e,t))}function lc(e){return fc.apply(this,arguments)}function fc(){return fc=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sa(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),fc.apply(this,arguments)}function hc(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=sa("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function dc(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var pc=1e12,vc=function(){function e(t){In(this,e),this.auth=t,this.counter=pc,this._widgets=new Map}return Sn(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new yc(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||pc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||pc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||pc,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),yc=function(){function e(t,n,r){var i=this;In(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;ha(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Sn(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(ZM){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(ZM){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var mc=dc("rcb"),gc=new ba(3e4,6e4),kc="https://www.google.com/recaptcha/api.js?",wc=function(){function e(){In(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ws().grecaptcha}return Sn(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ha(bc(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ws().grecaptcha):new Promise((function(r,i){var a=Ws().setTimeout((function(){i(sa(e,"network-request-failed"))}),gc.get());Ws()[mc]=function(){Ws().clearTimeout(a),delete Ws()[mc];var o=Ws().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(sa(e,"internal-error"))},hc("".concat(kc,"?").concat(pr({onload:mc,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(sa(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Ws().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function bc(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var _c=function(){function e(){In(this,e)}return Sn(e,[{key:"load",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new vc(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),xc="recaptcha",Tc={theme:"light",type:"image"},Ic=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Tc),r=arguments.length>2?arguments[2]:void 0;In(this,e),this.parameters=n,this.type=xc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=So(r),this.isInvisible="invisible"===this.parameters.size,ha("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;ha(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _c:new wc,this.validateStartingState()}return Sn(e,[{key:"verify",value:function(){var e=ke(be().mark((function e(){var t,n,r,i=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(ZM){return Promise.reject(ZM)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){ha(!this.parameters.sitekey,this.auth,"argument-error"),ha(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ha("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ws()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){ha(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ha(ka()&&!Ks(),this.auth,"internal-error"),e.next=3,Ec();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,lc(this.auth);case 8:ha(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return ha(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Ec(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Sc=function(){function e(t,n){In(this,e),this.verificationId=t,this.onConfirmation=n}return Sn(e,[{key:"confirm",value:function(e){var t=fu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Cc(){return Cc=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=So(t),e.next=3,Pc(i,n,xr(r));case 3:return a=e.sent,e.abrupt("return",new Sc(a,(function(e){return qu(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Cc.apply(this,arguments)}function Nc(e,t,n){return Ac.apply(this,arguments)}function Ac(){return(Ac=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xr(t),e.next=3,Mu(!1,i,"phone");case 3:return e.next=5,Pc(i.auth,n,xr(r));case 5:return a=e.sent,e.abrupt("return",new Sc(a,(function(e){return Bu(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rc(){return(Rc=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xr(t),e.next=3,Pc(i.auth,n,xr(r));case 3:return a=e.sent,e.abrupt("return",new Sc(a,(function(e){return Ku(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pc(e,t,n){return Oc.apply(this,arguments)}function Oc(){return Oc=ke(be().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ha("string"===typeof a,t,"argument-error"),ha(r.type===xc,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return ha("enroll"===u.type,t,"internal-error"),e.next=13,As(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return ha("signin"===u.type,t,"internal-error"),ha(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,cc(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,au(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Oc.apply(this,arguments)}function Dc(){return(Dc=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ou(xr(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mc=function(){function e(t){In(this,e),this.providerId=e.PROVIDER_ID,this.auth=So(t)}return Sn(e,[{key:"verifyPhoneNumber",value:function(e,t){return Pc(this.auth,e,xr(t))}}],[{key:"credential",value:function(e,t){return fu._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?fu._fromTokenResponse(n,r):null}}]),e}();function Lc(e,t){return t?ya(t):(ha(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Mc.PROVIDER_ID="phone",Mc.PHONE_SIGN_IN_METHOD="phone";var Fc=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Sn(n,[{key:"_getIdTokenResponse",value:function(e){return nu(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return nu(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return nu(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Po);function Uc(e){return Vu(e.auth,new Fc(e),e.bypassAuthState)}function Vc(e){var t=e.auth,n=e.user;return ha(n,t,"internal-error"),Fu(n,new Fc(e),e.bypassAuthState)}function jc(e){return qc.apply(this,arguments)}function qc(){return qc=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ha(r=t.user,n,"internal-error"),e.abrupt("return",Ou(r,new Fc(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),qc.apply(this,arguments)}var zc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];In(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Sn(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ke(be().mark((function t(n,r){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ke(be().mark((function e(t){var n,r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Uc;case"linkViaPopup":case"linkViaRedirect":return jc;case"reauthViaPopup":case"reauthViaRedirect":return Vc;default:ua(this.auth,"internal-error")}}},{key:"resolve",value:function(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Bc=new ba(2e3,1e4);function Wc(e,t,n){return Kc.apply(this,arguments)}function Kc(){return Kc=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=So(t),la(t,n,pu),a=Lc(i,r),o=new Yc(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Kc.apply(this,arguments)}function Hc(){return(Hc=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return la((i=xr(t)).auth,n,pu),a=Lc(i.auth,r),o=new Yc(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gc(e,t,n){return Qc.apply(this,arguments)}function Qc(){return(Qc=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return la((i=xr(t)).auth,n,pu),a=Lc(i.auth,r),o=new Yc(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yc=function(e){kn(n,e);var t=xn(n);function n(e,r,i,a,o){var u;return In(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=gn(u),u}return Sn(n,[{key:"executeNotNull",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ha(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ke(be().mark((function e(){var t,n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pa(1===this.filter.length,"Popup operations only handle one event"),t=zs(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(sa(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(sa(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(sa(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Bc.get())}()}}]),n}(zc);Yc.currentPopupAction=null;var Xc=new Map,$c=function(e){kn(n,e);var t=xn(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return In(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Sn(n,[{key:"execute",value:function(){var e=ke(be().mark((function e(){var t,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Xc.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Jc(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,mn(vn(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Xc.set(this.auth._key(),t);case 21:return this.bypassAuthState||Xc.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ke(be().mark((function e(t){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",mn(vn(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",mn(vn(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(zc);function Jc(e,t){return Zc.apply(this,arguments)}function Zc(){return Zc=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=il(n),i=rl(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Zc.apply(this,arguments)}function el(e,t){return tl.apply(this,arguments)}function tl(){return tl=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rl(t)._set(il(n),"true"));case 1:case"end":return e.stop()}}),e)}))),tl.apply(this,arguments)}function nl(e,t){Xc.set(e._key(),t)}function rl(e){return ya(e._redirectPersistence)}function il(e){return co("pendingRedirect",e.config.apiKey,e.name)}function al(e,t,n){return function(e,t,n){return ol.apply(this,arguments)}(e,t,n)}function ol(){return ol=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=So(t),la(t,n,pu),a=Lc(i,r),e.next=5,el(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),ol.apply(this,arguments)}function ul(e,t,n){return function(e,t,n){return sl.apply(this,arguments)}(e,t,n)}function sl(){return(sl=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return la((i=xr(t)).auth,n,pu),a=Lc(i.auth,r),e.next=5,el(a,i.auth);case 5:return e.next=7,vl(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cl(e,t,n){return function(e,t,n){return ll.apply(this,arguments)}(e,t,n)}function ll(){return(ll=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return la((i=xr(t)).auth,n,pu),a=Lc(i.auth,r),e.next=5,Mu(!1,i,n.providerId);case 5:return e.next=7,el(a,i.auth);case 7:return e.next=9,vl(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fl(e,t){return hl.apply(this,arguments)}function hl(){return hl=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,So(t)._initializationPromise;case 2:return e.abrupt("return",dl(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),hl.apply(this,arguments)}function dl(e,t){return pl.apply(this,arguments)}function pl(){return pl=ke(be().mark((function e(t,n){var r,i,a,o,u,s=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=So(t),a=Lc(i,n),o=new $c(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),pl.apply(this,arguments)}function vl(e){return yl.apply(this,arguments)}function yl(){return(yl=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zs("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ml=function(){function e(t){In(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Sn(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kl(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!kl(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(sa(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gl(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(gl(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function gl(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function kl(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function wl(e){return bl.apply(this,arguments)}function bl(){return bl=ke(be().mark((function e(t){var n,r=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Sa(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),bl.apply(this,arguments)}var _l=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xl=/^https?/;function Tl(){return Tl=ke(be().mark((function e(t){var n,r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wl(t);case 4:n=e.sent,r=n.authorizedDomains,i=Tn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Il(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ua(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Tl.apply(this,arguments)}function Il(e){var t=ga(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!xl.test(r))return!1;if(_l.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var El=new ba(3e4,6e4);function Sl(){var e=Ws().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Nn(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Cl=null;function Nl(e){return Cl=Cl||function(e){return new Promise((function(t,n){var r,i,a;function o(){Sl(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Sl(),n(sa(e,"network-request-failed"))},timeout:El.get()})}if(null===(i=null===(r=Ws().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ws().gapi)||void 0===a?void 0:a.load)){var u=dc("iframefcb");return Ws()[u]=function(){gapi.load?o():n(sa(e,"network-request-failed"))},hc("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Cl=null,e}))}(e),Cl}var Al=new ba(5e3,15e3),Rl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ol(e){var t=e.config;ha(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?_a(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ki},i=Pl.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(pr(r).slice(1))}function Dl(e){return Ml.apply(this,arguments)}function Ml(){return Ml=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nl(t);case 2:return n=e.sent,ha(r=Ws().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Ol(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rl,dontclear:!0},(function(e){return new Promise(function(){var n=ke(be().mark((function n(r,i){var a,o,u;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ws().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=sa(t,"network-request-failed"),o=Ws().setTimeout((function(){i(a)}),Al.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ml.apply(this,arguments)}var Ll={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Fl="_blank",Ul="http://localhost",Vl=function(){function e(t){In(this,e),this.window=t,this.associatedEvent=null}return Sn(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(ZM){}}}]),e}();function jl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},Ll),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Gn().toLowerCase();n&&(u=vo(l)?Fl:n),ho(l)&&(t=t||Ul,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(bo(l)&&"_self"!==u)return ql(t||"",u),new Vl(null);var h=window.open(t||"",u,f);ha(h,e,"popup-blocked");try{h.focus()}catch(ZM){}return new Vl(h)}function ql(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var zl="__/auth/handler",Bl="emulator/auth/handler";function Wl(e,t,n,r,i,a){ha(e.config.authDomain,e,"auth-domain-config-required"),ha(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ki,eventId:i};if(t instanceof pu){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",lr(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof vu){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(zl);return _a(t,Bl)}(e),"?").concat(pr(p).slice(1))}var Kl="webStorageSupport",Hl=function(){function e(){In(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vs,this._completeRedirectFn=dl,this._overrideRedirectResult=nl}return Sn(e,[{key:"_openPopup",value:function(){var e=ke(be().mark((function e(t,n,r,i){var a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pa(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Wl(t,n,r,ga(),i),e.abrupt("return",jl(t,o,zs()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ke(be().mark((function e(t,n,r,i){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Wl(t,n,r,ga(),i),Ws().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(pa(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dl(t);case 2:return n=e.sent,r=new ml(t),n.register("authEvent",(function(e){return ha(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Kl,{type:Kl},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),ua(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Tl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return xo()||po()||wo()}}]),e}(),Gl=Hl,Ql=function(){function e(t){In(this,e),this.factorId=t}return Sn(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return da("unexpected MultiFactorSessionType")}}}]),e}(),Yl=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this,"phone")).credential=e,r}return Sn(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Sa(e,"POST","/v2/accounts/mfaEnrollment:finalize",Ea(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Sa(e,"POST","/v2/accounts/mfaSignIn:finalize",Ea(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Ql),Xl=function(){function e(){In(this,e)}return Sn(e,null,[{key:"assertion",value:function(e){return Yl._fromCredential(e)}}]),e}();Xl.FACTOR_ID="phone";var $l,Jl="@firebase/auth",Zl="0.20.1",ef=function(){function e(t){In(this,e),this.auth=t,this.internalListeners=new Map}return Sn(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ha(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function tf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi(),t=di(e,"auth");return t.isInitialized()?t.getImmediate():ma(e,{popupRedirectResolver:Gl,persistence:[sc,Fs,Vs]})}$l="Browser",hi(new Tr("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){ha(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),ha(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:$l,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:To($l)},i=new Eo(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ya);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),hi(new Tr("auth-internal",(function(e){return function(e){return new ef(e)}(So(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(Jl,Zl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}($l)),Ii(Jl,Zl,"esm2017");var nf,rf=n(184),af=function(e){var n=e.auth,r=s((0,t.useState)(""),2),i=r[0],a=r[1],o=s((0,t.useState)(""),2),u=o[0],c=o[1],l=s((0,t.useState)(!0),2),f=l[0],h=l[1],d=s((0,t.useState)(""),2),p=d[0],v=d[1],y=function(e){var t=e.target,n=t.name,r=t.value;"email"===n?a(r):"password"===n&&c(r)},m=function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!f){e.next=7;break}return e.next=5,as(n,i,u);case 5:e.next=9;break;case 7:return e.next=9,us(n,i,u);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.message.includes("email-already-in-use")?v("\ud574\ub2f9 \uacc4\uc815\uc73c\ub85c \uac00\uc785\ud55c \uc774\ub825\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4! \ub85c\uadf8\uc778 \ud574\uc8fc\uc138\uc694"):e.t0.message.includes("account-exists-with-different-credential")?v("\ub2e4\ub978 \ubc29\uc2dd\uc73c\ub85c \uac00\uc785\ub41c \uacc4\uc815\uc785\ub2c8\ub2e4. \ud574\ub2f9 \ubc29\uc2dd\uc73c\ub85c \ub85c\uadf8\uc778 \ud574\uc8fc\uc138\uc694!"):v(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return(0,rf.jsxs)(rf.Fragment,{children:[(0,rf.jsxs)("form",{onSubmit:m,className:"container",children:[(0,rf.jsx)("input",{className:"authInput",name:"email",type:"email",placeholder:"Email",required:!0,value:i,onChange:y,style:{textAlign:"center"}}),(0,rf.jsx)("input",{className:"authInput",name:"password",type:"password",placeholder:"Password",required:!0,value:u,onChange:y,style:{textAlign:"center"}}),(0,rf.jsx)("input",{type:"submit",className:"authInput authSubmit",value:f?"\uac00\uc785\ud558\uae30":"\ub85c\uadf8\uc778"}),p&&(0,rf.jsx)("span",{className:"authError",children:p})]}),(0,rf.jsx)("span",{onClick:function(){h((function(e){return!e}))},className:"authSwitch",children:f?"\uacc4\uc815\uc73c\ub85c \ub85c\uadf8\uc778\ud558\uae30":"\uc774\uba54\uc77c\ub85c \uac00\uc785\ud558\uae30"})]})},of=function(){function e(t,n){var r=this;In(this,e),this._delegate=t,this.firebase=n,li(t,new Tr("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Sn(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),xi(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oi;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oi;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){li(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){fi(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),uf=(An(nf={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),An(nf,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),nf),sf=new nr("app-compat","Firebase",uf);var cf=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=wi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(sr(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Ii,setLogLevel:Si,onLog:Ei,apps:null,SDK_VERSION:ki,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(hi(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw sf.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Bn(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!sr(n,e=e||oi))throw sf.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(of);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Bn(n,e)},createSubscribe:gr,ErrorFactory:nr,deepExtend:Bn}),n}(),lf=new Mr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){lf.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ff=self.firebase.SDK_VERSION;ff&&ff.indexOf("LITE")>=0&&lf.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var hf=cf;!function(e){Ii("@firebase/app-compat","0.1.25",e)}();function df(){return window}hf.registerVersion("firebase","9.8.1","app-compat");function pf(e,t,n){return vf.apply(this,arguments)}function vf(){return vf=ke(be().mark((function e(t,n,r){var i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=df(),o=a.BuildInfo,pa(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,bf(n.sessionId);case 4:return u=e.sent,s={},wo()?s.ibi=o.packageName:mo()?s.apn=o.packageName:ua(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Wl(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),vf.apply(this,arguments)}function yf(){return yf=ke(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=df(),r=n.BuildInfo,i={},wo()?i.iosBundleId=r.packageName:mo()?i.androidPackageName=r.packageName:ua(t,"operation-not-supported-in-this-environment"),e.next=5,wl(t,i);case 5:case"end":return e.stop()}}),e)}))),yf.apply(this,arguments)}function mf(e){var t=df().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function gf(e,t,n){return kf.apply(this,arguments)}function kf(){return kf=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=df(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(sa(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),mo()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),kf.apply(this,arguments)}function wf(e){var t,n,r,i,a,o,u,s,c,l,f=df();ha("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ha("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ha("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ha("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ha("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function bf(e){return _f.apply(this,arguments)}function _f(){return(_f=ke(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xf(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xf(e){if(pa(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Tf=function(e){kn(n,e);var t=xn(n);function n(){var e;return In(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Sn(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),mn(vn(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ml);function If(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Af(),postBody:null,tenantId:e.tenantId,error:sa(e,"no-auth-event")}}function Ef(e,t){return Rf()._set(Pf(e),t)}function Sf(e){return Cf.apply(this,arguments)}function Cf(){return Cf=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rf()._get(Pf(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Rf()._remove(Pf(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function Nf(e,t){var n,r,i=function(e){var t=Of(e),n=t.link?decodeURIComponent(t.link):void 0,r=Of(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Of(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Of(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(ZM){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?sa(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Af(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Rf(){return ya(Fs)}function Pf(e){return co("authEvent",e.config.apiKey,e.name)}function Of(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=i(t=n)||Cn(t)||o(t)||u();r[0];return vr(r.slice(1).join("?"))}var Df=function(){function e(){In(this,e),this._redirectPersistence=Vs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=dl,this._overrideRedirectResult=nl}return Sn(e,[{key:"_initialize",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Tf(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){ua(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ke(be().mark((function e(t,n,r,i){var a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wf(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Xc.clear(),e.next=10,this._originValidation(t);case 10:return o=If(t,r,i),e.next=13,Ef(t,o);case 13:return e.next=15,pf(t,o,n);case 15:return u=e.sent,e.next=18,mf(u);case 18:return s=e.sent,e.abrupt("return",gf(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return yf.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=df(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Sf(e);case 2:t.onEvent(Lf());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ke(be().mark((function n(r){var i,a;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Sf(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Nf(i,r.url)),t.onEvent(a||Lf());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");df().handleOpenURL=function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(ZM){console.error(ZM)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Mf=Df;function Lf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:sa("no-auth-event")}}function Ff(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Uf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return!("file:"!==Ff()&&"ionic:"!==Ff()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vf(){return Jn()&&11===(null===document||void 0===document?void 0:document.documentMode)}function jf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return/Edge\/\d+/.test(e)}function qf(){try{var e=self.localStorage,t=zs();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn();return Vf()||jf(e)}()||er()}catch(ZM){return zf()&&er()}return!1}function zf(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Bf(){return("http:"===Ff()||"https:"===Ff()||Xn()||Uf())&&!($n()||Yn())&&qf()&&!zf()}function Wf(){return Uf()&&"undefined"!==typeof document}function Kf(){return Hf.apply(this,arguments)}function Hf(){return Hf=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Wf()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)}))),Hf.apply(this,arguments)}var Gf={LOCAL:"local",NONE:"none",SESSION:"session"},Qf=ha,Yf="persistence";function Xf(e,t){Qf(Object.values(Gf).includes(t),e,"invalid-persistence-type"),$n()?Qf(t!==Gf.SESSION,e,"unsupported-persistence-type"):Yn()?Qf(t===Gf.NONE,e,"unsupported-persistence-type"):zf()?Qf(t===Gf.NONE||t===Gf.LOCAL&&er(),e,"unsupported-persistence-type"):Qf(t===Gf.NONE||qf(),e,"unsupported-persistence-type")}function $f(e){return Jf.apply(this,arguments)}function Jf(){return Jf=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Zf(),r=co(Yf,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Jf.apply(this,arguments)}function Zf(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(ZM){return null}}var eh=ha,th=function(){function e(){In(this,e),this.browserResolver=ya(Gl),this.cordovaResolver=ya(Mf),this.underlyingResolver=null,this._redirectPersistence=Vs,this._completeRedirectFn=dl,this._overrideRedirectResult=nl}return Sn(e,[{key:"_initialize",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ke(be().mark((function e(t,n,r,i){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ke(be().mark((function e(t,n,r,i){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Wf()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return eh(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Kf();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function nh(e){return e.unwrap()}function rh(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new sh(e,function(e,t){var n,r=xr(e),i=t;return ha(t.customData.operationType,r,"argument-error"),ha(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ns._fromError(r,i)}(e,t));else if(r){var i=ih(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function ih(e){var t=(e instanceof tr?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof tr)&&"temporaryProof"in t&&"phoneNumber"in t)return Mc.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Gi)return null;switch(r){case Hi:n=gu;break;case Wi:n=mu;break;case Ki:n=ku;break;case Qi:n=_u;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?wu._create(r,u):iu._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new yu(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof tr?n.credentialFromError(e):n.credentialFromResult(e)}function ah(e,t){return t.catch((function(t){throw t instanceof tr&&rh(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,ih(t)),additionalUserInfo:Ss(e),user:ch.getOrCreate(r)}}))}function oh(e,t){return uh.apply(this,arguments)}function uh(){return uh=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return ah(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),uh.apply(this,arguments)}var sh=function(){function e(t,n){In(this,e),this.resolver=n,this.auth=t.wrapped()}return Sn(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return ah(nh(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),ch=function(){function e(t){In(this,e),this._delegate=t,this.multiFactor=function(e){var t=xr(e);return Os.has(t)||Os.set(t,Ps._fromUser(t)),Os.get(t)}(t)}return Sn(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ah(this.auth,Bu(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oh(this.auth,Nc(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ah(this.auth,Gc(this._delegate,t,th)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$f(So(this.auth));case 2:return e.abrupt("return",cl(this._delegate,t,th));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ah(this.auth,Ku(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return oh(this.auth,function(e,t,n){return Rc.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return ah(this.auth,function(e,t,n){return Hc.apply(this,arguments)}(this._delegate,e,th))}},{key:"reauthenticateWithRedirect",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$f(So(this.auth));case 2:return e.abrupt("return",ul(this._delegate,t,th));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ds.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ru(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return ks(xr(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return ks(xr(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Dc.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return ms(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ps.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();ch.USER_MAP=new WeakMap;var lh=ha,fh=function(){function e(t,n){if(In(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;lh(r,"invalid-api-key",{appName:t.name}),lh(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?th:void 0;this._delegate=n.initialize({options:{persistence:dh(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(na),this.linkUnderlyingAuth()}return Sn(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?ch.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){No(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return ts.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ns(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return es.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ah(this._delegate,as(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return hs.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=hu.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lh(Bf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,fl(this._delegate,th);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",ah(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){So(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=hh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=hh(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ss.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Zu.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Xf(this._delegate,t),e.t0=t,e.next=e.t0===Gf.SESSION?4:e.t0===Gf.LOCAL?6:e.t0===Gf.NONE?11:13;break;case 4:return n=Vs,e.abrupt("break",14);case 6:return e.next=8,ya(sc)._isAvailable();case 8:return r=e.sent,n=r?sc:Fs,e.abrupt("break",14);case 11:return n=so,e.abrupt("break",14);case 13:return e.abrupt("return",ua("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return ah(this._delegate,function(e){return Su.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return ah(this._delegate,qu(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return ah(this._delegate,function(e,t){return Yu.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return ah(this._delegate,us(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return ah(this._delegate,function(e,t,n){return cs.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return oh(this._delegate,function(e,t,n){return Cc.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lh(Bf(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",ah(this._delegate,Wc(this._delegate,t,th)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return lh(Bf(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,$f(this._delegate);case 3:return e.abrupt("return",al(this._delegate,t,th));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return is.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function hh(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&ch.getOrCreate(e))},error:t,complete:n}}function dh(e,t){var n=function(e,t){var n=Zf();if(!n)return[];var r=co(Yf,e,t);switch(n.getItem(r)){case Gf.NONE:return[so];case Gf.LOCAL:return[sc,Vs];case Gf.SESSION:return[Vs];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(sc)||n.push(sc),"undefined"!==typeof window)for(var r=0,i=[Fs,Vs];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(so)||n.push(so),n}fh.Persistence=Gf;var ph=function(){function e(){In(this,e),this.providerId="phone",this._delegate=new Mc(nh(hf.auth()))}return Sn(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Mc.credential(e,t)}}]),e}();ph.PHONE_SIGN_IN_METHOD=Mc.PHONE_SIGN_IN_METHOD,ph.PROVIDER_ID=Mc.PROVIDER_ID;var vh,yh=ha,mh=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hf.app();In(this,e),yh(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Ic(t,n,i.auth()),this.type=this._delegate.type}return Sn(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(vh=hf).INTERNAL.registerComponent(new Tr("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new fh(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Yi,PASSWORD_RESET:Xi,RECOVER_EMAIL:$i,REVERT_SECOND_FACTOR_ADDITION:Ji,VERIFY_AND_CHANGE_EMAIL:Zi,VERIFY_EMAIL:ea}},EmailAuthProvider:du,FacebookAuthProvider:mu,GithubAuthProvider:ku,GoogleAuthProvider:gu,OAuthProvider:yu,SAMLAuthProvider:bu,PhoneAuthProvider:ph,PhoneMultiFactorGenerator:Xl,RecaptchaVerifier:mh,TwitterAuthProvider:_u,Auth:fh,AuthCredential:Po,Error:tr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),vh.registerVersion("@firebase/auth-compat","0.2.14");var gh="@firebase/database",kh="0.13.0",wh="";var bh=function(){function e(t){In(this,e),this.domStorage_=t,this.prefix_="firebase:"}return Sn(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),or(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ar(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),_h=function(){function e(){In(this,e),this.cache_={},this.isInMemoryStorage=!0}return Sn(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return sr(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),xh=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new bh(t)}}catch(ZM){}return new _h},Th=xh("localStorage"),Ih=xh("sessionStorage"),Eh=new Mr("@firebase/database"),Sh=function(){var e=1;return function(){return e++}}(),Ch=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ln(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new mr;n.update(t);var r=n.digest();return Vn.encodeByteArray(r)},Nh=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?or(r):r,t+=" "}return t},Ah=null,Rh=!0,Ph=function(e,t){Ln(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Eh.logLevel=Cr.VERBOSE,Ah=Eh.log.bind(Eh),t&&Ih.set("logging_enabled",!0)):"function"===typeof e?Ah=e:(Ah=null,Ih.remove("logging_enabled"))},Oh=function(){if(!0===Rh&&(Rh=!1,null===Ah&&!0===Ih.get("logging_enabled")&&Ph(!0)),Ah){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Nh.apply(null,t);Ah(r)}},Dh=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Oh.apply(void 0,[e].concat(n))}},Mh=function(){var e="FIREBASE INTERNAL ERROR: "+Nh.apply(void 0,arguments);Eh.error(e)},Lh=function(){var e="FIREBASE FATAL ERROR: ".concat(Nh.apply(void 0,arguments));throw Eh.error(e),new Error(e)},Fh=function(){var e="FIREBASE WARNING: "+Nh.apply(void 0,arguments);Eh.warn(e)},Uh=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Vh="[MIN_NAME]",jh="[MAX_NAME]",qh=function(e,t){if(e===t)return 0;if(e===Vh||t===jh)return-1;if(t===Vh||e===jh)return 1;var n=$h(e),r=$h(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},zh=function(e,t){return e===t?0:e<t?-1:1},Bh=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+or(t))},Wh=function e(t){if("object"!==typeof t||null===t)return or(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=or(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Kh=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Hh(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Gh=function(e){Ln(!Uh(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Qh=new RegExp("^-?(0*)\\d{1,10}$"),Yh=-2147483648,Xh=2147483647,$h=function(e){if(Qh.test(e)){var t=Number(e);if(t>=Yh&&t<=Xh)return t}return null},Jh=function(e){try{e()}catch(ZM){setTimeout((function(){var t=ZM.stack||"";throw Fh("Exception was thrown by user callback.",t),ZM}),Math.floor(0))}},Zh=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},ed=function(){function e(t,n){var r=this;In(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return Sn(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Fh('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),td=function(){function e(t,n,r){var i=this;In(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return Sn(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Oh("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fh(e)}}]),e}(),nd=function(){function e(t){In(this,e),this.accessToken=t}return Sn(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();nd.OWNER="owner";var rd="5",id=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ad="websocket",od="long_polling",ud=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];In(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Th.get("host:"+t)||this._host}return Sn(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Th.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function sd(e,t,n){var r;if(Ln("string"===typeof t,"typeof type must == string"),Ln("object"===typeof n,"typeof params must == object"),t===ad)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==od)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Hh(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var cd=function(){function e(){In(this,e),this.counters_={}}return Sn(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;sr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Bn(void 0,this.counters_)}}]),e}(),ld={},fd={};function hd(e){var t=e.toString();return ld[t]||(ld[t]=new cd),ld[t]}var dd=function(){function e(t){In(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return Sn(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Jh((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),pd="start",vd="close",yd=function(){function e(t,n,r,i,a,o,u){var s=this;In(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Dh(t),this.stats_=hd(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),sd(n,od,e)}}return Sn(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new dd(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Zn()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new md((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===pd)n.id=a,n.password=o;else{if(i!==vd)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=rd,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&id.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=or(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=jn(t),r=Kh(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Zn()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=or(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Zn()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),md=function(){function e(t,n,r,i){if(In(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Zn())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Sh(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(ZM){Oh("frame writing exception"),ZM.stack&&Oh(ZM.stack),Oh(ZM)}}}return Sn(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Zn()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Oh("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(ZM){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Oh("No IE domain setting required")}catch(ZM){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),gd=null;"undefined"!==typeof MozWebSocket?gd=MozWebSocket:"undefined"!==typeof WebSocket&&(gd=WebSocket);var kd=function(){function e(t,n,r,i,a,o,u){In(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Dh(this.connId),this.stats_=hd(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return Sn(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Th.set("previous_websocket_failure",!0);try{if(Zn()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(rd,"/").concat(wh,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/guest-book",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBCrrViO2YqLguJNUDBFrjUDo6VSCYXM-E",REACT_APP_AUTH_DOMAIN:"guest-book-8d82c.firebaseapp.com",REACT_APP_PROJECT_ID:"guest-book-8d82c",REACT_APP_STORAGE_BUCKET:"guest-book-8d82c.appspot.com",REACT_APP_MESSAGIN_ID:"1023022153488",REACT_APP_APP_ID:"1:1023022153488:web:0b9753bacc909812926f95"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o})}this.mySock=new gd(this.connURL,[],undefined)}catch(ZM){this.log_("Error instantiating WebSocket.");var u=ZM.message||ZM.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Th.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ar(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ln(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=or(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Kh(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(ZM){this.log_("Exception thrown from WebSocket.send():",ZM.message||ZM.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=rd,!Zn()&&"undefined"!==typeof location&&location.hostname&&id.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),sd(e,ad,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==gd&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Th.isInMemoryStorage||!0===Th.get("previous_websocket_failure")}}]),e}();kd.responsesRequiredToBeHealthy=2,kd.healthyTimeout=3e4;var wd=function(){function e(t){In(this,e),this.initTransports_(t)}return Sn(e,[{key:"initTransports_",value:function(t){var n=kd&&kd.isAvailable(),r=n&&!kd.previouslyFailed();if(t.webSocketOnly&&(n||Fh("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[kd];else{var i,a=this.transports_=[],o=Tn(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[yd,kd]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();wd.globalTransportInitialized_=!1;var bd=function(){function e(t,n,r,i,a,o,u,s,c,l){In(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Dh("c:"+this.id+":"),this.transportManager_=new wd(n),this.log_("Connection created"),this.start_()}return Sn(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zh((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Bh("t",e),n=Bh("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Bh("t",e),n=Bh("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Bh("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Mh("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mh("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),rd!==n&&Fh("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Zh((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zh((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Th.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),_d=function(){function e(){In(this,e)}return Sn(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),xd=function(){function e(t){In(this,e),this.allowedEvents_=t,this.listeners_={},Ln(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return Sn(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Nn(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ln(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Td=function(e){kn(n,e);var t=xn(n);function n(){var e;return In(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Qn()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Sn(n,[{key:"getInitialEvent",value:function(e){return Ln("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(xd),Id=function(){function e(t,n){if(In(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Sn(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Ed(){return new Id("")}function Sd(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Cd(e){return e.pieces_.length-e.pieceNum_}function Nd(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Id(e.pieces_,t)}function Ad(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Rd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Pd(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Id(t,0)}function Od(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Id)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Id(n,0)}function Dd(e){return e.pieceNum_>=e.pieces_.length}function Md(e,t){var n=Sd(e),r=Sd(t);if(null===n)return t;if(n===r)return Md(Nd(e),Nd(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Ld(e,t){if(Cd(e)!==Cd(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Fd(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Cd(e)>Cd(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Ud=Sn((function e(t,n){In(this,e),this.errorPrefix_=n,this.parts_=Rd(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=_r(this.parts_[r]);Vd(this)}));function Vd(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+jd(e))}function jd(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var qd=function(e){kn(n,e);var t=xn(n);function n(){var e,r,i;return In(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return Sn(n,[{key:"getInitialEvent",value:function(e){return Ln("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(xd),zd=1e3,Bd=function(e){kn(n,e);var t=xn(n);function n(e,r,i,a,o,u,s,c){var l;if(In(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Dh("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=zd,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Zn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return qd.getInstance().on("visible",l.onVisible_,gn(l)),-1===e.host.indexOf("fblocal")&&Td.getInstance().on("online",l.onOnline_,gn(l)),l}return Sn(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(or(i)),Ln(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Kn,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ln(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ln(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ur(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ur(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ln(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+or(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Mh("Unrecognized action received from server: "+or(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ln(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=zd,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=zd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=zd),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=ke(be().mark((function e(){var t,r,i,a,o,u,c,l,f,h,d,p,v,y,m=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())},f=function(e){Ln(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=s(d,2),v=p[0],y=p[1],u?Oh("getToken() completed but was canceled"):(Oh("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,c=new bd(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Fh(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&Fh(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Oh("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Oh("Resuming connection for reason: "+e),delete this.interruptReasons_[e],lr(this.interruptReasons_)&&(this.reconnectDelay_=zd,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Wh(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Id(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Oh("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Oh("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Tn(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Tn(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Zn()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+wh.replace(/\./g,"-")]=1,Qn()?e["framework.cordova"]=1:$n()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Td.getInstance().currentlyOnline();return lr(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&sr(e,"w")){var n=cr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Fh("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(_d);Bd.nextPersistentConnectionId_=0,Bd.nextConnectionId_=0;var Wd,Kd=function(){function e(t,n){In(this,e),this.name=t,this.node=n}return Sn(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Hd=function(){function e(){In(this,e)}return Sn(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Kd(Vh,e),r=new Kd(Vh,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Kd.MIN}}]),e}(),Gd=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"compare",value:function(e,t){return qh(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Fn("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Kd.MIN}},{key:"maxPost",value:function(){return new Kd(jh,Wd)}},{key:"makePost",value:function(e,t){return Ln("string"===typeof e,"KeyIndex indexValue must always be a string."),new Kd(e,Wd)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Wd},set:function(e){Wd=e}}]),n}(Hd),Qd=new Gd,Yd=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;In(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return Sn(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Xd=function(){function e(t,n,r,i,a){In(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Zd.EMPTY_NODE,this.right=null!=a?a:Zd.EMPTY_NODE}return Sn(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Zd.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Zd.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Xd.RED=!0,Xd.BLACK=!1;var $d,Jd=function(){function e(){In(this,e)}return Sn(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Xd(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Zd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;In(this,e),this.comparator_=t,this.root_=n}return Sn(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Xd.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Xd.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Yd(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Yd(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Yd(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Yd(this.root_,null,this.comparator_,!0,e)}}]),e}();function ep(e,t){return qh(e.name,t.name)}function tp(e,t){return qh(e,t)}Zd.EMPTY_NODE=new Jd;var np,rp,ip,ap=function(e){return"number"===typeof e?"number:"+Gh(e):"string:"+e},op=function(e){if(e.isLeafNode()){var t=e.val();Ln("string"===typeof t||"number"===typeof t||"object"===typeof t&&sr(t,".sv"),"Priority must be a string or number.")}else Ln(e===$d||e.isEmpty(),"priority of unexpected type.");Ln(e===$d||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},up=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;In(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ln(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),op(this.priorityNode_)}return Sn(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Dd(t)?this:".priority"===Sd(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Sd(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ln(".priority"!==r||1===Cd(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Nd(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+ap(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Gh(this.value_):this.value_,this.lazyHash_=Ch(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ln(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ln(i>=0,"Unknown leaf type: "+n),Ln(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return np},set:function(e){np=e}}]),e}();up.VALUE_TYPE_ORDER=["object","boolean","number","string"];var sp,cp,lp=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?qh(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Kd.MIN}},{key:"maxPost",value:function(){return new Kd(jh,new up("[PRIORITY-POST]",ip))}},{key:"makePost",value:function(e,t){var n=rp(e);return new Kd(t,new up("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Hd),fp=new lp,hp=Math.log(2),dp=function(){function e(t){In(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/hp,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return Sn(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),pp=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new Xd(o,a.node,Xd.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new Xd(o,a.node,Xd.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new Xd(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,Xd.BLACK):(u(f,Xd.BLACK),u(f,Xd.RED))}return a}(new dp(e.length));return new Zd(r||t,a)},vp={},yp=function(){function e(t,n){In(this,e),this.indexes_=t,this.indexSet_=n}return Sn(e,[{key:"get",value:function(e){var t=cr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Zd?t:null}},{key:"hasIndex",value:function(e){return sr(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ln(t!==Qd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Kd.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?pp(i,t.getCompare()):vp;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=fr(this.indexes_,(function(e,i){var a=cr(r.indexSet_,i);if(Ln(a,"Missing index implementation for "+i),e===vp){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Kd.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),pp(o,a.getCompare())}return vp}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Kd(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(fr(this.indexes_,(function(e){if(e===vp)return e;var r=n.get(t.name);return r?e.remove(new Kd(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ln(vp&&fp,"ChildrenNode.ts has not been loaded"),sp=sp||new e({".priority":vp},{".priority":fp})}}]),e}(),mp=function(){function e(t,n,r){In(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&op(this.priorityNode_),this.children_.isEmpty()&&Ln(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Sn(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||cp}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?cp:t}},{key:"getChild",value:function(e){var t=Sd(e);return null===t?this:this.getImmediateChild(t).getChild(Nd(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ln(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Kd(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?cp:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Sd(e);if(null===n)return t;Ln(".priority"!==Sd(e)||1===Cd(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Nd(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(fp,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+ap(this.getPriority().val())+":"),this.forEachChild(fp,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Ch(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Kd(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Kd(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Kd(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Kd.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Kd.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===gp?-1:0}},{key:"withIndex",value:function(t){if(t===Qd||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Qd||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(fp),r=t.getIterator(fp),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Qd?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return cp||(cp=new e(new Zd(tp),null,yp.Default))}}]),e}();mp.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var gp=new(function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.call(this,new Zd(tp),mp.EMPTY_NODE,yp.Default)}return Sn(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return mp.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(mp));Object.defineProperties(Kd,{MIN:{value:new Kd(Vh,mp.EMPTY_NODE)},MAX:{value:new Kd(jh,gp)}}),Gd.__EMPTY_NODE=mp.EMPTY_NODE,up.__childrenNodeConstructor=mp,$d=gp,function(e){ip=e}(gp);function kp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return mp.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ln(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new up(n,kp(t))}if(e instanceof Array){var r=mp.EMPTY_NODE;return Hh(e,(function(t,n){if(sr(e,t)&&"."!==t.substring(0,1)){var i=kp(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(kp(t))}var i=[],a=!1,o=e;if(Hh(o,(function(e,t){if("."!==e.substring(0,1)){var n=kp(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Kd(e,n)))}})),0===i.length)return mp.EMPTY_NODE;var u=pp(i,ep,(function(e){return e.name}),tp);if(a){var s=pp(i,fp.getCompare());return new mp(u,kp(t),new yp({".priority":s},{".priority":fp}))}return new mp(u,kp(t),yp.Default)}!function(e){rp=e}(kp);var wp=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this)).indexPath_=e,Ln(!Dd(e)&&".priority"!==Sd(e),"Can't create PathIndex with empty path or .priority key"),r}return Sn(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?qh(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=kp(e),r=mp.EMPTY_NODE.updateChild(this.indexPath_,n);return new Kd(t,r)}},{key:"maxPost",value:function(){var e=mp.EMPTY_NODE.updateChild(this.indexPath_,gp);return new Kd(jh,e)}},{key:"toString",value:function(){return Rd(this.indexPath_,0).join("/")}}]),n}(Hd),bp=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?qh(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Kd.MIN}},{key:"maxPost",value:function(){return Kd.MAX}},{key:"makePost",value:function(e,t){var n=kp(e);return new Kd(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Hd),_p=new bp,xp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function Tp(e){return{type:"value",snapshotNode:e}}function Ip(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Ep(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Sp(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Cp=function(){function e(){In(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fp}return Sn(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ln(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ln(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vh}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ln(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ln(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jh}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ln(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===fp}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Np(e){var t,n={};return e.isDefault()||(e.index_===fp?t="$priority":e.index_===_p?t="$value":e.index_===Qd?t="$key":(Ln(e.index_ instanceof wp,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=or(t),e.startSet_&&(n.startAt=or(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+or(e.indexStartName_))),e.endSet_&&(n.endAt=or(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+or(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Ap(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==fp&&(t.i=e.index_.toString()),t}var Rp=function(e){kn(n,e);var t=xn(n);function n(e,r,i,a){var o;return In(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Dh("p:rest:"),o.listens_={},o}return Sn(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=Np(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),cr(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Np(e._queryParams),r=e._path.toString(),i=new Kn;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=s(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+pr(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=ar(l.responseText)}catch(ZM){Fh("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&Fh("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ln(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(_d),Pp=function(){function e(){In(this,e),this.rootNode_=mp.EMPTY_NODE}return Sn(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Op(){return{value:null,children:new Map}}function Dp(e,t,n){if(Dd(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Sd(t);e.children.has(r)||e.children.set(r,Op()),Dp(e.children.get(r),t=Nd(t),n)}}function Mp(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Mp(r,new Id(t.toString()+"/"+e),n)}))}var Lp,Fp=function(){function e(t){In(this,e),this.collection_=t,this.last_=null}return Sn(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Hh(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Up=function(){function e(t,n){In(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Fp(t);var r=1e4+2e4*Math.random();Zh(this.reportStats_.bind(this),Math.floor(r))}return Sn(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Hh(t,(function(t,i){i>0&&sr(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Zh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Vp(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Lp||(Lp={}));var jp,qp=function(){function e(t,n,r){In(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Lp.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return Sn(e,[{key:"operationForChild",value:function(t){if(Dd(this.path)){if(null!=this.affectedTree.value)return Ln(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Id(t));return new e(Ed(),n,this.revert)}return Ln(Sd(this.path)===t,"operationForChild called for unrelated child."),new e(Nd(this.path),this.affectedTree,this.revert)}}]),e}(),zp=function(){function e(t,n,r){In(this,e),this.source=t,this.path=n,this.snap=r,this.type=Lp.OVERWRITE}return Sn(e,[{key:"operationForChild",value:function(t){return Dd(this.path)?new e(this.source,Ed(),this.snap.getImmediateChild(t)):new e(this.source,Nd(this.path),this.snap)}}]),e}(),Bp=function(){function e(t,n,r){In(this,e),this.source=t,this.path=n,this.children=r,this.type=Lp.MERGE}return Sn(e,[{key:"operationForChild",value:function(t){if(Dd(this.path)){var n=this.children.subtree(new Id(t));return n.isEmpty()?null:n.value?new zp(this.source,Ed(),n.value):new e(this.source,Ed(),n)}return Ln(Sd(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Nd(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Wp=function(){function e(t,n,r){In(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return Sn(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Dd(e))return this.isFullyInitialized()&&!this.filtered_;var t=Sd(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function Kp(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Fn("Should only compare child_ events.");var r=new Kd(t.childName,t.snapshotNode),i=new Kd(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Hp(e,t){return{eventCache:e,serverCache:t}}function Gp(e,t,n,r){return Hp(new Wp(t,n,r),e.serverCache)}function Qp(e,t,n,r){return Hp(e.eventCache,new Wp(t,n,r))}function Yp(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Xp(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var $p=function(){return jp||(jp=new Zd(zh)),jp},Jp=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$p();In(this,e),this.value=t,this.children=n}return Sn(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Ed(),value:this.value};if(Dd(e))return null;var n=Sd(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Nd(e),t);return null!=i?{path:Od(new Id(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Dd(t))return this;var n=Sd(t),r=this.children.get(n);return null!==r?r.subtree(Nd(t)):new e(null)}},{key:"set",value:function(t,n){if(Dd(t))return new e(n,this.children);var r=Sd(t),i=(this.children.get(r)||new e(null)).set(Nd(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Dd(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Sd(t),r=this.children.get(n);if(r){var i,a=r.remove(Nd(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Dd(e))return this.value;var t=Sd(e),n=this.children.get(t);return n?n.get(Nd(e)):null}},{key:"setTree",value:function(t,n){if(Dd(t))return n;var r,i=Sd(t),a=(this.children.get(i)||new e(null)).setTree(Nd(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Ed(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Od(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Ed(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Dd(e))return null;var i=Sd(e),a=this.children.get(i);return a?a.findOnPath_(Nd(e),Od(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Ed(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Dd(t))return this;this.value&&r(n,this.value);var i=Sd(t),a=this.children.get(i);return a?a.foreachOnPath_(Nd(t),Od(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Ed(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Od(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Hh(t,(function(e,t){n=n.set(new Id(e),t)})),n}}]),e}(),Zp=function(){function e(t){In(this,e),this.writeTree_=t}return Sn(e,null,[{key:"empty",value:function(){return new e(new Jp(null))}}]),e}();function ev(e,t,n){if(Dd(t))return new Zp(new Jp(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Md(i,t);return a=a.updateChild(o,n),new Zp(e.writeTree_.set(i,a))}var u=new Jp(n),s=e.writeTree_.setTree(t,u);return new Zp(s)}function tv(e,t,n){var r=e;return Hh(n,(function(e,n){r=ev(r,Od(t,e),n)})),r}function nv(e,t){if(Dd(t))return Zp.empty();var n=e.writeTree_.setTree(t,new Jp(null));return new Zp(n)}function rv(e,t){return null!=iv(e,t)}function iv(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Md(n.path,t)):null}function av(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(fp,(function(e,n){t.push(new Kd(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Kd(e,n.value))})),t}function ov(e,t){if(Dd(t))return e;var n=iv(e,t);return new Zp(null!=n?new Jp(n):e.writeTree_.subtree(t))}function uv(e){return e.writeTree_.isEmpty()}function sv(e,t){return cv(Ed(),e.writeTree_,t)}function cv(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ln(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=cv(Od(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Od(e,".priority"),r)),n}function lv(e,t){return Tv(t,e)}function fv(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function hv(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ln(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&dv(u,r.path)?i=!1:Fd(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=vv(e.allWrites,pv,Ed()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=nv(e.visibleWrites,r.path):Hh(r.children,(function(t){e.visibleWrites=nv(e.visibleWrites,Od(r.path,t))}));return!0}return!1}function dv(e,t){if(e.snap)return Fd(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Fd(Od(e.path,n),t))return!0;return!1}function pv(e){return e.visible}function vv(e,t,n){for(var r=Zp.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Fd(n,o)?r=ev(r,u=Md(n,o),a.snap):Fd(o,n)&&(u=Md(o,n),r=ev(r,Ed(),a.snap.getChild(u)));else{if(!a.children)throw Fn("WriteRecord should have .snap or .children");if(Fd(n,o))r=tv(r,u=Md(n,o),a.children);else if(Fd(o,n))if(Dd(u=Md(o,n)))r=tv(r,Ed(),a.children);else{var s=cr(a.children,Sd(u));if(s){var c=s.getChild(Nd(u));r=ev(r,Ed(),c)}}}}}return r}function yv(e,t,n,r,i){if(r||i){var a=ov(e.visibleWrites,t);if(!i&&uv(a))return n;if(i||null!=n||rv(a,Ed())){return sv(vv(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Fd(e.path,t)||Fd(t,e.path))}),t),n||mp.EMPTY_NODE)}return null}var o=iv(e.visibleWrites,t);if(null!=o)return o;var u=ov(e.visibleWrites,t);return uv(u)?n:null!=n||rv(u,Ed())?sv(u,n||mp.EMPTY_NODE):null}function mv(e,t,n,r){return yv(e.writeTree,e.treePath,t,n,r)}function gv(e,t){return function(e,t,n){var r=mp.EMPTY_NODE,i=iv(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(fp,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=ov(e.visibleWrites,t);return n.forEachChild(fp,(function(e,t){var n=sv(ov(a,new Id(e)),t);r=r.updateImmediateChild(e,n)})),av(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return av(ov(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function kv(e,t,n,r){return function(e,t,n,r,i){Ln(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Od(t,n);if(rv(e.visibleWrites,a))return null;var o=ov(e.visibleWrites,a);return uv(o)?i.getChild(n):sv(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function wv(e,t){return function(e,t){return iv(e.visibleWrites,t)}(e.writeTree,Od(e.treePath,t))}function bv(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=ov(e.visibleWrites,t),c=iv(s,Ed());if(null!=c)u=c;else{if(null==n)return[];u=sv(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function _v(e,t,n){return function(e,t,n,r){var i=Od(t,n),a=iv(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?sv(ov(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function xv(e,t){return Tv(Od(e.treePath,t),e.writeTree)}function Tv(e,t){return{treePath:e,writeTree:t}}var Iv=function(){function e(){In(this,e),this.changeMap=new Map}return Sn(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ln("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ln(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Sp(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Ep(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Ip(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Fn("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Sp(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Ev=new(function(){function e(){In(this,e)}return Sn(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Sv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;In(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return Sn(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Wp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _v(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xp(this.viewCache_),i=bv(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Cv(e,t,n,r,i){var a,o,u=new Iv;if(n.type===Lp.OVERWRITE){var s=n;s.source.fromUser?a=Rv(e,t,s.path,s.snap,r,i,u):(Ln(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Dd(s.path),a=Av(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Lp.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=Od(n,r);Pv(t,Sd(c))&&(u=Rv(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=Od(n,r);Pv(t,Sd(c))||(u=Rv(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Ln(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Dv(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Lp.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=wv(r,n))return t;var u,s=new Sv(r,t,i),c=t.eventCache.getNode();if(Dd(n)||".priority"===Sd(n)){var l;if(t.serverCache.isFullyInitialized())l=mv(r,Xp(t));else{var f=t.serverCache.getNode();Ln(f instanceof mp,"serverChildren would be complete if leaf node"),l=gv(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=Sd(n),d=_v(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,Nd(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,mp.EMPTY_NODE,Nd(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=mv(r,Xp(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=wv(r,Ed()),Gp(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=wv(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Dd(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Av(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Dd(n)){var c=new Jp(null);return s.getNode().forEachChild(Qd,(function(e,t){c=c.set(new Id(e),t)})),Dv(e,t,n,c,i,a,u,o)}return t}var l=new Jp(null);return r.foreach((function(e,t){var r=Od(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),Dv(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Lp.LISTEN_COMPLETE)throw Fn("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Qp(t,a.getNode(),a.isFullyInitialized()||Dd(n),a.isFiltered());return Nv(e,o,n,r,Ev,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Yp(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Tp(Yp(t)))}}(t,a,f),{viewCache:a,changes:f}}function Nv(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=wv(r,n))return t;if(Dd(n))if(Ln(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Xp(t),l=gv(r,c instanceof mp?c:mp.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=mv(r,Xp(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=Sd(n);if(".priority"===h){Ln(1===Cd(n),"Can't have a priority with additional path components");var d=s.getNode(),p=kv(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=Nd(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var m=kv(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(h).updateChild(y,m):s.getNode().getImmediateChild(h)}else v=_v(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,y,i,a):s.getNode()}}return Gp(t,o,s.isFullyInitialized()||Dd(n),e.filter.filtersNodes())}function Av(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Dd(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=Sd(n);if(!c.isCompleteForPath(n)&&Cd(n)>1)return t;var d=Nd(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,Ev,null)}var v=Qp(t,s,c.isFullyInitialized()||Dd(n),l.filtersNodes());return Nv(e,v,n,i,new Sv(i,v,a),u)}function Rv(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new Sv(i,t,a);if(Dd(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=Gp(t,s,!0,e.filter.filtersNodes());else{var f=Sd(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=Gp(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=Nd(n),p=c.getNode().getImmediateChild(f);if(Dd(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===Ad(d)&&v.getChild(Pd(d)).isEmpty()?v:v.updateChild(d,r):mp.EMPTY_NODE}if(p.equals(h))u=t;else u=Gp(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function Pv(e,t){return e.eventCache.isCompleteForChild(t)}function Ov(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Dv(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=Dd(n)?r:new Jp(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Ov(0,t.serverCache.getNode().getImmediateChild(n),r);c=Av(e,c,new Id(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var f=Ov(0,t.serverCache.getNode().getImmediateChild(n),r);c=Av(e,c,new Id(n),f,i,a,o,u)}})),c}var Mv;function Lv(e,t){var n=Xp(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Dd(t)&&!n.getImmediateChild(Sd(t)).isEmpty())?n.getChild(t):null}function Fv(e,t,n,r){t.type===Lp.MERGE&&null!==t.source.queryId&&(Ln(Xp(e.viewCache_),"We should always have a full cache before handling merges"),Ln(Yp(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=Cv(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Ln(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ln(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ln(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Uv(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Uv(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Kp(e,i,"child_removed",t,r,n),Kp(e,i,"child_added",t,r,n),Kp(e,i,"child_moved",a,r,n),Kp(e,i,"child_changed",t,r,n),Kp(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Vv;function jv(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ln(null!=a,"SyncTree gave us an op for an invalid query."),Fv(a,t,n,r)}var o,u=[],s=Tn(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Fv(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function qv(e,t){var n,r=null,i=Tn(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Lv(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var zv=Sn((function e(t){In(this,e),this.listenProvider_=t,this.syncPointTree_=new Jp(null),this.pendingWriteTree_={visibleWrites:Zp.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Bv(e,t,n,r,i){return function(e,t,n,r,i){Ln(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ev(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Gv(e,new zp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Wv(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=fv(e.pendingWriteTree_,t),i=hv(e.pendingWriteTree_,t);if(i){var a=new Jp(null);return null!=r.snap?a=a.set(Ed(),!0):Hh(r.children,(function(e){a=a.set(new Id(e),!0)})),Gv(e,new qp(r.path,a,n))}return[]}function Kv(e,t,n){return Gv(e,new zp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Hv(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=qv(n,Md(e,t));if(r)return r}));return yv(r,t,i,n,!0)}function Gv(e,t){return Qv(t,e.syncPointTree_,null,lv(e.pendingWriteTree_,Ed()))}function Qv(e,t,n,r){if(Dd(e.path))return Yv(e,t,n,r);var i=t.get(Ed());null==n&&null!=i&&(n=qv(i,Ed()));var a=[],o=Sd(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=xv(r,o);a=a.concat(Qv(u,s,c,l))}return i&&(a=a.concat(jv(i,e,r,n))),a}function Yv(e,t,n,r){var i=t.get(Ed());null==n&&null!=i&&(n=qv(i,Ed()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=xv(r,t),s=e.operationForChild(t);s&&(a=a.concat(Yv(s,i,o,u)))})),i&&(a=a.concat(jv(i,e,r,n))),a}function Xv(e,t){return e.tagToQueryMap.get(t)}function $v(e){var t=e.indexOf("$");return Ln(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Id(e.substr(0,t))}}function Jv(e,t,n){var r=e.syncPointTree_.get(t);return Ln(r,"Missing sync point for query tag that we're tracking"),jv(r,n,lv(e.pendingWriteTree_,t),null)}var Zv=function(){function e(t){In(this,e),this.node_=t}return Sn(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),ey=function(){function e(t,n){In(this,e),this.syncTree_=t,this.path_=n}return Sn(e,[{key:"getImmediateChild",value:function(t){var n=Od(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return Hv(this.syncTree_,this.path_)}}]),e}(),ty=function(e,t,n){return e&&"object"===typeof e?(Ln(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ny(e[".sv"],t,n):"object"===typeof e[".sv"]?ry(e[".sv"],t):void Ln(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ny=function(e,t,n){if("timestamp"===e)return n.timestamp;Ln(!1,"Unexpected server value: "+e)},ry=function(e,t,n){e.hasOwnProperty("increment")||Ln(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ln(!1,"Unexpected increment value: "+r);var i=t.node();if(Ln(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},iy=function(e,t,n,r){return oy(t,new ey(n,e),r)},ay=function(e,t,n){return oy(e,new Zv(t),n)};function oy(e,t,n){var r,i=e.getPriority().val(),a=ty(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=ty(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new up(u,kp(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new up(a))),s.forEachChild(fp,(function(e,i){var a=oy(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var uy=Sn((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};In(this,e),this.name=t,this.parent=n,this.node=r}));function sy(e,t){for(var n=t instanceof Id?t:new Id(t),r=e,i=Sd(n);null!==i;){var a=cr(r.node.children,i)||{children:{},childCount:0};r=new uy(i,r,a),i=Sd(n=Nd(n))}return r}function cy(e){return e.node.value}function ly(e,t){e.node.value=t,vy(e)}function fy(e){return e.node.childCount>0}function hy(e,t){Hh(e.node.children,(function(n,r){t(new uy(n,e,r))}))}function dy(e,t,n,r){n&&!r&&t(e),hy(e,(function(e){dy(e,t,!0,r)})),n&&r&&t(e)}function py(e){return new Id(null===e.parent?e.name:py(e.parent)+"/"+e.name)}function vy(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===cy(e)&&!fy(e)}(n),i=sr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,vy(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,vy(e))}(e.parent,e.name,e)}var yy=/[\[\].#$\/\u0000-\u001F\u007F]/,my=/[\[\].#$\u0000-\u001F\u007F]/,gy=10485760,ky=function(e){return"string"===typeof e&&0!==e.length&&!yy.test(e)},wy=function(e){return"string"===typeof e&&0!==e.length&&!my.test(e)},by=function e(t,n,r){var i=r instanceof Id?new Ud(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+jd(i));if("function"===typeof n)throw new Error(t+"contains a function "+jd(i)+" with contents = "+n.toString());if(Uh(n))throw new Error(t+"contains "+n.toString()+" "+jd(i));if("string"===typeof n&&n.length>gy/3&&_r(n)>gy)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+jd(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Hh(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!ky(n)))throw new Error(t+" contains an invalid key ("+n+") "+jd(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=_r(t),Vd(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=_r(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+jd(i)+" in addition to actual children.")}},_y=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!ky(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),wy(e)}(n))throw new Error(br(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},xy=Sn((function e(){In(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Ty(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Ld(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Iy(e,t,n){Ty(e,n),Ey(e,(function(e){return Fd(e,t)||Fd(t,e)}))}function Ey(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Sy(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Sy(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Ah&&Oh("event: "+n.toString()),Jh(r)}}}var Cy="repo_interrupt",Ny=function(){function e(t,n,r,i){In(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Op(),this.transactionQueueTree_=new uy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return Sn(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Ay(e,t,n){if(e.stats_=hd(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Rp(e.repoInfo_,(function(t,n,r,i){Oy(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Dy(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{or(n)}catch(ZM){throw new Error("Invalid authOverride provided: "+ZM)}}e.persistentConnection_=new Bd(e.repoInfo_,t,(function(t,n,r,i){Oy(e,t,n,r,i)}),(function(t){Dy(e,t)}),(function(t){!function(e,t){Hh(t,(function(t,n){My(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return fd[n]||(fd[n]=t()),fd[n]}(e.repoInfo_,(function(){return new Up(e.stats_,e.server_)})),e.infoData_=new Pp,e.infoSyncTree_=new zv({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Kv(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),My(e,"connected",!1),e.serverSyncTree_=new zv({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Iy(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Ry(e){var t=e.infoData_.getNode(new Id(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Py(e){return(t=(t={timestamp:Ry(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Oy(e,t,n,r,i){e.dataUpdateCount++;var a=new Id(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=fr(n,(function(e){return kp(e)}));o=function(e,t,n,r){var i=Xv(e,r);if(i){var a=$v(i),o=a.path,u=a.queryId,s=Md(o,t),c=Jp.fromObject(n);return Jv(e,o,new Bp(Vp(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=kp(n);o=function(e,t,n,r){var i=Xv(e,r);if(null!=i){var a=$v(i),o=a.path,u=a.queryId,s=Md(o,t);return Jv(e,o,new zp(Vp(u),s,n))}return[]}(e.serverSyncTree_,a,s,i)}else if(r){var c=fr(n,(function(e){return kp(e)}));o=function(e,t,n){var r=Jp.fromObject(n);return Gv(e,new Bp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=kp(n);o=Kv(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=zy(e,a)),Iy(e.eventQueue_,f,o)}function Dy(e,t){My(e,"connected",t),!1===t&&function(e){Uy(e,"onDisconnectEvents");var t=Py(e),n=Op();Mp(e.onDisconnect_,Ed(),(function(r,i){var a=iy(r,i,e.serverSyncTree_,t);Dp(n,r,a)}));var r=[];Mp(n,Ed(),(function(t,n){r=r.concat(Kv(e.serverSyncTree_,t,n));var i=Gy(e,t);zy(e,i)})),e.onDisconnect_=Op(),Iy(e.eventQueue_,Ed(),r)}(e)}function My(e,t,n){var r=new Id("/.info/"+t),i=kp(n);e.infoData_.updateSnapshot(r,i);var a=Kv(e.infoSyncTree_,r,i);Iy(e.eventQueue_,r,a)}function Ly(e){return e.nextWriteId_++}function Fy(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Cy)}function Uy(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Oh.apply(void 0,[t].concat(r))}function Vy(e,t,n){return Hv(e.serverSyncTree_,t,n)||mp.EMPTY_NODE}function jy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Hy(e,t),cy(t)){var n=Wy(e,t);Ln(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&qy(e,py(t),n)}else fy(t)&&hy(t,(function(t){jy(e,t)}))}function qy(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Vy(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Ln(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=Md(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){Uy(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Wv(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);Hy(e,sy(e.transactionQueueTree_,t)),jy(e,e.transactionQueueTree_),Iy(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)Jh(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Fh("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}zy(e,t)}}),o)}function zy(e,t){var n=By(e,t),r=py(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=Md(n,s.path),l=!1,f=void 0;if(Ln(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,f=s.abortReason,i=i.concat(Wv(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,f="maxretry",i=i.concat(Wv(e.serverSyncTree_,s.currentWriteId,!0));else{var h=Vy(e,s.path,o);s.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){by("transaction failed: Data returned ",d,s.path);var p=kp(d);"object"===typeof d&&null!=d&&sr(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=s.currentWriteId,y=Py(e),m=ay(p,h,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=Ly(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Bv(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(Wv(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(Wv(e.serverSyncTree_,s.currentWriteId,!0))}Iy(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},s=0;s<t.length;s++)u(s);Hy(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Jh(r[c]);jy(e,e.transactionQueueTree_)}(e,Wy(e,n),r),r}function By(e,t){var n,r=e.transactionQueueTree_;for(n=Sd(t);null!==n&&void 0===cy(r);)r=sy(r,n),n=Sd(t=Nd(t));return r}function Wy(e,t){var n=[];return Ky(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Ky(e,t,n){var r=cy(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);hy(t,(function(t){Ky(e,t,n)}))}function Hy(e,t){var n=cy(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ly(t,n.length>0?n:void 0)}hy(t,(function(t){Hy(e,t)}))}function Gy(e,t){var n=py(By(e,t)),r=sy(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Qy(e,t)})),Qy(e,r),dy(r,(function(t){Qy(e,t)})),n}function Qy(e,t){var n=cy(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ln(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ln(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Wv(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?ly(t,void 0):n.length=a+1,Iy(e.eventQueue_,py(t),i);for(var u=0;u<r.length;u++)Jh(r[u])}}var Yy=function(e,t){var n=Xy(e),r=n.namespace;"firebase.com"===n.domain&&Lh(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Lh("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fh("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ud(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Id(n.pathString)}},Xy=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(ZM){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Tn(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Fh("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},$y=function(){function e(t,n,r,i){In(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Sn(e,[{key:"key",get:function(){return Dd(this._path)?null:Ad(this._path)}},{key:"ref",get:function(){return new Jy(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Ap(this._queryParams),t=Wh(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Ap(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=xr(t))instanceof e))return!1;var n=this._repo===t._repo,r=Ld(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var Jy=function(e){kn(n,e);var t=xn(n);function n(e,r){return In(this,n),t.call(this,e,r,new Cp,!1)}return Sn(n,[{key:"parent",get:function(){var e=Pd(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}($y);!function(e){Ln(!Mv,"__referenceConstructor has already been defined"),Mv=e}(Jy),function(e){Ln(!Vv,"__referenceConstructor has already been defined"),Vv=e}(Jy);var Zy={},em=!1;function tm(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Lh("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Oh("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=Yy(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/guest-book",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBCrrViO2YqLguJNUDBFrjUDo6VSCYXM-E",REACT_APP_AUTH_DOMAIN:"guest-book-8d82c.firebaseapp.com",REACT_APP_PROJECT_ID:"guest-book-8d82c",REACT_APP_STORAGE_BUCKET:"guest-book-8d82c.appspot.com",REACT_APP_MESSAGIN_ID:"1023022153488",REACT_APP_APP_ID:"1:1023022153488:web:0b9753bacc909812926f95"}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=Yy(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new nd(nd.OWNER):new td(e.name,e.options,t);_y("Invalid Firebase Database URL",u),Dd(u.path)||Lh("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=Zy[t.name];i||(i={},Zy[t.name]=i);var a=i[e.toURLString()];a&&Lh("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Ny(e,em,n,r),i[e.toURLString()]=a,a}(s,e,l,new ed(e.name,n));return new nm(f,e)}var nm=function(){function e(t,n){In(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Sn(e,[{key:"_repo",get:function(){return this._instanceStarted||(Ay(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Jy(this._repo,Ed())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Zy[t];n&&n[e.key]===e||Lh("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Fy(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Lh("Cannot call "+e+" on a deleted database.")}}]),e}();Bd.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Bd.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){wh=e}(ki),hi(new Tr("database",(function(e,t){var n=t.instanceIdentifier;return tm(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ii(gh,kh,e),Ii(gh,kh,"esm2017")}();var rm,im="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},am={},om=om||{},um=im||self;function sm(){}function cm(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function lm(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var fm="closure_uid_"+(1e9*Math.random()>>>0),hm=0;function dm(e,t,n){return e.call.apply(e.bind,arguments)}function pm(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function vm(e,t,n){return(vm=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dm:pm).apply(null,arguments)}function ym(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function mm(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function gm(){this.s=this.s,this.o=this.o}var km={};gm.prototype.s=!1,gm.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,fm)&&e[fm]||(e[fm]=++hm)}(this);delete km[e]}},gm.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var wm=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},bm=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function _m(e){return Array.prototype.concat.apply([],arguments)}function xm(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Tm(e){return/^[\s\xa0]*$/.test(e)}var Im,Em=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Sm(e,t){return-1!=e.indexOf(t)}function Cm(e,t){return e<t?-1:e>t?1:0}e:{var Nm=um.navigator;if(Nm){var Am=Nm.userAgent;if(Am){Im=Am;break e}}Im=""}function Rm(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Pm(e){var t={};for(var n in e)t[n]=e[n];return t}var Om="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dm(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Om.length;a++)n=Om[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Mm(e){return Mm[" "](e),e}Mm[" "]=sm;var Lm,Fm=Sm(Im,"Opera"),Um=Sm(Im,"Trident")||Sm(Im,"MSIE"),Vm=Sm(Im,"Edge"),jm=Vm||Um,qm=Sm(Im,"Gecko")&&!(Sm(Im.toLowerCase(),"webkit")&&!Sm(Im,"Edge"))&&!(Sm(Im,"Trident")||Sm(Im,"MSIE"))&&!Sm(Im,"Edge"),zm=Sm(Im.toLowerCase(),"webkit")&&!Sm(Im,"Edge");function Bm(){var e=um.document;return e?e.documentMode:void 0}e:{var Wm="",Km=function(){var e=Im;return qm?/rv:([^\);]+)(\)|;)/.exec(e):Vm?/Edge\/([\d\.]+)/.exec(e):Um?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):zm?/WebKit\/(\S+)/.exec(e):Fm?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Km&&(Wm=Km?Km[1]:""),Um){var Hm=Bm();if(null!=Hm&&Hm>parseFloat(Wm)){Lm=String(Hm);break e}}Lm=Wm}var Gm,Qm={};function Ym(){return function(e){var t=Qm;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Em(String(Lm)).split("."),n=Em("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Cm(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Cm(0==a[2].length,0==o[2].length)||Cm(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(um.document&&Um){var Xm=Bm();Gm=Xm||(parseInt(Lm,10)||void 0)}else Gm=void 0;var $m=Gm,Jm=function(){if(!um.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{um.addEventListener("test",sm,t),um.removeEventListener("test",sm,t)}catch(n){}return e}();function Zm(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function eg(e,t){if(Zm.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(qm){e:{try{Mm(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:tg[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&eg.Z.h.call(this)}}Zm.prototype.h=function(){this.defaultPrevented=!0},mm(eg,Zm);var tg={2:"touch",3:"pen",4:"mouse"};eg.prototype.h=function(){eg.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ng="closure_listenable_"+(1e6*Math.random()|0),rg=0;function ig(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++rg,this.ca=this.fa=!1}function ag(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function og(e){this.src=e,this.g={},this.h=0}function ug(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=wm(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ag(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function sg(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}og.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=sg(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ig(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var cg="closure_lm_"+(1e6*Math.random()|0),lg={};function fg(e,t,n,r,i){if(r&&r.once)return dg(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)fg(e,t[a],n,r,i);return null}return n=wg(n),e&&e[ng]?e.N(t,n,lm(r)?!!r.capture:!!r,i):hg(e,t,n,!1,r,i)}function hg(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=lm(i)?!!i.capture:!!i,u=gg(e);if(u||(e[cg]=u=new og(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=mg;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Jm||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(yg(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function dg(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)dg(e,t[a],n,r,i);return null}return n=wg(n),e&&e[ng]?e.O(t,n,lm(r)?!!r.capture:!!r,i):hg(e,t,n,!0,r,i)}function pg(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)pg(e,t[a],n,r,i);else r=lm(r)?!!r.capture:!!r,n=wg(n),e&&e[ng]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=sg(a=e.g[t],n,r,i))&&(ag(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=gg(e))&&(t=e.g[t.toString()],e=-1,t&&(e=sg(t,n,r,i)),(n=-1<e?t[e]:null)&&vg(n))}function vg(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ng])ug(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(yg(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=gg(t))?(ug(n,e),0==n.h&&(n.src=null,t[cg]=null)):ag(e)}}}function yg(e){return e in lg?lg[e]:lg[e]="on"+e}function mg(e,t){if(e.ca)e=!0;else{t=new eg(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&vg(e),e=n.call(r,t)}return e}function gg(e){return(e=e[cg])instanceof og?e:null}var kg="__closure_events_fn_"+(1e9*Math.random()>>>0);function wg(e){return"function"===typeof e?e:(e[kg]||(e[kg]=function(t){return e.handleEvent(t)}),e[kg])}function bg(){gm.call(this),this.i=new og(this),this.P=this,this.I=null}function _g(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Zm(t,e);else if(t instanceof Zm)t.target=t.target||e;else{var i=t;Dm(t=new Zm(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=xg(o,r,!0,t)&&i}if(i=xg(o=t.g=e,r,!0,t)&&i,i=xg(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=xg(o=t.g=n[a],r,!1,t)&&i}function xg(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&ug(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}mm(bg,gm),bg.prototype[ng]=!0,bg.prototype.removeEventListener=function(e,t,n,r){pg(this,e,t,n,r)},bg.prototype.M=function(){if(bg.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ag(n[r]);delete t.g[e],t.h--}}this.I=null},bg.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},bg.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Tg=um.JSON.stringify;function Ig(){var e=Og,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Eg,Sg=function(){function e(){In(this,e),this.h=this.g=null}return Sn(e,[{key:"add",value:function(e,t){var n=Cg.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Cg=new(function(){function e(t,n){In(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Sn(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Ng}),(function(e){return e.reset()})),Ng=function(){function e(){In(this,e),this.next=this.g=this.h=null}return Sn(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ag(e){um.setTimeout((function(){throw e}),0)}function Rg(e,t){Eg||function(){var e=um.Promise.resolve(void 0);Eg=function(){e.then(Dg)}}(),Pg||(Eg(),Pg=!0),Og.add(e,t)}var Pg=!1,Og=new Sg;function Dg(){for(var e;e=Ig();){try{e.h.call(e.g)}catch(n){Ag(n)}var t=Cg;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Pg=!1}function Mg(e,t){bg.call(this),this.h=e||1,this.g=t||um,this.j=vm(this.kb,this),this.l=Date.now()}function Lg(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Fg(e,t,n){if("function"===typeof e)n&&(e=vm(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=vm(e.handleEvent,e)}return 2147483647<Number(t)?-1:um.setTimeout(e,t||0)}function Ug(e){e.g=Fg((function(){e.g=null,e.i&&(e.i=!1,Ug(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}mm(Mg,bg),(rm=Mg.prototype).da=!1,rm.S=null,rm.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),_g(this,"tick"),this.da&&(Lg(this),this.start()))}},rm.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rm.M=function(){Mg.Z.M.call(this),Lg(this),delete this.g};var Vg=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Sn(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ug(this)}},{key:"M",value:function(){mn(vn(n.prototype),"M",this).call(this),this.g&&(um.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(gm);function jg(e){gm.call(this),this.h=e,this.g={}}mm(jg,gm);var qg=[];function zg(e,t,n,r){Array.isArray(n)||(n&&(qg[0]=n.toString()),n=qg);for(var i=0;i<n.length;i++){var a=fg(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Bg(e){Rm(e.g,(function(e,t){this.g.hasOwnProperty(t)&&vg(e)}),e),e.g={}}function Wg(){this.g=!0}function Kg(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Tg(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}jg.prototype.M=function(){jg.Z.M.call(this),Bg(this)},jg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wg.prototype.Aa=function(){this.g=!1},Wg.prototype.info=function(){};var Hg={},Gg=null;function Qg(){return Gg=Gg||new bg}function Yg(e){Zm.call(this,Hg.Ma,e)}function Xg(e){var t=Qg();_g(t,new Yg(t,e))}function $g(e,t){Zm.call(this,Hg.STAT_EVENT,e),this.stat=t}function Jg(e){var t=Qg();_g(t,new $g(t,e))}function Zg(e,t){Zm.call(this,Hg.Na,e),this.size=t}function ek(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return um.setTimeout((function(){e()}),t)}Hg.Ma="serverreachability",mm(Yg,Zm),Hg.STAT_EVENT="statevent",mm($g,Zm),Hg.Na="timingevent",mm(Zg,Zm);var tk={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},nk={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rk(){}function ik(e){return e.h||(e.h=e.i())}function ak(){}rk.prototype.h=null;var ok,uk={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function sk(){Zm.call(this,"d")}function ck(){Zm.call(this,"c")}function lk(){}function fk(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new jg(this),this.P=dk,e=jm?125:void 0,this.W=new Mg(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hk}function hk(){this.i=null,this.g="",this.h=!1}mm(sk,Zm),mm(ck,Zm),mm(lk,rk),lk.prototype.g=function(){return new XMLHttpRequest},lk.prototype.i=function(){return{}},ok=new lk;var dk=45e3,pk={},vk={};function yk(e,t,n){e.K=1,e.v=Vk(Ok(t)),e.s=n,e.U=!0,mk(e,null)}function mk(e,t){e.F=Date.now(),bk(e),e.A=Ok(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Jk(n.h,"t",r),e.C=0,n=e.l.H,e.h=new hk,e.g=eb(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Vg(vm(e.Ia,e,e.g),e.O)),zg(e.V,e.g,"readystatechange",e.gb),t=e.H?Pm(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Xg(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function gk(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function kk(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=wk(e,n))==vk){4==t&&(e.o=4,Jg(14),i=!1),Kg(e.j,e.m,null,"[Incomplete Response]");break}if(r==pk){e.o=4,Jg(15),Kg(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Kg(e.j,e.m,r,null),Ek(e,r)}gk(e)&&r!=vk&&r!=pk&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Jg(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hw(t),t.L=!0,Jg(11))):(Kg(e.j,e.m,n,"[Invalid Chunked Response]"),Ik(e),Tk(e))}function wk(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?vk:(n=Number(t.substring(n,r)),isNaN(n)?pk:(r+=1)+n>t.length?vk:(t=t.substr(r,n),e.C=r+n,t))}function bk(e){e.Y=Date.now()+e.P,_k(e,e.P)}function _k(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ek(vm(e.eb,e),t)}function xk(e){e.B&&(um.clearTimeout(e.B),e.B=null)}function Tk(e){0==e.l.G||e.I||Yw(e.l,e)}function Ik(e){xk(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Lg(e.W),Bg(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ek(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ow(n.i,e)))if(n.I=e.N,!e.J&&ow(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Qw(n),Fw(n)}Kw(n),Jg(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ek(vm(n.ab,n),6e3));if(1>=aw(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else $w(n,11)}else if((e.J||n.g==e)&&Qw(n),!Tm(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Sm(l,"spdy")||Sm(l,"quic")||Sm(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(uw(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Uk(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Zw(r,r.H?r.la:null,r.W),d.J){sw(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(xk(p),bk(p)),r.g=d}else Ww(r);0<n.l.length&&jw(n)}else"stop"!=a[0]&&"close"!=a[0]||$w(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?$w(n,7):Lw(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Xg(4)}catch(a){}}function Sk(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(cm(e)||"string"===typeof e)bm(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(cm(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(cm(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Ck(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ck)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Nk(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ak(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ak(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ak(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(rm=fk.prototype).setTimeout=function(e){this.P=e},rm.gb=function(e){e=e.target;var t=this.L;t&&3==Rw(e)?t.l():this.Ia(e)},rm.Ia=function(e){try{if(e==this.g)e:{var t=Rw(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||jm||this.g&&(this.h.h||this.g.ga()||Pw(this.g)))){this.I||4!=t||7==n||Xg(8==n||0>=r?3:2),xk(this);var i=this.g.ba();this.N=i;t:if(gk(this)){var a=Pw(this.g);e="";var o=a.length,u=4==Rw(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ik(this),Tk(this);var s="";break t}this.h.i=new um.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tm(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Jg(12),Ik(this),Tk(this);break e}Kg(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ek(this,i)}this.U?(kk(this,t,s),jm&&this.i&&3==t&&(zg(this.V,this.W,"tick",this.fb),this.W.start())):(Kg(this.j,this.m,s,null),Ek(this,s)),4==t&&Ik(this),this.i&&!this.I&&(4==t?Yw(this.l,this):(this.i=!1,bk(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Jg(12)):(this.o=0,Jg(13)),Ik(this),Tk(this)}}}catch(t){}},rm.fb=function(){if(this.g){var e=Rw(this.g),t=this.g.ga();this.C<t.length&&(xk(this),kk(this,e,t),this.i&&4!=e&&bk(this))}},rm.cancel=function(){this.I=!0,Ik(this)},rm.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Xg(3),Jg(17)),Ik(this),this.o=2,Tk(this)):_k(this,this.Y-e)},(rm=Ck.prototype).R=function(){Nk(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},rm.T=function(){return Nk(this),this.g.concat()},rm.get=function(e,t){return Ak(this.h,e)?this.h[e]:t},rm.set=function(e,t){Ak(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},rm.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Rk=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pk(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Pk){this.g=void 0!==t?t:e.g,Dk(this,e.j),this.s=e.s,Mk(this,e.i),Lk(this,e.m),this.l=e.l,t=e.h;var n=new Qk;n.i=t.i,t.g&&(n.g=new Ck(t.g),n.h=t.h),Fk(this,n),this.o=e.o}else e&&(n=String(e).match(Rk))?(this.g=!!t,Dk(this,n[1]||"",!0),this.s=jk(n[2]||""),Mk(this,n[3]||"",!0),Lk(this,n[4]),this.l=jk(n[5]||"",!0),Fk(this,n[6]||"",!0),this.o=jk(n[7]||"")):(this.g=!!t,this.h=new Qk(null,this.g))}function Ok(e){return new Pk(e)}function Dk(e,t,n){e.j=n?jk(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Mk(e,t,n){e.i=n?jk(t,!0):t}function Lk(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Fk(e,t,n){t instanceof Qk?(e.h=t,function(e,t){t&&!e.j&&(Yk(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Xk(this,t),Jk(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=qk(t,Hk)),e.h=new Qk(t,e.g))}function Uk(e,t,n){e.h.set(t,n)}function Vk(e){return Uk(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function jk(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qk(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,zk),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function zk(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pk.prototype.toString=function(){var e=[],t=this.j;t&&e.push(qk(t,Bk,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(qk(t,Bk,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(qk(n,"/"==n.charAt(0)?Kk:Wk,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",qk(n,Gk)),e.join("")};var Bk=/[#\/\?@]/g,Wk=/[#\?:]/g,Kk=/[#\?]/g,Hk=/[#\?@]/g,Gk=/#/g;function Qk(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Yk(e){e.g||(e.g=new Ck,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Xk(e,t){Yk(e),t=Zk(e,t),Ak(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ak((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Nk(e)))}function $k(e,t){return Yk(e),t=Zk(e,t),Ak(e.g.h,t)}function Jk(e,t,n){Xk(e,t),0<n.length&&(e.i=null,e.g.set(Zk(e,t),xm(n)),e.h+=n.length)}function Zk(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(rm=Qk.prototype).add=function(e,t){Yk(this),this.i=null,e=Zk(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},rm.forEach=function(e,t){Yk(this),this.g.forEach((function(n,r){bm(n,(function(n){e.call(t,n,r,this)}),this)}),this)},rm.T=function(){Yk(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},rm.R=function(e){Yk(this);var t=[];if("string"===typeof e)$k(this,e)&&(t=_m(t,this.g.get(Zk(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=_m(t,e[n])}return t},rm.set=function(e,t){return Yk(this),this.i=null,$k(this,e=Zk(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},rm.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},rm.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var ew=Sn((function e(t,n){In(this,e),this.h=t,this.g=n}));function tw(e){this.l=e||rw,um.PerformanceNavigationTiming?e=0<(e=um.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(um.g&&um.g.Ea&&um.g.Ea()&&um.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var nw,rw=10;function iw(e){return!!e.h||!!e.g&&e.g.size>=e.j}function aw(e){return e.h?1:e.g?e.g.size:0}function ow(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function uw(e,t){e.g?e.g.add(t):e.h=t}function sw(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function cw(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Tn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return xm(e.i)}function lw(){}function fw(){this.g=new lw}function hw(e,t,n){var r=n||"";try{Sk(e,(function(e,n){var i=e;lm(e)&&(i=Tg(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(ZM){throw t.push(r+"type="+encodeURIComponent("_badmap")),ZM}}function dw(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function pw(e){this.l=e.$b||null,this.j=e.ib||!1}function vw(e,t){bg.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=yw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tw.prototype.cancel=function(){if(this.i=cw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Tn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},lw.prototype.stringify=function(e){return um.JSON.stringify(e,void 0)},lw.prototype.parse=function(e){return um.JSON.parse(e,void 0)},mm(pw,rk),pw.prototype.g=function(){return new vw(this.l,this.j)},pw.prototype.i=(nw={},function(){return nw}),mm(vw,bg);var yw=0;function mw(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function gw(e){e.readyState=4,e.l=null,e.j=null,e.A=null,kw(e)}function kw(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(rm=vw.prototype).open=function(e,t){if(this.readyState!=yw)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,kw(this)},rm.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||um).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},rm.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gw(this)),this.readyState=yw},rm.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,kw(this)),this.g&&(this.readyState=3,kw(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof um.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;mw(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},rm.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?gw(this):kw(this),3==this.readyState&&mw(this)}},rm.Ua=function(e){this.g&&(this.response=this.responseText=e,gw(this))},rm.Ta=function(e){this.g&&(this.response=e,gw(this))},rm.ha=function(){this.g&&gw(this)},rm.setRequestHeader=function(e,t){this.v.append(e,t)},rm.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},rm.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(vw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var ww=um.JSON.parse;function bw(e){bg.call(this),this.headers=new Ck,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=_w,this.K=this.L=!1}mm(bw,bg);var _w="",xw=/^https?$/i,Tw=["POST","PUT"];function Iw(e){return"content-type"==e.toLowerCase()}function Ew(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Sw(e),Nw(e)}function Sw(e){e.D||(e.D=!0,_g(e,"complete"),_g(e,"error"))}function Cw(e){if(e.h&&"undefined"!=typeof om&&(!e.C[1]||4!=Rw(e)||2!=e.ba()))if(e.v&&4==Rw(e))Fg(e.Fa,0,e);else if(_g(e,"readystatechange"),4==Rw(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Rk)[1]||null;if(!a&&um.self&&um.self.location){var o=um.self.location.protocol;a=o.substr(0,o.length-1)}i=!xw.test(a?a.toLowerCase():"")}t=i}if(t)_g(e,"complete"),_g(e,"success");else{e.m=6;try{var u=2<Rw(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Sw(e)}}finally{Nw(e)}}}function Nw(e,t){if(e.g){Aw(e);var n=e.g,r=e.C[0]?sm:null;e.g=null,e.C=null,t||_g(e,"ready");try{n.onreadystatechange=r}catch(ZM){}}}function Aw(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(um.clearTimeout(e.A),e.A=null)}function Rw(e){return e.g?e.g.readyState:0}function Pw(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case _w:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ow(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Rm(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Uk(e,t,n))}function Dw(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Mw(e){this.za=0,this.l=[],this.h=new Wg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Dw("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Dw("baseRetryDelayMs",5e3,e),this.$a=Dw("retryDelaySeedMs",1e4,e),this.Ya=Dw("forwardChannelMaxRetries",2,e),this.ra=Dw("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new tw(e&&e.concurrentRequestLimit),this.Ca=new fw,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Lw(e){if(Uw(e),3==e.G){var t=e.V++,n=Ok(e.F);Uk(n,"SID",e.J),Uk(n,"RID",t),Uk(n,"TYPE","terminate"),zw(e,n),(t=new fk(e,e.h,t,void 0)).K=2,t.v=Vk(Ok(n)),n=!1,um.navigator&&um.navigator.sendBeacon&&(n=um.navigator.sendBeacon(t.v.toString(),"")),!n&&um.Image&&((new Image).src=t.v,n=!0),n||(t.g=eb(t.l,null),t.g.ea(t.v)),t.F=Date.now(),bk(t)}Jw(e)}function Fw(e){e.g&&(Hw(e),e.g.cancel(),e.g=null)}function Uw(e){Fw(e),e.u&&(um.clearTimeout(e.u),e.u=null),Qw(e),e.i.cancel(),e.m&&("number"===typeof e.m&&um.clearTimeout(e.m),e.m=null)}function Vw(e,t){e.l.push(new ew(e.Za++,t)),3==e.G&&jw(e)}function jw(e){iw(e.i)||e.m||(e.m=!0,Rg(e.Ha,e),e.C=0)}function qw(e,t){var n;n=t?t.m:e.V++;var r=Ok(e.F);Uk(r,"SID",e.J),Uk(r,"RID",n),Uk(r,"AID",e.U),zw(e,r),e.o&&e.s&&Ow(r,e.o,e.s),n=new fk(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Bw(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),uw(e.i,n),yk(n,r,t)}function zw(e,t){e.j&&Sk({},(function(e,n){Uk(t,n,e)}))}function Bw(e,t,n){n=Math.min(e.l.length,n);var r=e.j?vm(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{hw(l,o,"req"+c+"_")}catch(Cb){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Ww(e){e.g||e.u||(e.Y=1,Rg(e.Ga,e),e.A=0)}function Kw(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=ek(vm(e.Ga,e),Xw(e,e.A)),e.A++,!0)}function Hw(e){null!=e.B&&(um.clearTimeout(e.B),e.B=null)}function Gw(e){e.g=new fk(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ok(e.oa);Uk(t,"RID","rpc"),Uk(t,"SID",e.J),Uk(t,"CI",e.N?"0":"1"),Uk(t,"AID",e.U),zw(e,t),Uk(t,"TYPE","xmlhttp"),e.o&&e.s&&Ow(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Vk(Ok(t)),n.s=null,n.U=!0,mk(n,e)}function Qw(e){null!=e.v&&(um.clearTimeout(e.v),e.v=null)}function Yw(e,t){var n=null;if(e.g==t){Qw(e),Hw(e),e.g=null;var r=2}else{if(!ow(e.i,t))return;n=t.D,sw(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;_g(r=Qg(),new Zg(r,n,t,i)),jw(e)}else Ww(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(aw(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=ek(vm(e.Ha,e,t),Xw(e,e.C)),e.C++,!0))}(e,t)||2==r&&Kw(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:$w(e,5);break;case 4:$w(e,10);break;case 3:$w(e,6);break;default:$w(e,2)}}function Xw(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function $w(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=vm(e.jb,e);n||(n=new Pk("//www.google.com/images/cleardot.gif"),um.location&&"http"==um.location.protocol||Dk(n,"https"),Vk(n)),function(e,t){var n=new Wg;if(um.Image){var r=new Image;r.onload=ym(dw,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ym(dw,n,r,"TestLoadImage: error",!1,t),r.onabort=ym(dw,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ym(dw,n,r,"TestLoadImage: timeout",!1,t),um.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Jg(2);e.G=0,e.j&&e.j.va(t),Jw(e),Uw(e)}function Jw(e){e.G=0,e.I=-1,e.j&&(0==cw(e.i).length&&0==e.l.length||(e.i.i.length=0,xm(e.l),e.l.length=0),e.j.ua())}function Zw(e,t,n){var r=function(e){return e instanceof Pk?Ok(e):new Pk(e,void 0)}(n);if(""!=r.i)t&&Mk(r,t+"."+r.i),Lk(r,r.m);else{var i=um.location;r=function(e,t,n,r){var i=new Pk(null,void 0);return e&&Dk(i,e),t&&Mk(i,t),n&&Lk(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Rm(e.aa,(function(e,t){Uk(r,t,e)})),t=e.D,n=e.sa,t&&n&&Uk(r,t,n),Uk(r,"VER",e.ma),zw(e,r),r}function eb(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new bw(new pw({ib:!0})):new bw(e.qa)).L=e.H,t}function tb(){}function nb(){if(Um&&!(10<=Number($m)))throw Error("Environmental error: no available transport.")}function rb(e,t){bg.call(this),this.g=new Mw(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Tm(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Tm(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ob(this)}function ib(e){sk.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ab(){ck.call(this),this.status=1}function ob(e){this.g=e}(rm=bw.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ok.g(),this.C=this.u?ik(this.u):ik(ok),this.g.onreadystatechange=vm(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Ew(this,a)}e=n||"";var i=new Ck(this.headers);r&&Sk(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Iw,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=um.FormData&&e instanceof um.FormData,!(0<=wm(Tw,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Aw(this),0<this.B&&((this.K=function(e){return Um&&Ym()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vm(this.pa,this)):this.A=Fg(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ew(this,a)}},rm.pa=function(){"undefined"!=typeof om&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_g(this,"timeout"),this.abort(8))},rm.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,_g(this,"complete"),_g(this,"abort"),Nw(this))},rm.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Nw(this,!0)),bw.Z.M.call(this)},rm.Fa=function(){this.s||(this.F||this.v||this.l?Cw(this):this.cb())},rm.cb=function(){Cw(this)},rm.ba=function(){try{return 2<Rw(this)?this.g.status:-1}catch(nw){return-1}},rm.ga=function(){try{return this.g?this.g.responseText:""}catch(nw){return""}},rm.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ww(t)}},rm.Da=function(){return this.m},rm.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(rm=Mw.prototype).ma=8,rm.G=1,rm.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},rm.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new fk(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Dm(n=Pm(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Bw(this,t,r),Uk(i=Ok(this.F),"RID",e),Uk(i,"CVER",22),this.D&&Uk(i,"X-HTTP-Session-Id",this.D),zw(this,i),this.o&&n&&Ow(i,this.o,n),uw(this.i,t),this.Ra&&Uk(i,"TYPE","init"),this.ja?(Uk(i,"$req",r),Uk(i,"SID","null"),t.$=!0,yk(t,i,null)):yk(t,i,r),this.G=2}}else 3==this.G&&(e?qw(this,e):0==this.l.length||iw(this.i)||qw(this))},rm.Ga=function(){if(this.u=null,Gw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ek(vm(this.bb,this),e)}},rm.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Jg(10),Fw(this),Gw(this))},rm.ab=function(){null!=this.v&&(this.v=null,Fw(this),Kw(this),Jg(19))},rm.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Jg(2)):(this.h.info("Failed to ping google.com"),Jg(1))},(rm=tb.prototype).xa=function(){},rm.wa=function(){},rm.va=function(){},rm.ua=function(){},rm.Oa=function(){},nb.prototype.g=function(e,t){return new rb(e,t)},mm(rb,bg),rb.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Rg(vm(e.hb,e,t))),Jg(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Zw(e,null,e.W),jw(e)},rb.prototype.close=function(){Lw(this.g)},rb.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Vw(this.g,t)}else this.v?((t={}).__data__=Tg(e),Vw(this.g,t)):Vw(this.g,e)},rb.prototype.M=function(){this.g.j=null,delete this.j,Lw(this.g),delete this.g,rb.Z.M.call(this)},mm(ib,sk),mm(ab,ck),mm(ob,tb),ob.prototype.xa=function(){_g(this.g,"a")},ob.prototype.wa=function(e){_g(this.g,new ib(e))},ob.prototype.va=function(e){_g(this.g,new ab(e))},ob.prototype.ua=function(){_g(this.g,"b")},nb.prototype.createWebChannel=nb.prototype.g,rb.prototype.send=rb.prototype.u,rb.prototype.open=rb.prototype.m,rb.prototype.close=rb.prototype.close,tk.NO_ERROR=0,tk.TIMEOUT=8,tk.HTTP_ERROR=6,nk.COMPLETE="complete",ak.EventType=uk,uk.OPEN="a",uk.CLOSE="b",uk.ERROR="c",uk.MESSAGE="d",bg.prototype.listen=bg.prototype.N,bw.prototype.listenOnce=bw.prototype.O,bw.prototype.getLastError=bw.prototype.La,bw.prototype.getLastErrorCode=bw.prototype.Da,bw.prototype.getStatus=bw.prototype.ba,bw.prototype.getResponseJson=bw.prototype.Qa,bw.prototype.getResponseText=bw.prototype.ga,bw.prototype.send=bw.prototype.ea;var ub=am.createWebChannelTransport=function(){return new nb},sb=am.getStatEventTarget=function(){return Qg()},cb=am.ErrorCode=tk,lb=am.EventType=nk,fb=am.Event=Hg,hb=am.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},db=am.FetchXmlHttpFactory=pw,pb=am.WebChannel=ak,vb=am.XhrIo=bw,yb="@firebase/firestore",mb=function(){function e(t){In(this,e),this.uid=t}return Sn(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();mb.UNAUTHENTICATED=new mb(null),mb.GOOGLE_CREDENTIALS=new mb("google-credentials-uid"),mb.FIRST_PARTY=new mb("first-party-uid"),mb.MOCK_USER=new mb("mock-user");var gb="9.8.0",kb=new Mr("@firebase/firestore");function wb(){return kb.logLevel}function bb(e){if(kb.logLevel<=Cr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Tb);kb.debug.apply(kb,["Firestore (".concat(gb,"): ").concat(e)].concat(Nn(i)))}}function _b(e){if(kb.logLevel<=Cr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Tb);kb.error.apply(kb,["Firestore (".concat(gb,"): ").concat(e)].concat(Nn(i)))}}function xb(e){if(kb.logLevel<=Cr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Tb);kb.warn.apply(kb,["Firestore (".concat(gb,"): ").concat(e)].concat(Nn(i)))}}function Tb(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ib(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(gb,") INTERNAL ASSERTION FAILED: ")+e;throw _b(t),new Error(t)}function Eb(e,t){e||Ib()}function Sb(e,t){return e}var Cb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Nb=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Sn(n)}(tr),Ab=Sn((function e(){var t=this;In(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Rb=Sn((function e(t,n){In(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Pb=function(){function e(){In(this,e)}return Sn(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(mb.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ob=function(){function e(t){In(this,e),this.token=t,this.changeListener=null}return Sn(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Db=function(){function e(t){In(this,e),this.t=t,this.currentUser=mb.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Sn(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ab;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ab,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){bb("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(bb("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ab)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(bb("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Eb("string"==typeof n.accessToken),new Rb(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Eb(null===e||"string"==typeof e),new mb(e)}}]),e}(),Mb=Sn((function e(t,n,r){In(this,e),this.type="FirstParty",this.user=mb.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Lb=function(){function e(t,n,r){In(this,e),this.h=t,this.l=n,this.m=r}return Sn(e,[{key:"getToken",value:function(){return Promise.resolve(new Mb(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(mb.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Fb=Sn((function e(t){In(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ub=function(){function e(t){In(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Sn(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&bb("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,bb("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){bb("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):bb("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Eb("string"==typeof t.token),e.p=t.token,new Fb(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Vb=function(){function e(t,n){var r=this;In(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Sn(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function jb(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Vb.A=-1;var qb=function(){function e(){In(this,e)}return Sn(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=jb(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function zb(e,t){return e<t?-1:e>t?1:0}function Bb(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Wb(e){return e+"\0"}var Kb=function(){function e(t,n){if(In(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Nb(Cb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Nb(Cb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Nb(Cb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Nb(Cb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Sn(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?zb(this.nanoseconds,e.nanoseconds):zb(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Hb=function(){function e(t){In(this,e),this.timestamp=t}return Sn(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Kb(0,0))}},{key:"max",value:function(){return new e(new Kb(253402300799,999999999))}}]),e}();function Gb(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qb(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Yb(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Xb=function(){function e(t,n,r){In(this,e),void 0===n?n=0:n>t.length&&Ib(),void 0===r?r=t.length-n:r>t.length-n&&Ib(),this.segments=t,this.offset=n,this.len=r}return Sn(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),$b=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Nn(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Xb),Jb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zb=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Jb.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Nb(Cb.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Nb(Cb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Nb(Cb.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Xb),e_=function(){function e(t){In(this,e),this.fields=t,t.sort(Zb.comparator)}return Sn(e,[{key:"covers",value:function(e){var t,n=Tn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Bb(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var t_=function(e){function t(e){In(this,t),this.binaryString=e}return Sn(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return zb(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();t_.EMPTY_BYTE_STRING=new t_("");var n_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function r_(e){if(Eb(!!e),"string"==typeof e){var t=0,n=n_.exec(e);if(Eb(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:i_(e.seconds),nanos:i_(e.nanos)}}function i_(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function a_(e){return"string"==typeof e?t_.fromBase64String(e):t_.fromUint8Array(e)}function o_(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function u_(e){var t=e.mapValue.fields.__previous_value__;return o_(t)?u_(t):t}function s_(e){var t=r_(e.mapValue.fields.__local_write_time__.timestampValue);return new Kb(t.seconds,t.nanos)}var c_=Sn((function e(t,n,r,i,a,o,u,s){In(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),l_=function(){function e(t,n){In(this,e),this.projectId=t,this.database=n||"(default)"}return Sn(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function f_(e){return null==e}function h_(e){return 0===e&&1/e==-1/0}function d_(e){return"number"==typeof e&&Number.isInteger(e)&&!h_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var p_=function(){function e(t){In(this,e),this.path=t}return Sn(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===$b.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e($b.fromString(t))}},{key:"fromName",value:function(t){return new e($b.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e($b.emptyPath())}},{key:"comparator",value:function(e,t){return $b.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new $b(t.slice()))}}]),e}(),v_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},y_={nullValue:"NULL_VALUE"};function m_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?o_(e)?4:R_(e)?9007199254740991:10:Ib()}function g_(e,t){if(e===t)return!0;var n=m_(e);if(n!==m_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return s_(e).isEqual(s_(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=r_(e.timestampValue),r=r_(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return a_(e.bytesValue).isEqual(a_(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return i_(e.geoPointValue.latitude)===i_(t.geoPointValue.latitude)&&i_(e.geoPointValue.longitude)===i_(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return i_(e.integerValue)===i_(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=i_(e.doubleValue),r=i_(t.doubleValue);return n===r?h_(n)===h_(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Bb(e.arrayValue.values||[],t.arrayValue.values||[],g_);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Gb(n)!==Gb(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!g_(n[i],r[i])))return!1;return!0}(e,t);default:return Ib()}}function k_(e,t){return void 0!==(e.values||[]).find((function(e){return g_(e,t)}))}function w_(e,t){if(e===t)return 0;var n=m_(e),r=m_(t);if(n!==r)return zb(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return zb(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=i_(e.integerValue||e.doubleValue),r=i_(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return b_(e.timestampValue,t.timestampValue);case 4:return b_(s_(e),s_(t));case 5:return zb(e.stringValue,t.stringValue);case 6:return function(e,t){var n=a_(e),r=a_(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=zb(n[i],r[i]);if(0!==a)return a}return zb(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=zb(i_(e.latitude),i_(t.latitude));return 0!==n?n:zb(i_(e.longitude),i_(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=w_(n[i],r[i]);if(a)return a}return zb(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===v_.mapValue&&t===v_.mapValue)return 0;if(e===v_.mapValue)return 1;if(t===v_.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=zb(r[o],a[o]);if(0!==u)return u;var s=w_(n[r[o]],i[a[o]]);if(0!==s)return s}return zb(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ib()}}function b_(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return zb(e,t);var n=r_(e),r=r_(t),i=zb(n.seconds,r.seconds);return 0!==i?i:zb(n.nanos,r.nanos)}function __(e){return x_(e)}function x_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=r_(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?a_(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,p_.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Tn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=x_(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Tn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(x_(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ib();var t,n}function T_(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function I_(e){return!!e&&"integerValue"in e}function E_(e){return!!e&&"arrayValue"in e}function S_(e){return!!e&&"nullValue"in e}function C_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function N_(e){return!!e&&"mapValue"in e}function A_(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Qb(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=A_(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=A_(e.arrayValue.values[r]);return n}return Object.assign({},e)}function R_(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function P_(e){return"nullValue"in e?y_:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?T_(l_.empty(),p_.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ib()}function O_(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?T_(l_.empty(),p_.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?v_:Ib()}function D_(e,t){var n=w_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function M_(e,t){var n=w_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var L_=function(){function e(t){In(this,e),this.value=t}return Sn(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!N_(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=A_(t)}},{key:"setAll",value:function(e){var t=this,n=Zb.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=A_(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());N_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return g_(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];N_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Qb(t,(function(t,n){return e[t]=n}));var r,i=Tn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(A_(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function F_(e){var t=[];return Qb(e.fields,(function(e,n){var r=new Zb([e]);if(N_(n)){var i=F_(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Tn(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new e_(t)}var U_=function(){function e(t,n,r,i,a,o){In(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Sn(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=L_.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=L_.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Hb.min(),Hb.min(),L_.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Hb.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Hb.min(),L_.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Hb.min(),L_.empty(),2)}}]),e}(),V_=Sn((function e(t,n,r,i){In(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function j_(e){return e.fields.find((function(e){return 2===e.kind}))}function q_(e){return e.fields.filter((function(e){return 2!==e.kind}))}V_.UNKNOWN_ID=-1;var z_=Sn((function e(t,n){In(this,e),this.fieldPath=t,this.kind=n})),B_=function(){function e(t,n){In(this,e),this.sequenceNumber=t,this.offset=n}return Sn(e,null,[{key:"empty",value:function(){return new e(0,H_.min())}}]),e}();function W_(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Hb.fromTimestamp(1e9===r?new Kb(n+1,0):new Kb(n,r));return new H_(i,p_.empty(),t)}function K_(e){return new H_(e.readTime,e.key,-1)}var H_=function(){function e(t,n,r){In(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Sn(e,null,[{key:"min",value:function(){return new e(Hb.min(),p_.empty(),-1)}},{key:"max",value:function(){return new e(Hb.max(),p_.empty(),-1)}}]),e}();function G_(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=p_.comparator(e.documentKey,t.documentKey))?n:zb(e.largestBatchId,t.largestBatchId)}var Q_=function(){function e(t,n){In(this,e),this.comparator=t,this.root=n||X_.EMPTY}return Sn(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,X_.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,X_.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Y_(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Y_(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Y_(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Y_(this.root,e,this.comparator,!0)}}]),e}(),Y_=function(){function e(t,n,r,i){In(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Sn(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),X_=function(){function e(t,n,r,i,a){In(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Sn(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ib();if(this.right.isRed())throw Ib();var e=this.left.check();if(e!==this.right.check())throw Ib();return e+(this.isRed()?0:1)}}]),e}();X_.EMPTY=null,X_.RED=!0,X_.BLACK=!1,X_.EMPTY=new(function(){function e(){In(this,e),this.size=0}return Sn(e,[{key:"key",get:function(){throw Ib()}},{key:"value",get:function(){throw Ib()}},{key:"color",get:function(){throw Ib()}},{key:"left",get:function(){throw Ib()}},{key:"right",get:function(){throw Ib()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new X_(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var $_=function(){function e(t){In(this,e),this.comparator=t,this.data=new Q_(this.comparator)}return Sn(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new J_(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new J_(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),J_=function(){function e(t){In(this,e),this.iter=t}return Sn(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Z_(e){return e.hasNext()?e.getNext():void 0}var ex=Sn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;In(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function tx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new ex(e,t,n,r,i,a,o)}function nx(e){var t=Sb(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+__(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),f_(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return __(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return __(e)})).join(",")),t.P=n}return t.P}function rx(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!kx(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!g_(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bx(e.startAt,t.startAt)&&bx(e.endAt,t.endAt)}function ix(e){return p_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ax(e,t){return e.filters.filter((function(e){return e instanceof sx&&e.field.isEqual(t)}))}function ox(e,t,n){var r,i=y_,a=!0,o=Tn(ax(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=y_,c=!0;switch(u.op){case"<":case"<=":s=P_(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=y_}D_({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];D_({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ux(e,t,n){var r,i=v_,a=!0,o=Tn(ax(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=v_,c=!0;switch(u.op){case">=":case">":s=O_(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=v_}M_({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];M_({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var sx=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a;return In(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Sn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(w_(t,this.value)):null!==t&&m_(this.value)===m_(t)&&this.v(w_(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ib()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new cx(e,t,r):"array-contains"===t?new dx(e,r):"in"===t?new px(e,r):"not-in"===t?new vx(e,r):"array-contains-any"===t?new yx(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new lx(e,n):new fx(e,n)}}]),n}(function(){return Sn((function e(){In(this,e)}))}()),cx=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a;return In(this,n),(a=t.call(this,e,r,i)).key=p_.fromName(i.referenceValue),a}return Sn(n,[{key:"matches",value:function(e){var t=p_.comparator(e.key,this.key);return this.v(t)}}]),n}(sx),lx=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,e,"in",r)).keys=hx("in",r),i}return Sn(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(sx),fx=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,e,"not-in",r)).keys=hx("not-in",r),i}return Sn(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(sx);function hx(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return p_.fromName(e.referenceValue)}))}var dx=function(e){kn(n,e);var t=xn(n);function n(e,r){return In(this,n),t.call(this,e,"array-contains",r)}return Sn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return E_(t)&&k_(t.arrayValue,this.value)}}]),n}(sx),px=function(e){kn(n,e);var t=xn(n);function n(e,r){return In(this,n),t.call(this,e,"in",r)}return Sn(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&k_(this.value.arrayValue,t)}}]),n}(sx),vx=function(e){kn(n,e);var t=xn(n);function n(e,r){return In(this,n),t.call(this,e,"not-in",r)}return Sn(n,[{key:"matches",value:function(e){if(k_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!k_(this.value.arrayValue,t)}}]),n}(sx),yx=function(e){kn(n,e);var t=xn(n);function n(e,r){return In(this,n),t.call(this,e,"array-contains-any",r)}return Sn(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!E_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return k_(t.value.arrayValue,e)}))}}]),n}(sx),mx=Sn((function e(t,n){In(this,e),this.position=t,this.inclusive=n})),gx=Sn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";In(this,e),this.field=t,this.dir=n}));function kx(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function wx(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?p_.comparator(p_.fromName(o.referenceValue),n.key):w_(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function bx(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!g_(e.position[n],t.position[n]))return!1;return!0}var _x=Sn((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;In(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function xx(e,t,n,r,i,a,o,u){return new _x(e,t,n,r,i,a,o,u)}function Tx(e){return new _x(e)}function Ix(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Ex(e){var t,n=Tn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Sx(e){return null!==e.collectionGroup}function Cx(e){var t=Sb(e);if(null===t.D){t.D=[];var n=Ex(t),r=Ix(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new gx(n)),t.D.push(new gx(Zb.keyField(),"asc"));else{var i,a=!1,o=Tn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new gx(Zb.keyField(),s))}}}return t.D}function Nx(e){var t=Sb(e);if(!t.C)if("F"===t.limitType)t.C=tx(t.path,t.collectionGroup,Cx(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Tn(Cx(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new gx(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new mx(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new mx(t.startAt.position,t.startAt.inclusive):null;t.C=tx(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Ax(e,t,n){return new _x(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Rx(e,t){return rx(Nx(e),Nx(t))&&e.limitType===t.limitType}function Px(e){return"".concat(nx(Nx(e)),"|lt:").concat(e.limitType)}function Ox(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(__(t.value));var t})).join(", "),"]")),f_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return __(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return __(e)})).join(",")),"Target(".concat(t,")")}(Nx(e)),"; limitType=").concat(e.limitType,")")}function Dx(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):p_.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Tn(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Tn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=wx(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Cx(e),t))&&!(e.endAt&&!function(e,t,n){var r=wx(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Cx(e),t))}(e,t)}function Mx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Lx(e){return function(t,n){var r,i=!1,a=Tn(Cx(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Fx(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Fx(e,t,n){var r=e.field.isKeyField()?p_.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?w_(r,i):Ib()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ib()}}function Ux(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:h_(t)?"-0":t}}function Vx(e){return{integerValue:""+e}}function jx(e,t){return d_(t)?Vx(t):Ux(e,t)}var qx=Sn((function e(){In(this,e),this._=void 0}));function zx(e,t,n){return e instanceof Kx?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Hx?Gx(e,t):e instanceof Qx?Yx(e,t):function(e,t){var n=Wx(e,t),r=$x(n)+$x(e.k);return I_(n)&&I_(e.k)?Vx(r):Ux(e.M,r)}(e,t)}function Bx(e,t,n){return e instanceof Hx?Gx(e,t):e instanceof Qx?Yx(e,t):n}function Wx(e,t){return e instanceof Xx?I_(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Kx=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n)}(qx),Hx=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this)).elements=e,r}return Sn(n)}(qx);function Gx(e,t){var n,r=Jx(t),i=Tn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return g_(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Qx=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this)).elements=e,r}return Sn(n)}(qx);function Yx(e,t){var n,r=Jx(t),i=Tn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!g_(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Xx=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this)).M=e,i.k=r,i}return Sn(n)}(qx);function $x(e){return i_(e.integerValue||e.doubleValue)}function Jx(e){return E_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Zx=Sn((function e(t,n){In(this,e),this.field=t,this.transform=n}));var eT=Sn((function e(t,n){In(this,e),this.version=t,this.transformResults=n})),tT=function(){function e(t,n){In(this,e),this.updateTime=t,this.exists=n}return Sn(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function nT(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var rT=Sn((function e(){In(this,e)}));function iT(e,t,n){e instanceof cT?function(e,t,n){var r=e.value.clone(),i=hT(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof lT?function(e,t,n){if(nT(e.precondition,t)){var r=hT(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(fT(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function aT(e,t,n){e instanceof cT?function(e,t,n){if(nT(e.precondition,t)){var r=e.value.clone(),i=dT(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(sT(t),r).setHasLocalMutations()}}(e,t,n):e instanceof lT?function(e,t,n){if(nT(e.precondition,t)){var r=dT(e.fieldTransforms,n,t),i=t.data;i.setAll(fT(e)),i.setAll(r),t.convertToFoundDocument(sT(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){nT(e.precondition,t)&&t.convertToNoDocument(Hb.min())}(e,t)}function oT(e,t){var n,r=null,i=Tn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Wx(a.transform,o||null);null!=u&&(null==r&&(r=L_.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function uT(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Bb(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Hx&&t instanceof Hx||e instanceof Qx&&t instanceof Qx?Bb(e.elements,t.elements,g_):e instanceof Xx&&t instanceof Xx?g_(e.k,t.k):e instanceof Kx&&t instanceof Kx}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function sT(e){return e.isFoundDocument()?e.version:Hb.min()}var cT=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return In(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Sn(n)}(rT),lT=function(e){kn(n,e);var t=xn(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return In(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Sn(n)}(rT);function fT(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function hT(e,t,n){var r=new Map;Eb(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Bx(o,u,n[i]))}return r}function dT(e,t,n){var r,i=new Map,a=Tn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,zx(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var pT,vT,yT=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Sn(n)}(rT),mT=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Sn(n)}(rT),gT=Sn((function e(t){In(this,e),this.count=t}));function kT(e){switch(e){default:return Ib();case Cb.CANCELLED:case Cb.UNKNOWN:case Cb.DEADLINE_EXCEEDED:case Cb.RESOURCE_EXHAUSTED:case Cb.INTERNAL:case Cb.UNAVAILABLE:case Cb.UNAUTHENTICATED:return!1;case Cb.INVALID_ARGUMENT:case Cb.NOT_FOUND:case Cb.ALREADY_EXISTS:case Cb.PERMISSION_DENIED:case Cb.FAILED_PRECONDITION:case Cb.ABORTED:case Cb.OUT_OF_RANGE:case Cb.UNIMPLEMENTED:case Cb.DATA_LOSS:return!0}}function wT(e){if(void 0===e)return _b("GRPC error has no .code"),Cb.UNKNOWN;switch(e){case pT.OK:return Cb.OK;case pT.CANCELLED:return Cb.CANCELLED;case pT.UNKNOWN:return Cb.UNKNOWN;case pT.DEADLINE_EXCEEDED:return Cb.DEADLINE_EXCEEDED;case pT.RESOURCE_EXHAUSTED:return Cb.RESOURCE_EXHAUSTED;case pT.INTERNAL:return Cb.INTERNAL;case pT.UNAVAILABLE:return Cb.UNAVAILABLE;case pT.UNAUTHENTICATED:return Cb.UNAUTHENTICATED;case pT.INVALID_ARGUMENT:return Cb.INVALID_ARGUMENT;case pT.NOT_FOUND:return Cb.NOT_FOUND;case pT.ALREADY_EXISTS:return Cb.ALREADY_EXISTS;case pT.PERMISSION_DENIED:return Cb.PERMISSION_DENIED;case pT.FAILED_PRECONDITION:return Cb.FAILED_PRECONDITION;case pT.ABORTED:return Cb.ABORTED;case pT.OUT_OF_RANGE:return Cb.OUT_OF_RANGE;case pT.UNIMPLEMENTED:return Cb.UNIMPLEMENTED;case pT.DATA_LOSS:return Cb.DATA_LOSS;default:return Ib()}}(vT=pT||(pT={}))[vT.OK=0]="OK",vT[vT.CANCELLED=1]="CANCELLED",vT[vT.UNKNOWN=2]="UNKNOWN",vT[vT.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vT[vT.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vT[vT.NOT_FOUND=5]="NOT_FOUND",vT[vT.ALREADY_EXISTS=6]="ALREADY_EXISTS",vT[vT.PERMISSION_DENIED=7]="PERMISSION_DENIED",vT[vT.UNAUTHENTICATED=16]="UNAUTHENTICATED",vT[vT.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vT[vT.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vT[vT.ABORTED=10]="ABORTED",vT[vT.OUT_OF_RANGE=11]="OUT_OF_RANGE",vT[vT.UNIMPLEMENTED=12]="UNIMPLEMENTED",vT[vT.INTERNAL=13]="INTERNAL",vT[vT.UNAVAILABLE=14]="UNAVAILABLE",vT[vT.DATA_LOSS=15]="DATA_LOSS";var bT=function(){function e(t,n){In(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Sn(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Tn(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Qb(this.inner,(function(t,n){var r,i=Tn(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Yb(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),_T=new Q_(p_.comparator);function xT(){return _T}var TT=new Q_(p_.comparator);function IT(){for(var e=TT,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function ET(){return new bT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var ST=new Q_(p_.comparator),CT=new $_(p_.comparator);function NT(){for(var e=CT,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var AT=new $_(zb);function RT(){return AT}var PT=function(){function e(t,n,r,i,a){In(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Sn(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,OT.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Hb.min(),r,RT(),xT(),NT())}}]),e}(),OT=function(){function e(t,n,r,i,a){In(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Sn(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(t_.EMPTY_BYTE_STRING,n,NT(),NT(),NT())}}]),e}(),DT=Sn((function e(t,n,r,i){In(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),MT=Sn((function e(t,n){In(this,e),this.targetId=t,this.$=n})),LT=Sn((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t_.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;In(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),FT=function(){function e(){In(this,e),this.B=0,this.L=jT(),this.U=t_.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return Sn(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=NT(),t=NT(),n=NT();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ib()}})),new OT(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=jT()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),UT=function(){function e(t){In(this,e),this.nt=t,this.st=new Map,this.it=xT(),this.rt=VT(),this.ot=new $_(zb)}return Sn(e,[{key:"ut",value:function(e){var t,n=Tn(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=Tn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Ib()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(ix(i))if(0===n){var a=new p_(i.path);this.ct(t,a,U_.newNoDocument(a,Hb.min()))}else Eb(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&ix(a.target)){var o=new p_(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,U_.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=NT();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new PT(e,n,this.ot,this.it,r);return this.it=xT(),this.rt=VT(),this.ot=new $_(zb),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new FT,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new $_(zb),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||bb("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new FT),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function VT(){return new Q_(p_.comparator)}function jT(){return new Q_(p_.comparator)}var qT={asc:"ASCENDING",desc:"DESCENDING"},zT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BT=Sn((function e(t,n){In(this,e),this.databaseId=t,this.N=n}));function WT(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function KT(e,t){return e.N?t.toBase64():t.toUint8Array()}function HT(e,t){return WT(e,t.toTimestamp())}function GT(e){return Eb(!!e),Hb.fromTimestamp(function(e){var t=r_(e);return new Kb(t.seconds,t.nanos)}(e))}function QT(e,t){return function(e){return new $b(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function YT(e){var t=$b.fromString(e);return Eb(gI(t)),t}function XT(e,t){return QT(e.databaseId,t.path)}function $T(e,t){var n=YT(t);if(n.get(1)!==e.databaseId.projectId)throw new Nb(Cb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Nb(Cb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new p_(tI(n))}function JT(e,t){return QT(e.databaseId,t)}function ZT(e){var t=YT(e);return 4===t.length?$b.emptyPath():tI(t)}function eI(e){return new $b(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tI(e){return Eb(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function nI(e,t,n){return{name:XT(e,t),fields:n.value.mapValue.fields}}function rI(e,t,n){var r=$T(e,t.name),i=GT(t.updateTime),a=new L_({mapValue:{fields:t.fields}}),o=U_.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function iI(e,t){return"found"in t?function(e,t){Eb(!!t.found),t.found.name,t.found.updateTime;var n=$T(e,t.found.name),r=GT(t.found.updateTime),i=new L_({mapValue:{fields:t.found.fields}});return U_.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Eb(!!t.missing),Eb(!!t.readTime);var n=$T(e,t.missing),r=GT(t.readTime);return U_.newNoDocument(n,r)}(e,t):Ib()}function aI(e,t){var n;if(t instanceof cT)n={update:nI(e,t.key,t.value)};else if(t instanceof yT)n={delete:XT(e,t.key)};else if(t instanceof lT)n={update:nI(e,t.key,t.data),updateMask:mI(t.fieldMask)};else{if(!(t instanceof mT))return Ib();n={verify:XT(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Kx)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Hx)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Qx)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Xx)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Ib()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:HT(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ib()}(e,t.precondition)),n}function oI(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?tT.updateTime(GT(e.updateTime)):void 0!==e.exists?tT.exists(e.exists):tT.none()}(t.currentDocument):tT.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Eb("REQUEST_TIME"===t.setToServerValue),n=new Kx;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Hx(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Qx(i)}else"increment"in t?n=new Xx(e,t.increment):Ib();var a=Zb.fromServerFormat(t.fieldPath);return new Zx(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=$T(e,t.update.name),a=new L_({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new e_(t.map((function(e){return Zb.fromServerFormat(e)})))}(t.updateMask);return new lT(i,a,o,n,r)}return new cT(i,a,n,r)}if(t.delete){var u=$T(e,t.delete);return new yT(u,n)}if(t.verify){var s=$T(e,t.verify);return new mT(s,n)}return Ib()}function uI(e,t){return{documents:[JT(e,t.path)]}}function sI(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=JT(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=JT(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(C_(e.value))return{unaryFilter:{field:dI(e.field),op:"IS_NAN"}};if(S_(e.value))return{unaryFilter:{field:dI(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(C_(e.value))return{unaryFilter:{field:dI(e.field),op:"IS_NOT_NAN"}};if(S_(e.value))return{unaryFilter:{field:dI(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dI(e.field),op:hI(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:dI(e.field),direction:fI(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||f_(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function cI(e){var t=ZT(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Eb(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=lI(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new gx(pI(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return f_(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new mx(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new mx(n,t)}(n.endAt)),xx(t,i,u,o,s,"F",c,l)}function lI(e){return e?void 0!==e.unaryFilter?[yI(e)]:void 0!==e.fieldFilter?[vI(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return lI(e)})).reduce((function(e,t){return e.concat(t)})):Ib():[]}function fI(e){return qT[e]}function hI(e){return zT[e]}function dI(e){return{fieldPath:e.canonicalString()}}function pI(e){return Zb.fromServerFormat(e.fieldPath)}function vI(e){return sx.create(pI(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ib()}}(e.fieldFilter.op),e.fieldFilter.value)}function yI(e){switch(e.unaryFilter.op){case"IS_NAN":var t=pI(e.unaryFilter.field);return sx.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=pI(e.unaryFilter.field);return sx.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=pI(e.unaryFilter.field);return sx.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=pI(e.unaryFilter.field);return sx.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ib()}}function mI(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function gI(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function kI(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=bI(t)),t=wI(e.get(n),t);return bI(t)}function wI(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function bI(e){return e+"\x01\x01"}function _I(e){var t=e.length;if(Eb(t>=2),2===t)return Eb("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),$b.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ib(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ib()}a=o+2}return new $b(r)}var xI=["userId","batchId"];function TI(e,t){return[e,kI(t)]}function II(e,t,n){return[e,kI(t),n]}var EI={},SI=["prefixPath","collectionGroup","readTime","documentId"],CI=["prefixPath","collectionGroup","documentId"],NI=["collectionGroup","readTime","prefixPath","documentId"],AI=["canonicalId","targetId"],RI=["targetId","path"],PI=["path","targetId"],OI=["collectionId","parent"],DI=["indexId","uid"],MI=["uid","sequenceNumber"],LI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],FI=["indexId","uid","orderedDocumentKey"],UI=["userId","collectionPath","documentId"],VI=["userId","collectionPath","largestBatchId"],jI=["userId","collectionGroup","largestBatchId"],qI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),zI=[].concat(Nn(qI),["documentOverlays"]),BI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WI=[].concat(BI,["indexConfiguration","indexState","indexEntries"]),KI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",HI=function(){function e(){In(this,e),this.onCommittedListeners=[]}return Sn(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),GI=function(){function e(t){var n=this;In(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Sn(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ib(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Tn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),QI=function(){function e(t,n){var r=this;In(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Ab,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new $I(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=nE(e.target.error);r.At.reject(new $I(t,n))}}return Sn(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(bb("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new ZI(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new $I(n,t)}}}]),e}(),YI=function(){function e(t,n,r){In(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(Gn())&&_b("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Sn(e,[{key:"Nt",value:function(){var e=ke(be().mark((function e(t){var n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return bb("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new $I(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Nb(Cb.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Nb(Cb.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new $I(t,n))},i.onupgradeneeded=function(e){bb("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){bb("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ke(be().mark((function e(t,n,r,i){var a,o,u,s,c=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(be().mark((function e(){var n,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=QI.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),GI.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,bb("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return bb("SimpleDb","Removing database:",e),eE(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!er())return!1;if(e.St())return!0;var t=Gn(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/guest-book",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBCrrViO2YqLguJNUDBFrjUDo6VSCYXM-E",REACT_APP_AUTH_DOMAIN:"guest-book-8d82c.firebaseapp.com",REACT_APP_PROJECT_ID:"guest-book-8d82c",REACT_APP_STORAGE_BUCKET:"guest-book-8d82c.appspot.com",REACT_APP_MESSAGIN_ID:"1023022153488",REACT_APP_APP_ID:"1:1023022153488:web:0b9753bacc909812926f95"})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),XI=function(){function e(t){In(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return Sn(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return eE(this.Ft.delete())}}]),e}(),$I=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,Cb.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Sn(n)}(Nb);function JI(e){return"IndexedDbTransactionError"===e.name}var ZI=function(){function e(t){In(this,e),this.store=t}return Sn(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(bb("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(bb("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),eE(n)}},{key:"add",value:function(e){return bb("SimpleDb","ADD",this.store.name,e,e),eE(this.store.add(e))}},{key:"get",value:function(e){var t=this;return eE(this.store.get(e)).next((function(n){return void 0===n&&(n=null),bb("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return bb("SimpleDb","DELETE",this.store.name,e),eE(this.store.delete(e))}},{key:"count",value:function(){return bb("SimpleDb","COUNT",this.store.name),eE(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new GI((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new GI((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){bb("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new GI((function(n,r){t.onerror=function(e){var t=nE(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new GI((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new XI(i),o=t(i.primaryKey,i.value,a);if(o instanceof GI){var u=o.catch((function(e){return a.done(),GI.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return GI.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function eE(e){return new GI((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=nE(e.target.error);n(t)}}))}var tE=!1;function nE(e){var t=YI.Vt(Gn());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Nb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tE||(tE=!0,setTimeout((function(){throw r}),0)),r}}return e}var rE=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return Sn(n)}(HI);function iE(e,t){var n=Sb(e);return YI.xt(n.Ht,t)}var aE=function(){function e(t,n,r,i){In(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Sn(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&iT(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Tn(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&aT(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=Tn(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&aT(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Hb.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),NT())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Bb(this.mutations,e.mutations,(function(e,t){return uT(e,t)}))&&Bb(this.baseMutations,e.baseMutations,(function(e,t){return uT(e,t)}))}}]),e}(),oE=function(){function e(t,n,r,i){In(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Sn(e,null,[{key:"from",value:function(t,n,r){Eb(t.mutations.length===r.length);for(var i=ST,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),uE=function(){function e(t,n){In(this,e),this.largestBatchId=t,this.mutation=n}return Sn(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),sE=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hb.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Hb.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t_.EMPTY_BYTE_STRING;In(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Sn(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),cE=Sn((function e(t){In(this,e),this.Jt=t}));function lE(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:fE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:XT(e,t.key),fields:t.data.value.mapValue.fields,updateTime:WT(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:hE(t.version)};else{if(!t.isUnknownDocument())return Ib();r.unknownDocument={path:n.path.toArray(),version:hE(t.version)}}return r}function fE(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function hE(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function dE(e){var t=new Kb(e.seconds,e.nanoseconds);return Hb.fromTimestamp(t)}function pE(e,t){for(var n=(t.baseMutations||[]).map((function(t){return oI(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return oI(e.Jt,t)})),u=Kb.fromMillis(t.localWriteTimeMs);return new aE(t.batchId,u,n,o)}function vE(e){var t,n,r=dE(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?dE(e.lastLimboFreeSnapshotVersion):Hb.min();return void 0!==e.query.documents?(Eb(1===(n=e.query).documents.length),t=Nx(Tx(ZT(n.documents[0])))):t=function(e){return Nx(cI(e))}(e.query),new sE(t,e.targetId,0,e.lastListenSequenceNumber,r,i,t_.fromBase64String(e.resumeToken))}function yE(e,t){var n,r=hE(t.snapshotVersion),i=hE(t.lastLimboFreeSnapshotVersion);n=ix(t.target)?uI(e.Jt,t.target):sI(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:nx(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function mE(e){var t=cI({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ax(t,t.limit,"L"):t}function gE(e,t){return new uE(t.largestBatchId,oI(e.Jt,t.overlayMutation))}function kE(e,t){var n=t.path.lastSegment();return[e,kI(t.path.popLast()),n]}var wE=function(){function e(){In(this,e)}return Sn(e,[{key:"getBundleMetadata",value:function(e,t){return bE(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:dE(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return bE(e).put({bundleId:(n=t).id,createTime:hE(GT(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return _E(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:mE(t.bundledQuery),readTime:dE(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return _E(e).put(function(e){return{name:e.name,readTime:hE(GT(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function bE(e){return iE(e,"bundles")}function _E(e){return iE(e,"namedQueries")}var xE=function(){function e(t,n){In(this,e),this.M=t,this.userId=n}return Sn(e,[{key:"getOverlay",value:function(e,t){var n=this;return TE(e).get(kE(this.userId,t)).next((function(e){return e?gE(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new uE(t,a);i.push(r.Xt(e,o))})),GI.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(kI(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(TE(e).Qt("collectionPathOverlayIndex",i))})),GI.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=ET(),a=kI(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return TE(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=Tn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=gE(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=ET(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return TE(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=gE(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return TE(e).put(function(e,t,n){var r=s(kE(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:aI(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function TE(e){return iE(e,"documentOverlays")}var IE=function(){function e(){In(this,e)}return Sn(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(i_(e.integerValue));else if("doubleValue"in e){var n=i_(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),h_(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(a_(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?R_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Ib()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=Tn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),p_.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function EE(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function SE(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=EE(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}IE.fe=new IE;var CE=function(){function e(){In(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Sn(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=Tn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=Tn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=SE(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=SE(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),NE=function(){function e(t){In(this,e),this.De=t}return Sn(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),AE=function(){function e(t){In(this,e),this.De=t}return Sn(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),RE=function(){function e(){In(this,e),this.De=new CE,this.Ce=new NE(this.De),this.xe=new AE(this.De)}return Sn(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),PE=function(){function e(t,n,r,i){In(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Sn(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function OE(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=DE(e.arrayValue,t.arrayValue))?n:0!==(n=DE(e.directionalValue,t.directionalValue))?n:p_.comparator(e.documentKey,t.documentKey)}function DE(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var ME=function(){function e(t){In(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=Tn(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Sn(e,[{key:"$e",value:function(e){var t=j_(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=q_(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=Tn(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),LE=function(){function e(){In(this,e),this.qe=new FE}return Sn(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),GI.resolve()}},{key:"getCollectionParents",value:function(e,t){return GI.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return GI.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return GI.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return GI.resolve(null)}},{key:"getIndexType",value:function(e,t){return GI.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return GI.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return GI.resolve(null)}},{key:"getMinOffset",value:function(e,t){return GI.resolve(H_.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return GI.resolve()}},{key:"updateIndexEntries",value:function(e,t){return GI.resolve()}}]),e}(),FE=function(){function e(){In(this,e),this.index={}}return Sn(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new $_($b.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new $_($b.comparator)).toArray()}}]),e}(),UE=new Uint8Array(0),VE=function(){function e(t,n){In(this,e),this.user=t,this.databaseId=n,this.Ke=new FE,this.Ge=new bT((function(e){return nx(e)}),(function(e,t){return rx(e,t)})),this.uid=t.uid||""}return Sn(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:kI(i)};return jE(e).put(a)}return GI.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Wb(t),""],!1,!0);return jE(e).qt(r).next((function(e){var r,i=Tn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(_I(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=zE(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=zE(e),r=BE(e),i=qE(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=qE(e),i=!0,a=new Map;return GI.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=NT(),o=[];return GI.forEach(a,(function(i,a){var u;bb("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(nx(t)));var s=function(e,t){var n=j_(t);if(void 0===n)return null;var r,i=Tn(ax(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Tn(q_(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Tn(ax(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Tn(q_(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ox(e,o.fieldPath,e.startAt):ux(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new mx(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=Tn(q_(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ux(e,o.fieldPath,e.endAt):ox(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new mx(r,i)}(a,i),h=n.We(i,a,l),d=n.We(i,a,f),p=n.ze(i,a,c),v=n.He(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return GI.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=p_.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return GI.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.Je(t[s/c]):UE,h=u.Ye(e,f,n[s%c],r),d=u.Xe(e,f,i[s%c],a),p=o.map((function(t){return u.Ye(e,f,t,!0)}));l.push.apply(l,Nn(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"Ye",value:function(e,t,n,r){var i=new PE(e,p_.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new PE(e,p_.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new ME(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Tn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return GI.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new $_(Zb.comparator),r=!1,i=Tn(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Tn(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new RE,i=Tn(q_(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);IE.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new RE;return IE.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new RE;return IE.fe.Zt(T_(this.databaseId,t),n.Ne(function(e){var t=q_(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new RE);var i,a=0,o=Tn(q_(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Tn(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&E_(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);IE.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=Nn(e),a=[],o=Tn(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Tn(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new RE;f.seed(l.Se()),IE.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof sx&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=zE(e),i=BE(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return GI.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new B_(t.sequenceNumber,new H_(dE(t.readTime),new p_(_I(t.documentKey)),t.largestBatchId)):B_.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new z_(Zb.fromServerFormat(n),r)}));return new V_(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:zb(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=zE(e),a=BE(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return GI.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:hE(r.readTime),documentKey:kI(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return GI.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?GI.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),GI.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?GI.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return qE(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return qE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=qE(e),i=new $_(OE);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new PE(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new $_(OE),r=this.Ze(t,e);if(null==r)return n;var i=j_(t);if(null!=i){var a=e.data.field(i.fieldPath);if(E_(a)){var o,u=Tn(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new PE(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new PE(t.indexId,e.key,UE,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;bb("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Z_(a),s=Z_(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Z_(o)):l?(i(u),u=Z_(a)):(u=Z_(a),s=Z_(o))}}(r,i,OE,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),GI.waitFor(o)}},{key:"rn",value:function(e){var t=1;return BE(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return OE(e,t)})).filter((function(e,t,n){return!t||0!==OE(e,n[t-1])}));var r=[];r.push(e);var i,a=Tn(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=OE(o,e),s=OE(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,UE,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,UE,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return GI.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||G_(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=H_.min()}))})).next((function(){return n}))}}]),e}();function jE(e){return iE(e,"collectionParents")}function qE(e){return iE(e,"indexEntries")}function zE(e){return iE(e,"indexConfiguration")}function BE(e){return iE(e,"indexState")}var WE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KE=function(){function e(t,n,r){In(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Sn(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function HE(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Eb(1===u)})));var c,l=[],f=Tn(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=II(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return GI.waitFor(a).next((function(){return l}))}function GE(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ib();t=e.noDocument}return JSON.stringify(t).length}KE.DEFAULT_COLLECTION_PERCENTILE=10,KE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,KE.DEFAULT=new KE(41943040,KE.DEFAULT_COLLECTION_PERCENTILE,KE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),KE.DISABLED=new KE(-1,0,0);var QE=function(){function e(t,n,r,i){In(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return Sn(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return XE(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=$E(e),o=XE(e);return o.add({}).next((function(u){Eb("number"==typeof u);var s,c=new aE(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return aI(e.Jt,t)})),i=n.mutations.map((function(t){return aI(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new $_((function(e,t){return zb(e.canonicalString(),t.canonicalString())})),d=Tn(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=II(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,EI))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),GI.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return XE(e).get(t).next((function(e){return e?(Eb(e.userId===n.userId),pE(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?GI.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return XE(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Eb(t.batchId>=r),a=pE(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return XE(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return XE(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return pE(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=TI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return $E(e).Wt({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=_I(l);if(c===n.userId&&t.path.isEqual(h))return XE(e).get(f).next((function(e){if(!e)throw Ib();Eb(e.userId===n.userId),a.push(pE(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $_(zb),i=[];return t.forEach((function(t){var a=TI(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=$E(e).Wt({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=_I(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),GI.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=TI(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new $_(zb);return $E(e).Wt({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=_I(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(XE(e).get(t).next((function(e){if(null===e)throw Ib();Eb(e.userId===n.userId),r.push(pE(n.M,e))})))})),GI.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return HE(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),GI.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return GI.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return $E(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=_I(e[1]);i.push(a)}else r.done()})).next((function(){Eb(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return YE(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return JE(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return Eb(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function YE(e,t,n){var r=TI(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return $E(e).Wt({range:a,jt:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function XE(e){return iE(e,"mutations")}function $E(e){return iE(e,"documentMutations")}function JE(e){return iE(e,"mutationQueues")}var ZE=function(){function e(t){In(this,e),this.mn=t}return Sn(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),eS=function(){function e(t,n){In(this,e),this.referenceDelegate=t,this.M=n}return Sn(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new ZE(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Hb.fromTimestamp(new Kb(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return tS(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return Eb(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return tS(e).Wt((function(o,u){var s=vE(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return GI.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return tS(e).Wt((function(e,n){var r=vE(n);t(r)}))}},{key:"pn",value:function(e){return nS(e).get("targetGlobalKey").next((function(e){return Eb(null!==e),e}))}},{key:"In",value:function(e,t){return nS(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return tS(e).put(yE(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=nx(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return tS(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=vE(n);rx(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=rS(e);return t.forEach((function(t){var o=kI(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),GI.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=rS(e);return GI.forEach(t,(function(t){var a=kI(t.path);return GI.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=rS(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=rS(e),i=NT();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=_I(e[1]),a=new p_(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=kI(t.path),r=IDBKeyRange.bound([n],[Wb(n)],!1,!0),i=0;return rS(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return tS(e).get(t).next((function(e){return e?vE(e):null}))}}]),e}();function tS(e){return iE(e,"targets")}function nS(e){return iE(e,"targetGlobal")}function rS(e){return iE(e,"targetDocuments")}function iS(e){return aS.apply(this,arguments)}function aS(){return aS=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Cb.FAILED_PRECONDITION&&t.message===KI){e.next=2;break}throw t;case 2:bb("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),aS.apply(this,arguments)}function oS(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=zb(r,o);return 0===c?zb(i,u):c}var uS=function(){function e(t){In(this,e),this.An=t,this.buffer=new $_(oS),this.Rn=0}return Sn(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();oS(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),sS=function(){function e(t,n){In(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return Sn(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;bb("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!JI(n.t0)){n.next=12;break}bb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,iS(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),cS=function(){function e(t,n){In(this,e),this.Dn=t,this.params=n}return Sn(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return GI.resolve(Vb.A);var r=new uS(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(bb("LruGarbageCollector","Garbage collection skipped; disabled"),GI.resolve(WE)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(bb("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),WE):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(bb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),wb()<=Cr.DEBUG&&bb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),GI.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),lS=function(){function e(t,n){In(this,e),this.db=t,this.garbageCollector=function(e,t){return new cS(e,t)}(this,n)}return Sn(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return fS(e,n)}},{key:"removeReference",value:function(e,t,n){return fS(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return fS(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return JE(e).zt((function(r){return YE(e,r,t).next((function(e){return e&&(n=!0),GI.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Hb.min()),rS(e).delete([0,kI(o.path)])}))}));i.push(s)}})).next((function(){return GI.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return fS(e,t)}},{key:"Mn",value:function(e,t){var n,r=rS(e),i=Vb.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Vb.A&&t(new p_(_I(n)),i),i=c,n=u):i=Vb.A})).next((function(){i!==Vb.A&&t(new p_(_I(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function fS(e,t){return rS(e).put(function(e,t){return{targetId:0,path:kI(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var hS=function(){function e(){In(this,e),this.changes=new bT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Sn(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,U_.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?GI.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),dS=function(){function e(t){In(this,e),this.M=t}return Sn(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return yS(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return yS(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],fE(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=U_.newInvalidDocument(t);return yS(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(mS(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:U_.newInvalidDocument(t)};return yS(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(mS(t))},(function(e,i){r={document:n.$n(t,i),size:GE(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=xT();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=xT(),i=new Q_(p_.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,GE(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return GI.resolve();var r=new $_(kS);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(mS(r.first()),mS(r.last())),a=r.getIterator(),o=a.getNext();return yS(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=p_.fromSegments([].concat(Nn(t.prefixPath),[t.collectionGroup,t.documentId]));o&&kS(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(mS(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),fE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yS(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=xT(),i=Tn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(p_.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=xT(),o=gS(t,n),u=gS(t,H_.max());return yS(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(p_.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new pS(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return vS(e).get("remoteDocumentGlobalKey").next((function(e){return Eb(!!e),e}))}},{key:"Fn",value:function(e,t){return vS(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=rI(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=p_.fromSegments(t.noDocument.path),i=dE(t.noDocument.readTime);n=U_.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ib();var a=p_.fromSegments(t.unknownDocument.path),o=dE(t.unknownDocument.version);n=U_.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Kb(e[0],e[1]);return Hb.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Hb.min()))return n}return U_.newInvalidDocument(e)}}]),e}(),pS=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new bT((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Sn(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new $_((function(e,t){return zb(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=lE(t.Kn.M,o);i=i.add(a.path.popLast());var c=GE(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=lE(t.Kn.M,o.convertToNoDocument(Hb.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),GI.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(hS);function vS(e){return iE(e,"remoteDocumentGlobal")}function yS(e){return iE(e,"remoteDocumentsV14")}function mS(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function gS(e,t){var n=t.documentKey.path.toArray();return[e,fE(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function kS(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=zb(n[a],r[a]))return i;return(i=zb(n.length,r.length))||((i=zb(n[n.length-2],r[r.length-2]))||zb(n[n.length-1],r[r.length-1]))}var wS=function(){function e(t){In(this,e),this.M=t}return Sn(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new QI("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xI,{unique:!0}),e.createObjectStore("documentMutations")}(e),bS(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=GI.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),bS(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Hb.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xI,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return GI.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:UI});t.createIndex("collectionPathOverlayIndex",VI,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",jI,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:SI});t.createIndex("documentKeyIndex",CI),t.createIndex("collectionGroupIndex",NI)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:DI}).createIndex("sequenceNumberIndex",MI,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:LI}).createIndex("documentKeyIndex",FI,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=GE(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return GI.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return GI.forEach(r,(function(r){Eb(r.userId===n.userId);var i=pE(t.M,r);return HE(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new $b(n),o=function(e){return[0,kI(e)]}(a);r.push(t.get(o).next((function(n){return n?GI.resolve():function(n){return t.put({targetId:0,path:kI(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return GI.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:OI});var n=t.store("collectionParents"),r=new FE,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:kI(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new $b(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],_I(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=vE(r),a=yE(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new p_($b.fromString(i.document.name).popFirst(5)):i.noDocument?p_.fromSegments(i.noDocument.path):i.unknownDocument?p_.fromSegments(i.unknownDocument.path):Ib()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return GI.waitFor(r)}))}}]),e}();function bS(e){e.createObjectStore("targetDocuments",{keyPath:RI}).createIndex("documentTargetsIndex",PI,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",AI,{unique:!0}),e.createObjectStore("targetGlobal")}var _S="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xS=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(In(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new Nb(Cb.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lS(this,i),this.hs=n+"main",this.M=new cE(s),this.ls=new YI(this.hs,this.ts,new wS(this.M)),this.fs=new eS(this.referenceDelegate,this.M),this.ds=function(e){return new dS(e)}(this.M),this._s=new wE,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&_b("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Sn(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Nb(Cb.FAILED_PRECONDITION,_S);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Vb(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=ke(be().mark((function n(r){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=ke(be().mark((function t(n){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return IS(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(JI(t))return bb("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return bb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return TS(e).get("owner").next((function(e){return GI.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return IS(e).delete(this.clientId)}},{key:"vs",value:function(){var e=ke(be().mark((function e(){var t,n,r,i,a=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=iE(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return GI.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=Tn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?GI.resolve(!0):TS(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new Nb(Cb.FAILED_PRECONDITION,_S);return!1}}return!(!t.networkEnabled||!t.inForeground)||IS(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&bb("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ke(be().mark((function e(){var t=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new rE(e,Vb.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return IS(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return QE.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new VE(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return xE.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;bb("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?WI:13===i?BI:12===i?zI:11===i?qI:void Ib();return this.ls.runTransaction(e,o,u,(function(i){return a=new rE(i,r.es?r.es.next():Vb.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw _b("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new Nb(Cb.FAILED_PRECONDITION,KI);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return TS(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Nb(Cb.FAILED_PRECONDITION,_S)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return TS(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=TS(e);return n.get("owner").next((function(e){return t.Ps(e)?(bb("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):GI.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(_b("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!Yn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return bb("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return _b("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(mm){_b("Failed to set zombie client id.",mm)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(mm){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return YI.vt()}}]),e}();function TS(e){return iE(e,"owner")}function IS(e){return iE(e,"clientMetadata")}function ES(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var SS=function(){function e(t,n,r){In(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return Sn(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=Tn(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=Tn(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return p_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Sx(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new p_(t)).next((function(e){var t=IT();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=IT();return this.indexManager.getCollectionParents(e,i).next((function(o){return GI.forEach(o,(function(o){var u=function(e,t){return new _x(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=Tn(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=Tn(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=U_.newInvalidDocument(s),r=r.insert(s,c)),aT(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Dx(t,n)||(r=r.remove(e))})),r}))}}]),e}(),CS=function(){function e(t,n,r,i){In(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return Sn(e,null,[{key:"Ys",value:function(t,n){var r,i=NT(),a=NT(),o=Tn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),NS=function(){function e(){In(this,e),this.Xs=!1}return Sn(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return GI.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Hb.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(wb()<=Cr.DEBUG&&bb("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ox(t)),i.ri(e,o,t,W_(r,-1)))}))}},{key:"si",value:function(e,t){var n=new $_(Lx(e));return t.forEach((function(t,r){Dx(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return wb()<=Cr.DEBUG&&bb("QueryEngine","Using full collection scan to execute query:",Ox(t)),this.Zs.Qs(e,t,H_.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),AS=function(){function e(t,n,r,i){In(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new Q_(zb),this.ai=new bT((function(e){return nx(e)}),rx),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return Sn(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new SS(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function RS(e,t,n,r){return new AS(e,t,n,r)}function PS(e,t){return OS.apply(this,arguments)}function OS(){return OS=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sb(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=NT(),s=Tn(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=Tn(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Tn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Tn(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.fi.Ks(e,u).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function DS(e,t){var n=Sb(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=GI.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Eb(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function MS(e){var t=Sb(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function LS(e,t){var n=Sb(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(t_.EMPTY_BYTE_STRING,Hb.min()).withLastLimboFreeSnapshotVersion(Hb.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=xT();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(FS(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Hb.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return GI.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ui=i,e}))}function FS(e,t,n){var r=NT();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=xT();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Hb.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):bb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function US(e,t){var n=Sb(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function VS(e,t){var n=Sb(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,GI.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new sE(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function jS(e,t,n){return qS.apply(this,arguments)}function qS(){return qS=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Sb(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),JI(e.t1)){e.next=12;break}throw e.t1;case 12:bb("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),qS.apply(this,arguments)}function zS(e,t,n){var r=Sb(e),i=Hb.min(),a=NT();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Sb(e),i=r.ai.get(n);return void 0!==i?GI.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,Nx(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Hb.min(),n?a:NT())})).next((function(e){return KS(r,Mx(t),e),{documents:e,_i:a}}))}))}function BS(e,t){var n=Sb(e),r=Sb(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function WS(e,t){var n=Sb(e),r=n.ci.get(t)||Hb.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,W_(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return KS(n,t,e),e}))}function KS(e,t,n){var r=Hb.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function HS(e,t,n,r){return GS.apply(this,arguments)}function GS(){return GS=ke(be().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Sb(t),o=NT(),u=xT(),s=Tn(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,VS(a,function(e){return Nx(Tx($b.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return FS(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),GS.apply(this,arguments)}function QS(e,t){return YS.apply(this,arguments)}function YS(){return YS=ke(be().mark((function e(t,n){var r,i,a,o=arguments;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:NT(),e.next=3,VS(t,Nx(mE(n.bundledQuery)));case 3:return i=e.sent,a=Sb(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=GT(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(t_.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),YS.apply(this,arguments)}var XS=function(){function e(t){In(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return Sn(e,[{key:"getBundleMetadata",value:function(e,t){return GI.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:GT(n.createTime)}),GI.resolve()}},{key:"getNamedQuery",value:function(e,t){return GI.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:mE(e.bundledQuery),readTime:GT(e.readTime)}}(t)),GI.resolve()}}]),e}(),$S=function(){function e(){In(this,e),this.overlays=new Q_(p_.comparator),this.Ii=new Map}return Sn(e,[{key:"getOverlay",value:function(e,t){return GI.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),GI.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),GI.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=ET(),i=t.length+1,a=new p_(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return GI.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Q_((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=ET(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=ET(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return GI.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new uE(t,n));var a=this.Ii.get(t);void 0===a&&(a=NT(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),JS=function(){function e(){In(this,e),this.Ti=new $_(ZS.Ei),this.Ai=new $_(ZS.Ri)}return Sn(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ZS(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new ZS(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new p_(new $b([])),r=new ZS(n,e),i=new ZS(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new p_(new $b([])),n=new ZS(t,e),r=new ZS(t,e+1),i=NT();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ZS(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ZS=function(){function e(t,n){In(this,e),this.key=t,this.Ci=n}return Sn(e,null,[{key:"Ei",value:function(e,t){return p_.comparator(e.key,t.key)||zb(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return zb(e.Ci,t.Ci)||p_.comparator(e.key,t.key)}}]),e}(),eC=function(){function e(t,n){In(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new $_(ZS.Ei)}return Sn(e,[{key:"checkEmpty",value:function(e){return GI.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new aE(i,t,n,r);this.Bs.push(a);var o,u=Tn(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new ZS(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return GI.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return GI.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return GI.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return GI.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return GI.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ZS(t,0),i=new ZS(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),GI.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $_(zb);return t.forEach((function(e){var t=new ZS(e,0),i=new ZS(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),GI.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;p_.isDocumentKey(i)||(i=i.child(""));var a=new ZS(new p_(i),0),o=new $_(zb);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),GI.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Eb(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return GI.forEach(t.mutations,(function(i){var a=new ZS(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ZS(t,0),r=this.Ni.firstAfterOrEqual(n);return GI.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,GI.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),tC=function(){function e(t){In(this,e),this.$i=t,this.docs=new Q_(p_.comparator),this.size=0}return Sn(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return GI.resolve(n?n.document.mutableCopy():U_.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=xT();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():U_.newInvalidDocument(e))})),GI.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=xT(),i=new p_(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||G_(K_(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return GI.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ib()}},{key:"Bi",value:function(e,t){return GI.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new nC(this)}},{key:"getSize",value:function(e){return GI.resolve(this.size)}}]),e}(),nC=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this)).Kn=e,r}return Sn(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),GI.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(hS),rC=function(){function e(t){In(this,e),this.persistence=t,this.Li=new bT((function(e){return nx(e)}),rx),this.lastRemoteSnapshotVersion=Hb.min(),this.highestTargetId=0,this.Ui=0,this.qi=new JS,this.targetCount=0,this.Ki=ZE.gn()}return Sn(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),GI.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return GI.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return GI.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),GI.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),GI.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new ZE(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,GI.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),GI.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,GI.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),GI.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return GI.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return GI.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),GI.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),GI.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),GI.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return GI.resolve(n)}},{key:"containsKey",value:function(e,t){return GI.resolve(this.qi.containsKey(t))}}]),e}(),iC=function(){function e(t,n){var r=this;In(this,e),this.Gi={},this.overlays={},this.es=new Vb(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new rC(this),this.indexManager=new LE,this.ds=new tC((function(e){return r.referenceDelegate.Qi(e)})),this.M=new cE(n),this._s=new XS(this.M)}return Sn(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new $S,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new eC(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;bb("MemoryPersistence","Starting transaction:",e);var i=new aC(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return GI.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),aC=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Sn(n)}(HI),oC=function(){function e(t){In(this,e),this.persistence=t,this.Hi=new JS,this.Ji=null}return Sn(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw Ib()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),GI.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),GI.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),GI.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return GI.forEach(this.Xi,(function(r){var i=p_.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Hb.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return GI.or([function(){return GI.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function uC(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function sC(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function cC(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var lC=function(){function e(t,n,r,i){In(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Sn(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Nb(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(_b("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),fC=function(){function e(t,n,r){In(this,e),this.targetId=t,this.state=n,this.error=r}return Sn(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Nb(i.error.code,i.error.message))),a?new e(t,i.state,r):(_b("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),hC=function(){function e(t,n){In(this,e),this.clientId=t,this.activeTargetIds=n}return Sn(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=RT(),o=0;i&&o<r.activeTargetIds.length;++o)i=d_(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(_b("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),dC=function(){function e(t,n){In(this,e),this.clientId=t,this.onlineState=n}return Sn(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(_b("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),pC=function(){function e(){In(this,e),this.activeTargetIds=RT()}return Sn(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),vC=function(){function e(t,n,r,i,a){In(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Q_(zb),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=uC(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new pC),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return Sn(e,[{key:"start",value:function(){var e=ke(be().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=Tn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(uC(this.persistenceKey,i)))&&(o=hC.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(u=this.storage.getItem(this.mr))&&(s=this.pr(u))&&this.Ir(s),c=Tn(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ur(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(cC(this.persistenceKey,e));if(n){var r=fC.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(cC(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return bb("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){bb("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){bb("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(bb("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void _b("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(ke(be().mark((function e(){var r,i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(u));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}s=function(e){var t=Vb.A;if(null!=e)try{var n=JSON.parse(e);Eb("number"==typeof n),t=n}catch(e){_b("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Vb.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new lC(this.currentUser,e,t,n),i=sC(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=sC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=cC(this.persistenceKey,e),i=new fC(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return hC.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return lC.tr(new mb(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return fC.tr(r,t)}},{key:"pr",value:function(e){return dC.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:bb("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Lr(o,u).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=RT();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),yC=function(){function e(){In(this,e),this.Ur=new pC,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Sn(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new pC,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),mC=function(){function e(){In(this,e)}return Sn(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),gC=function(){function e(){var t=this;In(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return Sn(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){bb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Tn(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){bb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Tn(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),kC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},wC=function(){function e(t){In(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return Sn(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),bC=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Sn(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new vb;o.listenOnce(lb.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case cb.NO_ERROR:var t=o.getResponseJson();bb("Connection","XHR received:",JSON.stringify(t)),i(t);break;case cb.TIMEOUT:bb("Connection",'RPC "'+e+'" timed out'),a(new Nb(Cb.DEADLINE_EXCEEDED,"Request time out"));break;case cb.HTTP_ERROR:var n=o.getStatus();if(bb("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Cb).indexOf(t)>=0?t:Cb.UNKNOWN}(r.status);a(new Nb(u,r.message))}else a(new Nb(Cb.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Nb(Cb.UNAVAILABLE,"Connection failed."));break;default:Ib()}}finally{bb("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ub(),a=sb(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new db({})),this.lo(o.initMessageHeaders,t,n),Qn()||$n()||Gn().indexOf("Electron/")>=0||Jn()||Gn().indexOf("MSAppHost/")>=0||Xn()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");bb("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new wC({Jr:function(e){l?bb("Connection","Not sending because WebChannel is closed:",e):(c||(bb("Connection","Opening WebChannel transport."),s.open(),c=!0),bb("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,pb.EventType.OPEN,(function(){l||bb("Connection","WebChannel transport opened.")})),h(s,pb.EventType.CLOSE,(function(){l||(l=!0,bb("Connection","WebChannel transport closed"),f.ro())})),h(s,pb.EventType.ERROR,(function(e){l||(l=!0,xb("Connection","WebChannel transport errored:",e),f.ro(new Nb(Cb.UNAVAILABLE,"The operation could not be completed")))})),h(s,pb.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Eb(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){bb("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=pT[e];if(void 0!==t)return wT(t)}(a),u=i.message;void 0===o&&(o=Cb.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new Nb(o,u)),s.close()}else bb("Connection","WebChannel received:",n),f.oo(n)}})),h(a,fb.STAT_EVENT,(function(e){e.stat===hb.PROXY?bb("Connection","Detected buffering proxy"):e.stat===hb.NOPROXY&&bb("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){In(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Sn(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);bb("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return bb("RestConnection","Received: ",e),e}),(function(t){throw xb("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+gb,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=kC[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function _C(){return"undefined"!=typeof window?window:null}function xC(){return"undefined"!=typeof document?document:null}function TC(e){return new BT(e,!0)}var IC=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;In(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return Sn(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&bb("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),EC=function(){function e(t,n,r,i,a,o,u,s){In(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new IC(t,n)}return Sn(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===Cb.RESOURCE_EXHAUSTED?(_b(n.toString()),_b("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===Cb.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new Nb(Cb.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return bb("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(bb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),SC=function(e){kn(n,e);var t=xn(n);function n(e,r,i,a,o,u){var s;return In(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return Sn(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ib()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Eb(void 0===t||"string"==typeof t),t_.fromBase64String(t||"")):(Eb(void 0===t||t instanceof Uint8Array),t_.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Cb.UNKNOWN:wT(e.code);return new Nb(t,e.message||"")}(o);n=new LT(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=$T(e,s.document.name),l=GT(s.document.updateTime),f=new L_({mapValue:{fields:s.document.fields}}),h=U_.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new DT(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=$T(e,v.document),m=v.readTime?GT(v.readTime):Hb.min(),g=U_.newNoDocument(y,m),k=v.removedTargetIds||[];n=new DT([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=$T(e,w.document),_=w.removedTargetIds||[];n=new DT([],_,b,null)}else{if(!("filter"in t))return Ib();t.filter;var x=t.filter;x.targetId;var T=x.count||0,I=new gT(T),E=x.targetId;n=new MT(E,I)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Hb.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Hb.min():t.readTime?GT(t.readTime):Hb.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=eI(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=ix(r)?{documents:uI(e,r)}:{query:sI(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=KT(e,t.resumeToken):t.snapshotVersion.compareTo(Hb.min())>0&&(n.readTime=WT(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ib()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=eI(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(EC),CC=function(e){kn(n,e);var t=xn(n);function n(e,r,i,a,o,u){var s;return In(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Yo=!1,s}return Sn(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,mn(vn(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Eb(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(Eb(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?GT(e.updateTime):GT(t);return n.isEqual(Hb.min())&&(n=GT(t)),new eT(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=GT(e.commitTime);return this.listener.tu(n,t)}return Eb(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=eI(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return aI(t.M,e)}))};this.Lo(n)}}]),n}(EC),NC=function(e){kn(n,e);var t=xn(n);function n(e,r,i,a){var o;return In(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return Sn(n,[{key:"iu",value:function(){if(this.su)throw new Nb(Cb.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.So.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Cb.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Nb(Cb.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.So._o(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Cb.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Nb(Cb.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return Sn((function e(){In(this,e)}))}()),AC=function(){function e(t,n){In(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return Sn(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(_b(t),this.uu=!1):bb("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),RC=Sn((function e(t,n,r,i,a){var o=this;In(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=zC(o),!e.t0){e.next=5;break}return bb("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Sb(t)).wu.add(4),e.next=4,DC(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,PC(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new AC(r,i)}));function PC(e){return OC.apply(this,arguments)}function OC(){return OC=ke(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zC(t)){e.next=18;break}n=Tn(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),OC.apply(this,arguments)}function DC(e){return MC.apply(this,arguments)}function MC(){return MC=ke(be().mark((function e(t){var n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Tn(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),MC.apply(this,arguments)}function LC(e,t){var n=Sb(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),qC(n)?jC(n):mN(n).Mo()&&UC(n,t))}function FC(e,t){var n=Sb(e),r=mN(n);n._u.delete(t),r.Mo()&&VC(n,t),0===n._u.size&&(r.Mo()?r.$o():zC(n)&&n.yu.set("Unknown"))}function UC(e,t){e.pu.Z(t.targetId),mN(e).Ho(t)}function VC(e,t){e.pu.Z(t),mN(e).Jo(t)}function jC(e){e.pu=new UT({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),mN(e).start(),e.yu.au()}function qC(e){return zC(e)&&!mN(e).ko()&&e._u.size>0}function zC(e){return 0===Sb(e).wu.size}function BC(e){e.pu=void 0}function WC(e){return KC.apply(this,arguments)}function KC(){return KC=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){UC(t,e)}));case 1:case"end":return e.stop()}}),e)}))),KC.apply(this,arguments)}function HC(e,t){return GC.apply(this,arguments)}function GC(){return GC=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:BC(t),qC(t)?(t.yu.lu(n),jC(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),GC.apply(this,arguments)}function QC(e,t,n){return YC.apply(this,arguments)}function YC(){return YC=ke(be().mark((function e(t,n,r){var i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof LT&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Tn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),bb("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,XC(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof DT?t.pu.ut(n):n instanceof MT?t.pu._t(n):t.pu.ht(n),r.isEqual(Hb.min())){e.next=29;break}return e.prev=14,e.next=17,MS(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(t_.EMPTY_BYTE_STRING,n.snapshotVersion)),VC(e,t);var r=new sE(n.target,t,1,n.sequenceNumber);UC(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),bb("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,XC(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),YC.apply(this,arguments)}function XC(e,t,n){return $C.apply(this,arguments)}function $C(){return $C=ke(be().mark((function e(t,n,r){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(JI(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,DC(t);case 5:t.yu.set("Offline"),r||(r=function(){return MS(t.localStore)}),t.asyncQueue.enqueueRetryable(ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bb("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,PC(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),$C.apply(this,arguments)}function JC(e,t){return t().catch((function(n){return XC(e,n,t)}))}function ZC(e){return eN.apply(this,arguments)}function eN(){return eN=ke(be().mark((function e(t){var n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Sb(t),r=gN(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!tN(n)){e.next=19;break}return e.prev=3,e.next=6,US(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,nN(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,XC(n,e.t0);case 17:e.next=2;break;case 19:rN(n)&&iN(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),eN.apply(this,arguments)}function tN(e){return zC(e)&&e.du.length<10}function nN(e,t){e.du.push(t);var n=gN(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function rN(e){return zC(e)&&!gN(e).ko()&&e.du.length>0}function iN(e){gN(e).start()}function aN(e){return oN.apply(this,arguments)}function oN(){return oN=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gN(t).nu();case 1:case"end":return e.stop()}}),e)}))),oN.apply(this,arguments)}function uN(e){return sN.apply(this,arguments)}function sN(){return sN=ke(be().mark((function e(t){var n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gN(t),r=Tn(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),sN.apply(this,arguments)}function cN(e,t,n){return lN.apply(this,arguments)}function lN(){return lN=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=oE.from(i,n,r),e.next=3,JC(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,ZC(t);case 5:case"end":return e.stop()}}),e)}))),lN.apply(this,arguments)}function fN(e,t){return hN.apply(this,arguments)}function hN(){return hN=ke(be().mark((function e(t,n){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&gN(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kT(i=n.code)||i===Cb.ABORTED){e.next=7;break}return r=t.du.shift(),gN(t).Fo(),e.next=5,JC(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,ZC(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:rN(t)&&iN(t);case 5:case"end":return e.stop()}}),e)}))),hN.apply(this,arguments)}function dN(e,t){return pN.apply(this,arguments)}function pN(){return pN=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Sb(t)).asyncQueue.verifyOperationInProgress(),bb("RemoteStore","RemoteStore received new credentials"),i=zC(r),r.wu.add(3),e.next=6,DC(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,PC(r);case 12:case"end":return e.stop()}}),e)}))),pN.apply(this,arguments)}function vN(e,t){return yN.apply(this,arguments)}function yN(){return yN=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sb(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,PC(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,DC(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),yN.apply(this,arguments)}function mN(e){return e.Iu||(e.Iu=function(e,t,n){var r=Sb(e);return r.iu(),new SC(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:WC.bind(null,e),eo:HC.bind(null,e),zo:QC.bind(null,e)}),e.mu.push(function(){var t=ke(be().mark((function t(n){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),qC(e)?jC(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:BC(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function gN(e){return e.Tu||(e.Tu=function(e,t,n){var r=Sb(e);return r.iu(),new CC(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:aN.bind(null,e),eo:fN.bind(null,e),eu:uN.bind(null,e),tu:cN.bind(null,e)}),e.mu.push(function(){var t=ke(be().mark((function t(n){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,ZC(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(bb("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var kN=function(){function e(t,n,r,i,a){In(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ab,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Sn(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nb(Cb.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function wN(e,t){if(_b("AsyncQueue","".concat(t,": ").concat(e)),JI(e))return new Nb(Cb.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var bN=function(){function e(t){In(this,e),this.comparator=t?function(e,n){return t(e,n)||p_.comparator(e.key,n.key)}:function(e,t){return p_.comparator(e.key,t.key)},this.keyedMap=IT(),this.sortedSet=new Q_(this.comparator)}return Sn(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),_N=function(){function e(){In(this,e),this.Eu=new Q_(p_.comparator)}return Sn(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Ib():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),xN=function(){function e(t,n,r,i,a,o,u,s){In(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Sn(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,bN.emptySet(n),a,r,i,!0,!1)}}]),e}(),TN=Sn((function e(){In(this,e),this.Ru=void 0,this.listeners=[]})),IN=Sn((function e(){In(this,e),this.queries=new bT((function(e){return Px(e)}),Rx),this.onlineState="Unknown",this.bu=new Set}));function EN(e,t){return SN.apply(this,arguments)}function SN(){return SN=ke(be().mark((function e(t,n){var r,i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sb(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new TN),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=wN(e.t0,"Initialization of query '".concat(Ox(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&PN(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),SN.apply(this,arguments)}function CN(e,t){return NN.apply(this,arguments)}function NN(){return NN=ke(be().mark((function e(t,n){var r,i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sb(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),NN.apply(this,arguments)}function AN(e,t){var n,r=Sb(e),i=!1,a=Tn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Tn(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&PN(r)}function RN(e,t,n){var r=Sb(e),i=r.queries.get(t);if(i){var a,o=Tn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function PN(e){e.bu.forEach((function(e){e.next()}))}var ON=function(){function e(t,n,r){In(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return Sn(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Tn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new xN(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=xN.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),DN=function(){function e(t,n){In(this,e),this.payload=t,this.byteLength=n}return Sn(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),MN=function(){function e(t){In(this,e),this.M=t}return Sn(e,[{key:"wi",value:function(e){return $T(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?rI(this.M,e.document,!1):U_.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return GT(e)}}]),e}(),LN=function(){function e(t,n,r){In(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=FN(t)}return Sn(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=$b.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new MN(this.M),i=Tn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=Tn(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||NT()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ke(be().mark((function e(){var t,n,r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HS(this.localStore,new MN(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=Tn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,QS(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function FN(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var UN=Sn((function e(t){In(this,e),this.key=t})),VN=Sn((function e(t){In(this,e),this.key=t})),jN=function(){function e(t,n){In(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=NT(),this.mutatedKeys=NT(),this.Gu=Lx(t),this.Qu=new bN(this.Gu)}return Sn(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new _N,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Dx(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ib()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new xN(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new _N,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=NT(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new VN(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new UN(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=NT();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return xN.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),qN=Sn((function e(t,n,r){In(this,e),this.query=t,this.targetId=n,this.view=r})),zN=Sn((function e(t){In(this,e),this.key=t,this.na=!1})),BN=function(){function e(t,n,r,i,a,o){In(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new bT((function(e){return Px(e)}),Rx),this.ra=new Map,this.oa=new Set,this.ua=new Q_(p_.comparator),this.aa=new Map,this.ca=new JS,this.ha={},this.la=new Map,this.fa=ZE.yn(),this.onlineState="Unknown",this.da=void 0}return Sn(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function WN(e,t){return KN.apply(this,arguments)}function KN(){return KN=ke(be().mark((function e(t,n){var r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=FA(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,VS(r.localStore,Nx(n));case 8:return u=e.sent,r.isPrimaryClient&&LC(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,HN(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),KN.apply(this,arguments)}function HN(e,t,n,r){return GN.apply(this,arguments)}function GN(){return GN=ke(be().mark((function e(t,n,r,i){var a,o,u,s,c,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=ke(be().mark((function e(t,n,r,i){var a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,zS(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(dA(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,zS(t.localStore,n,!0);case 3:return a=e.sent,o=new jN(n,a._i),u=o.Wu(a.documents),s=OT.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),dA(t,r,c.Xu),l=new qN(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),GN.apply(this,arguments)}function QN(e,t){return YN.apply(this,arguments)}function YN(){return YN=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sb(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!Rx(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,jS(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),FC(r.remoteStore,i.targetId),fA(r,i.targetId)})).catch(iS);case 9:e.next=14;break;case 11:return fA(r,i.targetId),e.next=14,jS(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),YN.apply(this,arguments)}function XN(e,t,n){return $N.apply(this,arguments)}function $N(){return $N=ke(be().mark((function e(t,n,r){var i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=UA(t),e.prev=1,e.next=4,function(e,t){var n,r=Sb(e),i=Kb.now(),a=t.reduce((function(e,t){return e.add(t.key)}),NT());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,u=[],s=Tn(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=oT(c,n.get(c.key));null!=l&&u.push(new lT(c.key,l,F_(l.value.mapValue),tT.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new Q_(zb)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,yA(i,a.changes);case 9:return e.next=11,ZC(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=wN(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),$N.apply(this,arguments)}function JN(e,t){return ZN.apply(this,arguments)}function ZN(){return ZN=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sb(t),e.prev=1,e.next=4,LS(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(Eb(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?Eb(n.na):e.removedDocuments.size>0&&(Eb(n.na),n.na=!1))})),e.next=8,yA(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,iS(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ZN.apply(this,arguments)}function eA(e,t,n){var r=Sb(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Sb(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Tn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&PN(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function tA(e,t,n){return nA.apply(this,arguments)}function nA(){return nA=ke(be().mark((function e(t,n,r){var i,a,o,u,s,c;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Sb(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Q_(p_.comparator)).insert(o,U_.newNoDocument(o,Hb.min())),s=NT().add(o),c=new PT(Hb.min(),new Map,new $_(zb),u,s),e.next=9,JN(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),vA(i),e.next=16;break;case 14:return e.next=16,jS(i.localStore,n,!1).then((function(){return fA(i,n,r)})).catch(iS);case 16:case"end":return e.stop()}}),e)}))),nA.apply(this,arguments)}function rA(e,t){return iA.apply(this,arguments)}function iA(){return iA=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sb(t),i=n.batch.batchId,e.prev=1,e.next=4,DS(r.localStore,n);case 4:return a=e.sent,lA(r,i,null),cA(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,yA(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,iS(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),iA.apply(this,arguments)}function aA(e,t,n){return oA.apply(this,arguments)}function oA(){return oA=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Sb(t),e.prev=1,e.next=4,function(e,t){var n=Sb(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return Eb(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,lA(i,n,r),cA(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,yA(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,iS(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),oA.apply(this,arguments)}function uA(e,t){return sA.apply(this,arguments)}function sA(){return sA=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zC((r=Sb(t)).remoteStore)||bb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Sb(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=wN(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),sA.apply(this,arguments)}function cA(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function lA(e,t,n){var r=Sb(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function fA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Tn(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||hA(e,t)}))}function hA(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(FC(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),vA(e))}function dA(e,t,n){var r,i=Tn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof UN?(e.ca.addReference(a.key,t),pA(e,a)):a instanceof VN?(bb("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||hA(e,a.key)):Ib()}}catch(o){i.e(o)}finally{i.f()}}function pA(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(bb("SyncEngine","New document in limbo: "+n),e.oa.add(r),vA(e))}function vA(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new p_($b.fromString(t)),r=e.fa.next();e.aa.set(r,new zN(n)),e.ua=e.ua.insert(n,r),LC(e.remoteStore,new sE(Nx(Tx(n.path)),r,2,Vb.A))}}function yA(e,t,n){return mA.apply(this,arguments)}function mA(){return mA=ke(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Sb(t),a=[],o=[],u=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){u.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=CS.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sa.zo(a),e.next=9,function(){var e=ke(be().mark((function e(t,n){var r,i,a,o,u,s,c,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sb(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return GI.forEach(n,(function(t){return GI.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return GI.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),JI(e.t0)){e.next=10;break}throw e.t0;case 10:bb("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Tn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),mA.apply(this,arguments)}function gA(e,t){return kA.apply(this,arguments)}function kA(){return kA=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Sb(t)).currentUser.isEqual(n)){e.next=11;break}return bb("SyncEngine","User change. New user:",n.toKey()),e.next=5,PS(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new Nb(Cb.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,yA(r,i.di);case 11:case"end":return e.stop()}}),e)}))),kA.apply(this,arguments)}function wA(e,t){var n=Sb(e),r=n.aa.get(t);if(r&&r.na)return NT().add(r.key);var i=NT(),a=n.ra.get(t);if(!a)return i;var o,u=Tn(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function bA(e,t){return _A.apply(this,arguments)}function _A(){return _A=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sb(t),e.next=3,zS(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&dA(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),_A.apply(this,arguments)}function xA(e,t){return TA.apply(this,arguments)}function TA(){return TA=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sb(t),e.abrupt("return",WS(r.localStore,n).then((function(e){return yA(r,e)})));case 2:case"end":return e.stop()}}),e)}))),TA.apply(this,arguments)}function IA(e,t,n,r){return EA.apply(this,arguments)}function EA(){return EA=ke(be().mark((function e(t,n,r,i){var a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Sb(t),e.next=3,function(e,t){var n=Sb(e),r=Sb(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):GI.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,ZC(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(lA(a,n,i||null),cA(a,n),function(e,t){Sb(Sb(e).Bs)._n(t)}(a.localStore,n)):Ib();case 11:return e.next=13,yA(a,o);case 13:e.next=16;break;case 15:bb("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),EA.apply(this,arguments)}function SA(e,t){return CA.apply(this,arguments)}function CA(){return CA=ke(be().mark((function e(t,n){var r,i,a,o,u,s,c,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(FA(r=Sb(t)),UA(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,NA(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,vN(r.remoteStore,!0);case 9:o=Tn(a);try{for(o.s();!(u=o.n()).done;)s=u.value,LC(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return fA(r,t),jS(r.localStore,t,!0)})),FC(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,NA(r,c);case 21:return function(e){var t=Sb(e);t.aa.forEach((function(e,n){FC(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new Q_(p_.comparator)}(r),r.da=!1,e.next=25,vN(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),CA.apply(this,arguments)}function NA(e,t,n){return AA.apply(this,arguments)}function AA(){return AA=ke(be().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,y,m;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Sb(t),a=[],o=[],u=Tn(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,VS(i.localStore,Nx(f[0]));case 11:l=e.sent,h=Tn(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ia.get(p),e.next=20,bA(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,BS(i.localStore,c);case 36:return m=e.sent,e.next=39,VS(i.localStore,m);case 39:return l=e.sent,e.next=42,HN(i,RA(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),AA.apply(this,arguments)}function RA(e){return xx(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function PA(e){var t=Sb(e);return Sb(Sb(t.localStore).persistence).Fs()}function OA(e,t,n,r){return DA.apply(this,arguments)}function DA(){return DA=ke(be().mark((function e(t,n,r,i){var a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Sb(t)).da){e.next=3;break}return e.abrupt("return",void bb("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,WS(a.localStore,Mx(o[0]));case 10:return u=e.sent,s=PT.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,yA(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,jS(a.localStore,n,!0);case 17:return fA(a,n,i),e.abrupt("break",20);case 19:Ib();case 20:case"end":return e.stop()}}),e)}))),DA.apply(this,arguments)}function MA(e,t,n){return LA.apply(this,arguments)}function LA(){return LA=ke(be().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=FA(t)).da){e.next=45;break}a=Tn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ra.has(u)){e.next=10;break}return bb("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,BS(i.localStore,u);case 12:return s=e.sent,e.next=15,VS(i.localStore,s);case 15:return c=e.sent,e.next=18,HN(i,RA(s),c.targetId,!1);case 18:LC(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Tn(r),e.prev=30,h=be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,jS(i.localStore,t,!1).then((function(){FC(i.remoteStore,t),fA(i,t)})).catch(iS);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),LA.apply(this,arguments)}function FA(e){var t=Sb(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=JN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tA.bind(null,t),t.sa.zo=AN.bind(null,t.eventManager),t.sa.wa=RN.bind(null,t.eventManager),t}function UA(e){var t=Sb(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=aA.bind(null,t),t}function VA(e,t,n){var r=Sb(e);(function(){var e=ke(be().mark((function e(t,n,r){var i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Sb(e),r=GT(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(FN(i)),a=new LN(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,yA(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=Sb(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(xb("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var jA=function(){function e(){In(this,e),this.synchronizeTabs=!1}return Sn(e,[{key:"initialize",value:function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=TC(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return RS(this.persistence,new NS,e.initialUser,this.M)}},{key:"ya",value:function(e){return new iC(oC.Yi,this.M)}},{key:"ga",value:function(e){return new yC}},{key:"terminate",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),qA=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a;return In(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Sn(n,[{key:"initialize",value:function(){var e=ke(be().mark((function e(t){var r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn(vn(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,UA(this.Ta.syncEngine);case 6:return e.next=8,ZC(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return RS(this.persistence,new NS,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new sS(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=ES(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?KE.withCacheSize(this.cacheSizeBytes):KE.DEFAULT;return new xS(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,_C(),xC(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new yC}}]),n}(jA),zA=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Sn(n,[{key:"initialize",value:function(){var e=ke(be().mark((function e(t){var r,i=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn(vn(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof vC,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:IA.bind(null,r),Br:OA.bind(null,r),Lr:MA.bind(null,r),Fs:PA.bind(null,r),Fr:xA.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SA(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=_C();if(!vC.vt(t))throw new Nb(Cb.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ES(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vC(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(qA),BA=function(){function e(){In(this,e)}return Sn(e,[{key:"initialize",value:function(){var e=ke(be().mark((function e(t,n){var r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return eA(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=gA.bind(null,this.syncEngine),e.next=12,vN(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new IN}},{key:"createDatastore",value:function(e){var t,n=TC(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new bC(t));return function(e,t,n,r){return new NC(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return eA(o.syncEngine,e,0)},a=gC.vt()?new gC:new mC,new RC(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new BN(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sb(t),bb("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,DC(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function WA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ke(be().mark((function r(){var i;return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var KA=function(){function e(t){In(this,e),this.observer=t,this.muted=!1}return Sn(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),HA=function(){function e(t,n){var r=this;In(this,e),this.Ra=t,this.M=n,this.metadata=new Ab,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Sn(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=ke(be().mark((function e(){var t,n,r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new DN(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),GA=function(){function e(t){In(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Sn(e,[{key:"lookup",value:function(){var e=ke(be().mark((function e(t){var n,r=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Nb(Cb.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ke(be().mark((function e(t,n){var r,i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sb(t),i=eI(r.M)+"/documents",a={documents:n.map((function(e){return XT(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=iI(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Eb(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new yT(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ke(be().mark((function e(){var t,n=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=p_.fromPath(t);n.mutations.push(new mT(r,n.precondition(r)))})),e.next=7,function(){var e=ke(be().mark((function e(t,n){var r,i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Sb(t),i=eI(r.M)+"/documents",a={writes:n.map((function(e){return aI(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ib();t=Hb.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Nb(Cb.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?tT.updateTime(t):tT.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hb.min()))throw new Nb(Cb.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tT.updateTime(t)}return tT.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),QA=function(){function e(t,n,r,i,a){In(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new IC(this.asyncQueue,"transaction_retry")}return Sn(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(ke(be().mark((function t(){var n,r;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new GA(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!f_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!kT(t)}return!1}}]),e}(),YA=function(){function e(t,n,r,i){var a=this;In(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=mb.UNAUTHENTICATED,this.clientId=qb.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return bb("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return bb("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Sn(e,[{key:"getConfiguration",value:function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Nb(Cb.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ab;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ke(be().mark((function n(){var r;return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=wN(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function XA(e,t){return $A.apply(this,arguments)}function $A(){return $A=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),bb("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,PS(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),$A.apply(this,arguments)}function JA(e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=ke(be().mark((function e(t,n){var r,i;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,eR(t);case 3:return r=e.sent,bb("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return dN(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return dN(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ZA.apply(this,arguments)}function eR(e){return tR.apply(this,arguments)}function tR(){return tR=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return bb("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,XA(t,new jA);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),tR.apply(this,arguments)}function nR(e){return rR.apply(this,arguments)}function rR(){return rR=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return bb("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,JA(t,new BA);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),rR.apply(this,arguments)}function iR(e){return eR(e).then((function(e){return e.persistence}))}function aR(e){return eR(e).then((function(e){return e.localStore}))}function oR(e){return nR(e).then((function(e){return e.remoteStore}))}function uR(e){return nR(e).then((function(e){return e.syncEngine}))}function sR(e){return cR.apply(this,arguments)}function cR(){return cR=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nR(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=WN.bind(null,n.syncEngine),r.onUnlisten=QN.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),cR.apply(this,arguments)}function lR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ab;return e.asyncQueue.enqueueAndForget(ke(be().mark((function i(){return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new KA({next:function(a){t.enqueueAndForget((function(){return CN(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Nb(Cb.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Nb(Cb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new ON(Tx(n.path),a,{includeMetadataChanges:!0,ku:!0});return EN(e,o)},i.next=3,sR(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function fR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ab;return e.asyncQueue.enqueueAndForget(ke(be().mark((function i(){return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new KA({next:function(n){t.enqueueAndForget((function(){return CN(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Nb(Cb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new ON(n,a,{includeMetadataChanges:!0,ku:!0});return EN(e,o)},i.next=3,sR(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var hR=new Map;function dR(e,t,n){if(!n)throw new Nb(Cb.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function pR(e,t,n,r){if(!0===t&&!0===r)throw new Nb(Cb.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function vR(e){if(!p_.isDocumentKey(e))throw new Nb(Cb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function yR(e){if(p_.isDocumentKey(e))throw new Nb(Cb.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function mR(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ib()}function gR(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Nb(Cb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=mR(e);throw new Nb(Cb.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function kR(e,t){if(t<=0)throw new Nb(Cb.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var wR=function(){function e(t){var n;if(In(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Nb(Cb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Nb(Cb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,pR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Sn(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),bR=function(){function e(t,n,r){In(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wR({}),this._settingsFrozen=!1,t instanceof l_?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Nb(Cb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new l_(e.options.projectId)}(t))}return Sn(e,[{key:"app",get:function(){if(!this._app)throw new Nb(Cb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Nb(Cb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wR(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Pb;switch(e.type){case"gapi":var t=e.client;return Eb(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Lb(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Nb(Cb.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=hR.get(e);t&&(bb("ComponentProvider","Removing Datastore"),hR.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function _R(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=gR(e,bR))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&xb("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=mb.MOCK_USER;else{o=Hn(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Nb(Cb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new mb(s)}e._authCredentials=new Ob(new Rb(o,u))}}var xR=function(){function e(t,n,r){In(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Sn(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new IR(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),TR=function(){function e(t,n,r){In(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Sn(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),IR=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a;return In(this,n),(a=t.call(this,e,r,Tx(i)))._path=i,a.type="collection",a}return Sn(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new xR(this.firestore,null,new p_(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(TR);function ER(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xr(e),dR("collection","path",t),e instanceof bR){var a=$b.fromString.apply($b,[t].concat(r));return yR(a),new IR(e,null,a)}if(!(e instanceof xR||e instanceof IR))throw new Nb(Cb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child($b.fromString.apply($b,[t].concat(r)));return yR(o),new IR(e.firestore,null,o)}function SR(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xr(e),1===arguments.length&&(t=qb.R()),dR("doc","path",t),e instanceof bR){var a=$b.fromString.apply($b,[t].concat(r));return vR(a),new xR(e,null,new p_(a))}if(!(e instanceof xR||e instanceof IR))throw new Nb(Cb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child($b.fromString.apply($b,[t].concat(r)));return vR(o),new xR(e.firestore,e instanceof IR?e.converter:null,new p_(o))}function CR(e,t){return e=xr(e),t=xr(t),(e instanceof xR||e instanceof IR)&&(t instanceof xR||t instanceof IR)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function NR(e,t){return e=xr(e),t=xr(t),e instanceof TR&&t instanceof TR&&e.firestore===t.firestore&&Rx(e._query,t._query)&&e.converter===t.converter}var AR=function(){function e(){var t=this;In(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new IC(this,"async_queue_retry"),this.Qa=function(){var e=xC();e&&bb("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=xC();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return Sn(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=xC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new Ab;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=ke(be().mark((function e(){var t=this;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),JI(e.t0)){e.next=12;break}throw e.t0;case 12:bb("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw _b("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=kN.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&Ib()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=Tn(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Tn(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function RR(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Tn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var PR=function(){function e(){In(this,e),this._progressObserver={},this._taskCompletionResolver=new Ab,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Sn(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),OR=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a;return In(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new AR,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Sn(n,[{key:"_terminate",value:function(){return this._firestoreClient||MR(this),this._firestoreClient.terminate()}}]),n}(bR);function DR(e){return e._firestoreClient||MR(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function MR(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new c_(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new YA(e._authCredentials,e._appCheckCredentials,e._queue,r)}function LR(e,t,n){var r=new Ab;return e.asyncQueue.enqueue(ke(be().mark((function i(){return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,XA(e,n);case 3:return i.next=5,JA(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Cb.FAILED_PRECONDITION||e.code===Cb.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function FR(e){return function(e){return e.asyncQueue.enqueue(ke(be().mark((function t(){var n,r;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,iR(e);case 2:return n=t.sent,t.next=5,oR(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Sb(e);return t.wu.delete(0),PC(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(DR(e=gR(e,OR)))}function UR(e){return function(e){return e.asyncQueue.enqueue(ke(be().mark((function t(){var n,r;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,iR(e);case 2:return n=t.sent,t.next=5,oR(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Sb(t)).wu.add(0),e.next=4,DC(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(DR(e=gR(e,OR)))}function VR(e,t){var n=DR(e=gR(e,OR)),r=new PR;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new HA(e,t)}(function(e,t){if(e instanceof Uint8Array)return WA(e,t);if(e instanceof ArrayBuffer)return WA(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,TC(t));e.asyncQueue.enqueueAndForget(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=VA,t.next=3,uR(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function jR(e,t){return function(e,t){return e.asyncQueue.enqueue(ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Sb(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,aR(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(DR(e=gR(e,OR)),t).then((function(t){return t?new TR(e,null,t.query):null}))}function qR(e){if(e._initialized||e._terminated)throw new Nb(Cb.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var zR=function(){function e(){In(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zb(n)}return Sn(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var BR=function(){function e(t){In(this,e),this._byteString=t}return Sn(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(t_.fromBase64String(t))}catch(t){throw new Nb(Cb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(t_.fromUint8Array(t))}}]),e}(),WR=Sn((function e(t){In(this,e),this._methodName=t})),KR=function(){function e(t,n){if(In(this,e),!isFinite(t)||t<-90||t>90)throw new Nb(Cb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Nb(Cb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Sn(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return zb(this._lat,e._lat)||zb(this._long,e._long)}}]),e}(),HR=/^__.*__$/,GR=function(){function e(t,n,r){In(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Sn(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new lT(e,this.data,this.fieldMask,t,this.fieldTransforms):new cT(e,this.data,t,this.fieldTransforms)}}]),e}(),QR=function(){function e(t,n,r){In(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Sn(e,[{key:"toMutation",value:function(e,t){return new lT(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function YR(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ib()}}var XR=function(){function e(t,n,r,i,a,o){In(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Sn(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return yP(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(YR(this.ec)&&HR.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),$R=function(){function e(t,n,r){In(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||TC(t)}return Sn(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new XR({ec:e,methodName:t,hc:n,path:Zb.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function JR(e){var t=e._freezeSettings(),n=TC(e._databaseId);return new $R(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ZR(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);hP("Data must be an object, but it was:",o,r);var u,s,c=lP(r,o);if(a.merge)u=new e_(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Tn(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=dP(t,d,n);if(!o.contains(p))throw new Nb(Cb.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));mP(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new e_(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new GR(new L_(c),u,s)}var eP=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(WR);function tP(e,t,n){return new XR({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var nP=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"_toFieldTransform",value:function(e){return new Zx(e.path,new Kx)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(WR),rP=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,e)).fc=r,i}return Sn(n,[{key:"_toFieldTransform",value:function(e){var t=tP(this,e,!0),n=this.fc.map((function(e){return cP(e,t)})),r=new Hx(n);return new Zx(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(WR),iP=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,e)).fc=r,i}return Sn(n,[{key:"_toFieldTransform",value:function(e){var t=tP(this,e,!0),n=this.fc.map((function(e){return cP(e,t)})),r=new Qx(n);return new Zx(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(WR),aP=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,e)).dc=r,i}return Sn(n,[{key:"_toFieldTransform",value:function(e){var t=new Xx(e.M,jx(e.M,this.dc));return new Zx(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(WR);function oP(e,t,n,r){var i=e.lc(1,t,n);hP("Data must be an object, but it was:",i,r);var a=[],o=L_.empty();Qb(r,(function(e,r){var u=vP(t,e,n);r=xr(r);var s=i.oc(u);if(r instanceof eP)a.push(u);else{var c=cP(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new e_(a);return new QR(o,u,i.fieldTransforms)}function uP(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[dP(t,r,n)],s=[i];if(a.length%2!=0)throw new Nb(Cb.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(dP(t,a[c])),s.push(a[c+1]);for(var l=[],f=L_.empty(),h=u.length-1;h>=0;--h)if(!mP(l,u[h])){var d=u[h],p=s[h];p=xr(p);var v=o.oc(d);if(p instanceof eP)l.push(d);else{var y=cP(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new e_(l);return new QR(f,m,o.fieldTransforms)}function sP(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return cP(n,e.lc(r?4:3,t))}function cP(e,t){if(fP(e=xr(e)))return hP("Unsupported field value:",t,e),lP(e,t);if(e instanceof WR)return function(e,t){if(!YR(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Tn(e);try{for(a.s();!(n=a.n()).done;){var o=cP(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=xr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return jx(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Kb.fromDate(e);return{timestampValue:WT(t.M,n)}}if(e instanceof Kb){var r=new Kb(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:WT(t.M,r)}}if(e instanceof KR)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof BR)return{bytesValue:KT(t.M,e._byteString)};if(e instanceof xR){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:QT(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(mR(e)))}(e,t)}function lP(e,t){var n={};return Yb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qb(e,(function(e,r){var i=cP(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function fP(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Kb||e instanceof KR||e instanceof BR||e instanceof xR||e instanceof WR)}function hP(e,t,n){if(!fP(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=mR(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function dP(e,t,n){if((t=xr(t))instanceof zR)return t._internalPath;if("string"==typeof t)return vP(e,t);throw yP("Field path arguments must be of type string or ",e,!1,void 0,n)}var pP=new RegExp("[~\\*/\\[\\]]");function vP(e,t,n){if(t.search(pP)>=0)throw yP("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Rn(zR,Nn(t.split(".")))._internalPath}catch(r){throw yP("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function yP(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Nb(Cb.INVALID_ARGUMENT,u+e+s)}function mP(e,t){return e.some((function(e){return e.isEqual(t)}))}var gP=function(){function e(t,n,r,i,a){In(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Sn(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new xR(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new kP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(wP("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),kP=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"data",value:function(){return mn(vn(n.prototype),"data",this).call(this)}}]),n}(gP);function wP(e,t){return"string"==typeof t?vP(e,t):t instanceof zR?t._internalPath:t._delegate._internalPath}var bP=function(){function e(t,n){In(this,e),this.hasPendingWrites=t,this.fromCache=n}return Sn(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),_P=function(e){kn(n,e);var t=xn(n);function n(e,r,i,a,o,u){var s;return In(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Sn(n,[{key:"exists",value:function(){return mn(vn(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new xP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(wP("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(gP),xP=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return mn(vn(n.prototype),"data",this).call(this,e)}}]),n}(_P),TP=function(){function e(t,n,r,i){In(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new bP(i.hasPendingWrites,i.fromCache),this.query=r}return Sn(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new xP(n._firestore,n._userDataWriter,r.key,r,new bP(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Nb(Cb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new xP(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bP(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new xP(e._firestore,e._userDataWriter,t.doc.key,t.doc,new bP(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:IP(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function IP(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ib()}}function EP(e,t){return e instanceof _P&&t instanceof _P?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof TP&&t instanceof TP&&e._firestore===t._firestore&&NR(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function SP(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Nb(Cb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var CP=Sn((function e(){In(this,e)}));function NP(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var AP=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a;return In(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return Sn(n,[{key:"_apply",value:function(e){var t=JR(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){zP(o,a);var s,c=[],l=Tn(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(qP(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=qP(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||zP(o,a),u=sP(n,"where",o,"in"===a||"not-in"===a);var h=sx.create(i,a,u);return function(e,t){if(t.S()){var n=Ex(e);if(null!==n&&!n.isEqual(t.field))throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Ix(e);null!==r&&BP(e,t.field,r)}var i=function(e,t){var n,r=Tn(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Nb(Cb.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Nb(Cb.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new TR(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new _x(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(CP);function RP(e,t,n){var r=t,i=wP("where",e);return new AP(i,r,n)}var PP=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return Sn(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new gx(t,n);return function(e,t){if(null===Ix(e)){var n=Ex(e);null!==n&&BP(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new TR(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new _x(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(CP);var OP=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a;return In(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return Sn(n,[{key:"_apply",value:function(e){return new TR(e.firestore,e.converter,Ax(e._query,this.yc,this.Ic))}}]),n}(CP);var DP=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a;return In(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return Sn(n,[{key:"_apply",value:function(e){var t=jP(e,this.type,this.Tc,this.Ec);return new TR(e.firestore,e.converter,function(e,t){return new _x(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(CP);function MP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DP("startAt",t,!0)}function LP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DP("startAfter",t,!1)}var FP=function(e){kn(n,e);var t=xn(n);function n(e,r,i){var a;return In(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return Sn(n,[{key:"_apply",value:function(e){var t=jP(e,this.type,this.Tc,this.Ec);return new TR(e.firestore,e.converter,function(e,t){return new _x(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(CP);function UP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FP("endBefore",t,!1)}function VP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FP("endAt",t,!0)}function jP(e,t,n,r){if(n[0]=xr(n[0]),n[0]instanceof gP)return function(e,t,n,r,i){if(!r)throw new Nb(Cb.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Tn(Cx(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(T_(t,r.key));else{var c=r.data.field(s.field);if(o_(c))throw new Nb(Cb.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new mx(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=JR(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Nb(Cb.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Sx(e)&&-1!==c.indexOf("/"))throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child($b.fromString(c));if(!p_.isDocumentKey(l))throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new p_(l);u.push(T_(t,f))}else{var h=sP(n,r,c);u.push(h)}}return new mx(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function qP(e,t,n){if("string"==typeof(n=xr(n))){if(""===n)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sx(t)&&-1!==n.indexOf("/"))throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child($b.fromString(n));if(!p_.isDocumentKey(r))throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return T_(e,new p_(r))}if(n instanceof xR)return T_(e,n._key);throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(mR(n),"."))}function zP(e,t){if(!Array.isArray(e)||0===e.length)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function BP(e,t,n){if(!n.isEqual(t))throw new Nb(Cb.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var WP={maxAttempts:5},KP=function(){function e(){In(this,e)}return Sn(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(m_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return i_(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(a_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ib()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Qb(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new KR(i_(e.latitude),i_(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=u_(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(s_(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=r_(e);return new Kb(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=$b.fromString(e);Eb(gI(n));var r=new l_(n.get(1),n.get(3)),i=new p_(n.popFirst(5));return r.isEqual(t)||_b("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function HP(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var GP=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this)).firestore=e,r}return Sn(n,[{key:"convertBytes",value:function(e){return new BR(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xR(this.firestore,null,t)}}]),n}(KP),QP=function(){function e(t,n){In(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=JR(t)}return Sn(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=YP(e,this._firestore),i=HP(r.converter,t,n),a=ZR(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,tT.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=YP(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=xr(t))||t instanceof zR?uP(this._dataReader,"WriteBatch.update",i._key,t,n,o):oP(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,tT.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=YP(e,this._firestore);return this._mutations=this._mutations.concat(new yT(t._key,tT.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Nb(Cb.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function YP(e,t){if((e=xr(e)).firestore!==t)throw new Nb(Cb.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var XP=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this)).firestore=e,r}return Sn(n,[{key:"convertBytes",value:function(e){return new BR(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xR(this.firestore,null,t)}}]),n}(KP);function $P(e){e=gR(e,xR);var t=gR(e.firestore,OR),n=DR(t),r=new XP(t);return function(e,t){var n=new Ab;return e.asyncQueue.enqueueAndForget(ke(be().mark((function r(){return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ke(be().mark((function e(t,n,r){var i,a;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Sb(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Nb(Cb.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=wN(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,aR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new _P(t,r,e._key,n,new bP(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function JP(e){e=gR(e,TR);var t=gR(e.firestore,OR),n=DR(t),r=new XP(t);return SP(e._query),fR(n,e._query).then((function(n){return new TP(t,r,e,n)}))}function ZP(e){e=gR(e,TR);var t=gR(e.firestore,OR),n=DR(t),r=new XP(t);return function(e,t){var n=new Ab;return e.asyncQueue.enqueueAndForget(ke(be().mark((function r(){return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ke(be().mark((function e(t,n,r){var i,a,o,u,s;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zS(t,n,!0);case 3:i=e.sent,a=new jN(n,i._i),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=wN(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,aR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new TP(t,r,e,n)}))}function eO(e,t,n){e=gR(e,xR);var r=gR(e.firestore,OR),i=HP(e.converter,t,n);return aO(r,[ZR(JR(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,tT.none())])}function tO(e,t,n){e=gR(e,xR);for(var r=gR(e.firestore,OR),i=JR(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return aO(r,[("string"==typeof(t=xr(t))||t instanceof zR?uP(i,"updateDoc",e._key,t,n,o):oP(i,"updateDoc",e._key,t)).toMutation(e._key,tT.exists(!0))])}function nO(e){return aO(gR(e.firestore,OR),[new yT(e._key,tT.none())])}function rO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=xr(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||RR(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(RR(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof xR)l=gR(e.firestore,OR),f=Tx(e._key.path),c={next:function(t){n[s]&&n[s](oO(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=gR(e,TR);l=gR(p.firestore,OR),f=p._query;var v=new XP(l);c={next:function(e){n[s]&&n[s](new TP(l,v,p,e))},error:n[s+1],complete:n[s+2]},SP(e._query)}return function(e,t,n,r){var i=new KA(r),a=new ON(t,i,n);return e.asyncQueue.enqueueAndForget(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=EN,t.next=3,sR(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=CN,t.next=3,sR(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(DR(l),f,h,c)}function iO(e,t){return function(e,t){var n=new KA(t);return e.asyncQueue.enqueueAndForget(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Sb(e).bu.add(t),t.next()},t.next=3,sR(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(ke(be().mark((function t(){return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Sb(e).bu.delete(t)},t.next=3,sR(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(DR(e=gR(e,OR)),RR(t)?t:{next:t})}function aO(e,t){return function(e,t){var n=new Ab;return e.asyncQueue.enqueueAndForget(ke(be().mark((function r(){return be().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=XN,r.next=3,uR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(DR(e),t)}function oO(e,t,n){var r=n.docs.get(t._key),i=new XP(e);return new _P(e,i,t._key,r,new bP(n.hasPendingWrites,n.fromCache),t.converter)}var uO=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,e,r))._firestore=e,i}return Sn(n,[{key:"get",value:function(e){var t=this,r=YP(e,this._firestore),i=new XP(this._firestore);return mn(vn(n.prototype),"get",this).call(this,e).then((function(e){return new _P(t._firestore,i,r._key,e._document,new bP(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){In(this,e),this._firestore=t,this._transaction=n,this._dataReader=JR(t)}return Sn(e,[{key:"get",value:function(e){var t=this,n=YP(e,this._firestore),r=new GP(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ib();var i=e[0];if(i.isFoundDocument())return new gP(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new gP(t._firestore,r,n._key,null,n.converter);throw Ib()}))}},{key:"set",value:function(e,t,n){var r=YP(e,this._firestore),i=HP(r.converter,t,n),a=ZR(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=YP(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=xr(t))||t instanceof zR?uP(this._dataReader,"Transaction.update",i._key,t,n,o):oP(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=YP(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function sO(e,t,n){e=gR(e,OR);var r=Object.assign(Object.assign({},WP),n);return function(e){if(e.maxAttempts<1)throw new Nb(Cb.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Ab;return e.asyncQueue.enqueueAndForget(ke(be().mark((function i(){var a;return be().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return nR(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new QA(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(DR(e),(function(n){return t(new uO(e,n))}),r)}function cO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new rP("arrayUnion",t)}function lO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new iP("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){gb=e}(ki),hi(new Tr("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new OR(i,new Db(e.getProvider("auth-internal")),new Ub(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Ii(yb,"3.4.9",e),Ii(yb,"3.4.9","esm2017")}();function fO(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Nb("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function hO(){if("undefined"===typeof Uint8Array)throw new Nb("unimplemented","Uint8Arrays are not available in this environment.")}function dO(){if("undefined"==typeof atob)throw new Nb("unimplemented","Blobs are unavailable in Firestore in this environment.")}var pO=function(){function e(t){In(this,e),this._delegate=t}return Sn(e,[{key:"toBase64",value:function(){return dO(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return hO(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return dO(),new e(BR.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return hO(),new e(BR.fromUint8Array(t))}}]),e}();function vO(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Tn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var yO=function(){function e(){In(this,e)}return Sn(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){qR(e=gR(e,OR));var n=DR(e),r=e._freezeSettings(),i=new BA;return LR(n,i,new qA(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){qR(e=gR(e,OR));var t=DR(e),n=e._freezeSettings(),r=new BA;return LR(t,r,new zA(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Nb(Cb.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ab;return e._queue.enqueueAndForgetEvenWhileRestricted(ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(YI.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,YI.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(ES(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),mO=function(){function e(t,n,r){var i=this;In(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof l_||(this._appCompat=t)}return Sn(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||xb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_R(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return FR(this._delegate)}},{key:"disableNetwork",value:function(){return UR(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&pR("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Ab;return e.asyncQueue.enqueueAndForget(ke(be().mark((function n(){return be().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=uA,n.next=3,uR(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(DR(e=gR(e,OR)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return iO(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Nb("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new RO(this,ER(this._delegate,e))}catch(ZM){throw xO(ZM,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new _O(this,SR(this._delegate,e))}catch(ZM){throw xO(ZM,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new CO(this,function(e,t){if(e=gR(e,bR),dR("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Nb(Cb.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new TR(e,null,function(e){return new _x($b.emptyPath(),e)}(t))}(this._delegate,e))}catch(ZM){throw xO(ZM,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return sO(this._delegate,(function(n){return e(new kO(t,n))}))}},{key:"batch",value:function(){var e=this;return DR(this._delegate),new wO(new QP(this._delegate,(function(t){return aO(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return VR(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return jR(this._delegate,e).then((function(e){return e?new CO(t,e):null}))}}]),e}(),gO=function(e){kn(n,e);var t=xn(n);function n(e){var r;return In(this,n),(r=t.call(this)).firestore=e,r}return Sn(n,[{key:"convertBytes",value:function(e){return new pO(new BR(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return _O.forKey(t,this.firestore,null)}}]),n}(KP);var kO=function(){function e(t,n){In(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new gO(t)}return Sn(e,[{key:"get",value:function(e){var t=this,n=PO(e);return this._delegate.get(n).then((function(e){return new EO(t._firestore,new _P(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=PO(e);return n?(fO("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=PO(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=PO(e);return this._delegate.delete(t),this}}]),e}(),wO=function(){function e(t){In(this,e),this._delegate=t}return Sn(e,[{key:"set",value:function(e,t,n){var r=PO(e);return n?(fO("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=PO(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=PO(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),bO=function(){function e(t,n,r){In(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Sn(e,[{key:"fromFirestore",value:function(e,t){var n=new xP(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new SO(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new gO(t),n),i.set(n,a)),a}}]),e}();bO.INSTANCES=new WeakMap;var _O=function(){function e(t,n){In(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new gO(t)}return Sn(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new RO(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new RO(this.firestore,ER(this._delegate,e))}catch(ZM){throw xO(ZM,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=xr(e))instanceof xR&&CR(this._delegate,e)}},{key:"set",value:function(e,t){t=fO("DocumentReference.set",t);try{return t?eO(this._delegate,e,t):eO(this._delegate,e)}catch(ZM){throw xO(ZM,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?tO(this._delegate,e):tO.apply(void 0,[this._delegate,e,t].concat(r))}catch(ZM){throw xO(ZM,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return nO(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=TO(n),a=IO(n,(function(t){return new EO(e.firestore,new _P(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return rO(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?$P(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=gR(e,xR);var t=gR(e.firestore,OR);return lR(DR(t),e._key,{source:"server"}).then((function(n){return oO(t,e,n)}))}(this._delegate):function(e){e=gR(e,xR);var t=gR(e.firestore,OR);return lR(DR(t),e._key).then((function(n){return oO(t,e,n)}))}(this._delegate),t.then((function(e){return new EO(n.firestore,new _P(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(bO.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Nb("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new xR(n._delegate,r,new p_(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new xR(n._delegate,r,t))}}]),e}();function xO(e,t,n){return e.message=e.message.replace(t,n),e}function TO(e){var t,n=Tn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!vO(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function IO(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=vO(e[0])?e[0]:vO(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var EO=function(){function e(t,n){In(this,e),this._firestore=t,this._delegate=n}return Sn(e,[{key:"ref",get:function(){return new _O(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return EP(this._delegate,e._delegate)}}]),e}(),SO=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ib()}(void 0!==t),t}}]),n}(EO),CO=function(){function e(t,n){In(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new gO(t)}return Sn(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,NP(this._delegate,RP(t,n,r)))}catch(ZM){throw xO(ZM,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,NP(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=wP("orderBy",e);return new PP(n,t)}(t,n)))}catch(ZM){throw xO(ZM,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,NP(this._delegate,function(e){return kR("limit",e),new OP("limit",e,"F")}(t)))}catch(ZM){throw xO(ZM,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,NP(this._delegate,function(e){return kR("limitToLast",e),new OP("limitToLast",e,"L")}(t)))}catch(ZM){throw xO(ZM,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,NP(this._delegate,MP.apply(void 0,arguments)))}catch(ZM){throw xO(ZM,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,NP(this._delegate,LP.apply(void 0,arguments)))}catch(ZM){throw xO(ZM,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,NP(this._delegate,UP.apply(void 0,arguments)))}catch(ZM){throw xO(ZM,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,NP(this._delegate,VP.apply(void 0,arguments)))}catch(ZM){throw xO(ZM,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return NR(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ZP(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=gR(e,TR);var t=gR(e.firestore,OR),n=DR(t),r=new XP(t);return fR(n,e._query,{source:"server"}).then((function(n){return new TP(t,r,e,n)}))}(this._delegate):JP(this._delegate),t.then((function(e){return new AO(n.firestore,new TP(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=TO(n),a=IO(n,(function(t){return new AO(e.firestore,new TP(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return rO(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(bO.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),NO=function(){function e(t,n){In(this,e),this._firestore=t,this._delegate=n}return Sn(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new SO(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),AO=function(){function e(t,n){In(this,e),this._firestore=t,this._delegate=n}return Sn(e,[{key:"query",get:function(){return new CO(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new SO(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new NO(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new SO(n._firestore,r))}))}},{key:"isEqual",value:function(e){return EP(this._delegate,e._delegate)}}]),e}(),RO=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Sn(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new _O(this.firestore,e):null}},{key:"doc",value:function(e){try{return new _O(this.firestore,void 0===e?SR(this._delegate):SR(this._delegate,e))}catch(ZM){throw xO(ZM,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=gR(e.firestore,OR),r=SR(e),i=HP(e.converter,t);return aO(n,[ZR(JR(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,tT.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new _O(t.firestore,e)}))}},{key:"isEqual",value:function(e){return CR(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(bO.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(CO);function PO(e){return gR(e,xR)}var OO=function(){function e(){In(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Rn(zR,n)}return Sn(e,[{key:"isEqual",value:function(e){return(e=xr(e))instanceof zR&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Zb.keyField().canonicalString())}}]),e}(),DO=function(){function e(t){In(this,e),this._delegate=t}return Sn(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new nP("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new eP("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=cO.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=lO.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new aP("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),MO={Firestore:mO,GeoPoint:KR,Timestamp:Kb,Blob:pO,Transaction:kO,WriteBatch:wO,DocumentReference:_O,DocumentSnapshot:EO,Query:CO,QueryDocumentSnapshot:SO,QuerySnapshot:AO,CollectionReference:RO,FieldPath:OO,FieldValue:DO,setLogLevel:function(e){!function(e){kb.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Tr("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},MO)))}(e,(function(e,t){return new mO(e,t,new yO)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(hf);var LO="firebasestorage.googleapis.com",FO=function(e){kn(n,e);var t=xn(n);function n(e,r){var i;return In(this,n),(i=t.call(this,UO(e),"Firebase Storage: ".concat(r," (").concat(UO(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(gn(i),n.prototype),i}return Sn(n,[{key:"_codeEquals",value:function(e){return UO(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(tr);function UO(e){return"storage/"+e}function VO(){return new FO("unknown","An unknown error occurred, please check the error payload for server response.")}function jO(){return new FO("canceled","User canceled the upload/download.")}function qO(){return new FO("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function zO(e){return new FO("invalid-argument",e)}function BO(){return new FO("app-deleted","The Firebase app was deleted.")}function WO(e){return new FO("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function KO(e,t){return new FO("invalid-format","String does not match format '"+e+"': "+t)}function HO(e){throw new FO("internal-error","Internal error: "+e)}var GO,QO=function(){function e(t,n){In(this,e),this.bucket=t,this.path_=n}return Sn(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(ZM){return new e(t,"")}if(""===r.path)return r;throw new FO("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===LO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new FO("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),YO=function(){function e(t){In(this,e),this.promise_=Promise.reject(t)}return Sn(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function XO(e){return"string"===typeof e||e instanceof String}function $O(e){return JO()&&e instanceof Blob}function JO(){return"undefined"!==typeof Blob}function ZO(e,t,n,r){if(r<t)throw zO("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw zO("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function eD(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function tD(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(GO||(GO={}));var nD=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;In(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return Sn(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(ZM){i(ZM)}else if(null!==a){var u=VO();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?BO():jO());else i(new FO("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new rD(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new rD(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===GO.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new rD(o,r))}else{var u=r.getErrorCode()===GO.ABORT;t(!1,new rD(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),rD=Sn((function e(t,n,r){In(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function iD(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function aD(){for(var e=iD(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(JO())return new Blob(n);throw new FO("unsupported-environment","This browser doesn't seem to support creating Blobs")}var oD={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},uD=Sn((function e(t,n){In(this,e),this.data=t,this.contentType=n||null}));function sD(e,t){switch(e){case oD.RAW:return new uD(cD(t));case oD.BASE64:case oD.BASE64URL:return new uD(lD(e,t));case oD.DATA_URL:return new uD(function(e){var t=new fD(e);return t.base64?lD(oD.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(ZM){throw KO(oD.DATA_URL,"Malformed data URL.")}return cD(t)}(t.rest)}(t),new fD(t).contentType)}throw VO()}function cD(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function lD(e,t){switch(e){case oD.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw KO(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case oD.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw KO(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(ZM){throw KO(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var fD=Sn((function e(t){In(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw KO(oD.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var hD=function(){function e(t,n){In(this,e);var r=0,i="";$O(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Sn(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if($O(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(JO()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(aD.apply(null,i))}var a=n.map((function(e){return XO(e)?sD(oD.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function dD(e){var t;try{t=JSON.parse(e)}catch(ZM){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function pD(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function vD(e,t){return t}var yD=Sn((function e(t,n,r,i){In(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||vD})),mD=null;function gD(){if(mD)return mD;var e=[];e.push(new yD("bucket")),e.push(new yD("generation")),e.push(new yD("metageneration")),e.push(new yD("name","fullPath",!0));var t=new yD("name");t.xform=function(e,t){return function(e){return!XO(e)||e.length<2?e:pD(e)}(t)},e.push(t);var n=new yD("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new yD("timeCreated")),e.push(new yD("updated")),e.push(new yD("md5Hash",null,!0)),e.push(new yD("cacheControl",null,!0)),e.push(new yD("contentDisposition",null,!0)),e.push(new yD("contentEncoding",null,!0)),e.push(new yD("contentLanguage",null,!0)),e.push(new yD("contentType",null,!0)),e.push(new yD("metadata","customMetadata",!0)),mD=e}function kD(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new QO(n,r);return t._makeStorageReference(i)}})}(r,e),r}function wD(e,t,n){var r=dD(t);return null===r?null:kD(e,r,n)}function bD(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function _D(e,t,n){var r=dD(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=Tn(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new QO(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=Tn(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new QO(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var xD=Sn((function e(t,n,r,i){In(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function TD(e){if(!e)throw VO()}function ID(e,t){return function(n,r){var i=wD(e,r,t);return TD(null!==i),i}}function ED(e,t){return function(n,r){var i=wD(e,r,t);return TD(null!==i),function(e,t,n,r){var i=dD(t);if(null===i)return null;if(!XO(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return eD("/b/"+o(i)+"/o/"+o(a),n,r)+tD({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function SD(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new FO("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new FO("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new FO("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new FO("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function CD(e){var t=SD(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new FO("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function ND(e,t,n){var r=eD(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new xD(r,"GET",ID(e,n),i);return a.errorHandler=CD(t),a}function AD(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=eD(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new xD(o,"GET",function(e,t){return function(n,r){var i=_D(e,t,r);return TD(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=SD(t),s}function RD(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function PD(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=RD(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+bD(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=hD.getBlob(c,r,l);if(null===f)throw qO();var h={name:s.fullPath},d=eD(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new xD(d,"POST",ID(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=SD(t),v}var OD=Sn((function e(t,n,r,i){In(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function DD(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(ZM){TD(!1)}return TD(!!n&&-1!==(t||["active"]).indexOf(n)),n}var MD=262144;function LD(e,t,n,r,i,a,o,u){var s=new OD(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new FO("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw qO();var v=t.maxUploadRetryTime,y=new xD(n,"POST",(function(e,n){var i,o=DD(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?ID(t,a)(e,n):null,new OD(u,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=u||null,y.errorHandler=SD(e),y}var FD={STATE_CHANGED:"state_changed"},UD={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function VD(e){switch(e){case"running":case"pausing":case"canceling":return UD.RUNNING;case"paused":return UD.PAUSED;case"success":return UD.SUCCESS;case"canceled":return UD.CANCELED;default:return UD.ERROR}}var jD=Sn((function e(t,n,r){In(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function qD(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var zD=function(){function e(){var t=this;In(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=GO.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=GO.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=GO.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Sn(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw HO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw HO("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw HO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(ZM){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw HO("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw HO("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),BD=function(e){kn(n,e);var t=xn(n);function n(){return In(this,n),t.apply(this,arguments)}return Sn(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(zD);function WD(){return new BD}var KD=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;In(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=gD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Sn(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=RD(t,r,i),u={name:o.fullPath},s=eD(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=bD(o,n),f=e.maxUploadRetryTime,h=new xD(s,"POST",(function(e){var t;DD(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(ZM){TD(!1)}return TD(XO(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=SD(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,WD,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new xD(n,"POST",(function(e){var t=DD(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(ZM){TD(!1)}n||TD(!1);var i=Number(n);return TD(!isNaN(i)),new OD(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=SD(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,WD,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=MD*this._chunkMultiplier,n=new OD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=LD(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(ZM){return e._error=ZM,void e._transition("error")}var u=e._ref.storage._makeRequest(o,WD,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){MD*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=ND(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,WD,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=PD(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,WD,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=jO(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=VD(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new jD(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(VD(this._state)){case UD.SUCCESS:qD(this._resolve.bind(null,this.snapshot))();break;case UD.CANCELED:case UD.ERROR:qD(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(VD(this._state)){case UD.RUNNING:case UD.PAUSED:e.next&&qD(e.next.bind(e,this.snapshot))();break;case UD.SUCCESS:e.complete&&qD(e.complete.bind(e))();break;default:e.error&&qD(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),HD=function(){function e(t,n){In(this,e),this._service=t,this._location=n instanceof QO?n:QO.makeFromUrl(n,t.host)}return Sn(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new QO(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return pD(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new QO(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw WO(e)}}]),e}();function GD(e,t,n){e._throwIfRoot("uploadBytes");var r=PD(e.storage,e._location,gD(),new hD(t,!0),n);return e.storage.makeRequestWithTokens(r,WD).then((function(t){return{metadata:t,ref:e}}))}function QD(e,t,n){return YD.apply(this,arguments)}function YD(){return YD=ke(be().mark((function e(t,n,r){var i,a,o,u;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,XD(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,Nn(u.prefixes)),(a=n.items).push.apply(a,Nn(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,QD(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)}))),YD.apply(this,arguments)}function XD(e,t){null!=t&&"number"===typeof t.maxResults&&ZO("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=AD(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,WD)}function $D(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=eD(t.fullServerUrl(),e.host,e._protocol),a=bD(n,r),o=e.maxOperationRetryTime,u=new xD(i,"PATCH",ID(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=CD(t),u}(e.storage,e._location,t,gD());return e.storage.makeRequestWithTokens(n,WD)}function JD(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=eD(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new xD(r,"GET",ED(e,n),i);return a.errorHandler=CD(t),a}(e.storage,e._location,gD());return e.storage.makeRequestWithTokens(t,WD).then((function(e){if(null===e)throw new FO("no-download-url","The given file does not have any download URLs.");return e}))}function ZD(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=eD(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new xD(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=CD(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,WD)}function eM(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new QO(e._location.bucket,n);return new HD(e.storage,r)}function tM(e,t){if(e instanceof aM){var n=e;if(null==n._bucket)throw new FO("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new HD(n,n._bucket);return null!=t?tM(r,t):r}return void 0!==t?eM(e,t):e}function nM(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof aM)return new HD(e,t);throw zO("To use ref(service, url), the first argument must be a Storage instance.")}return tM(e,t)}function rM(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:QO.makeFromBucketSpec(n,e)}function iM(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Hn(i,e.app.options.projectId))}var aM=function(){function e(t,n,r,i,a){In(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=LO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?QO.makeFromBucketSpec(i,this._host):rM(this._host,this.app.options)}return Sn(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=QO.makeFromBucketSpec(this._url,e):this._bucket=rM(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){ZO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){ZO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new HD(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new YO(BO());var a=function(e,t,n,r,i,a){var o=tD(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new nD(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=ke(be().mark((function e(t,n){var r,i,a,o;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),oM="@firebase/storage",uM="0.9.6",sM="storage";function cM(e,t,n,r){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oD.RAW,r=arguments.length>3?arguments[3]:void 0;e._throwIfRoot("uploadString");var i=sD(n,t),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),GD(e,i.data,a)}(e=xr(e),t,n,r)}function lM(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new KD(e,new hD(t),n)}(e=xr(e),t,n)}function fM(e){return function(e){e._throwIfRoot("getMetadata");var t=ND(e.storage,e._location,gD());return e.storage.makeRequestWithTokens(t,WD)}(e=xr(e))}function hM(e){return function(e){var t={prefixes:[],items:[]};return QD(e,t).then((function(){return t}))}(e=xr(e))}function dM(e){return JD(e=xr(e))}function pM(e){return ZD(e=xr(e))}function vM(e,t){return nM(e=xr(e),t)}function yM(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};iM(e,t,n,r)}function mM(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new aM(r,i,a,n,ki)}hi(new Tr(sM,mM,"PUBLIC").setMultipleInstances(!0)),Ii(oM,uM,""),Ii(oM,uM,"esm2017");var gM=function(){function e(t,n,r){In(this,e),this._delegate=t,this.task=n,this.ref=r}return Sn(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),kM=function(){function e(t,n){In(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Sn(e,[{key:"snapshot",get:function(){return new gM(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new gM(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new gM(e,i,i._ref))}:{next:t.next?function(e){return t.next(new gM(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),wM=function(){function e(t,n){In(this,e),this._delegate=t,this._service=n}return Sn(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new bM(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new bM(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),bM=function(){function e(t,n){In(this,e),this._delegate=t,this.storage=n}return Sn(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return eM(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new kM(lM(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oD.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=sD(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new kM(new KD(this._delegate,new hD(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return hM(this._delegate).then((function(t){return new wM(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return XD(e=xr(e),t)}(this._delegate,e||void 0).then((function(e){return new wM(e,t.storage)}))}},{key:"getMetadata",value:function(){return fM(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return $D(e=xr(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return dM(this._delegate)}},{key:"delete",value:function(){return this._throwIfRoot("delete"),pM(this._delegate)}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw WO(e)}}]),e}(),_M=function(){function e(t,n){In(this,e),this.app=t,this._delegate=n}return Sn(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(xM(e))throw zO("ref() expected a child path but got a URL, use refFromURL instead.");return new bM(vM(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!xM(e))throw zO("refFromURL() expected a full URL but got a child path, use ref() instead.");try{QO.makeFromUrl(e,this._delegate.host)}catch(ZM){throw zO("refFromUrl() expected a valid full URL but got an invalid one.")}return new bM(vM(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yM(this._delegate,e,t,n)}}]),e}();function xM(e){return/^[A-Za-z]+:\/\//.test(e)}function TM(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new _M(r,i)}!function(e){var t={TaskState:UD,TaskEvent:FD,StringFormat:oD,Storage:_M,Reference:bM};e.INTERNAL.registerComponent(new Tr("storage-compat",TM,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.14")}(hf);hf.initializeApp({apiKey:"AIzaSyBCrrViO2YqLguJNUDBFrjUDo6VSCYXM-E",authDomain:"guest-book-8d82c.firebaseapp.com",projectId:"guest-book-8d82c",storageBucket:"guest-book-8d82c.appspot.com",messagingSenderId:"1023022153488",appId:"1:1023022153488:web:0b9753bacc909812926f95"});var IM,EM=tf(),SM=hf.auth(),CM=hf.firestore(),NM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bi(),t=arguments.length>1?arguments[1]:void 0,n=di(e=xr(e),sM),r=n.getImmediate({identifier:t});return r}(),AM={prefix:"fas",iconName:"envelope-open-text",icon:[512,512,[],"f658","M176 216h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16zm-16 80c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16zm96 121.13c-16.42 0-32.84-5.06-46.86-15.19L0 250.86V464c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V250.86L302.86 401.94c-14.02 10.12-30.44 15.19-46.86 15.19zm237.61-254.18c-8.85-6.94-17.24-13.47-29.61-22.81V96c0-26.51-21.49-48-48-48h-77.55c-3.04-2.2-5.87-4.26-9.04-6.56C312.6 29.17 279.2-.35 256 0c-23.2-.35-56.59 29.17-73.41 41.44-3.17 2.3-6 4.36-9.04 6.56H96c-26.51 0-48 21.49-48 48v44.14c-12.37 9.33-20.76 15.87-29.61 22.81A47.995 47.995 0 0 0 0 200.72v10.65l96 69.35V96h320v184.72l96-69.35v-10.65c0-14.74-6.78-28.67-18.39-37.77z"]},RM={prefix:"fas",iconName:"home",icon:[576,512,[],"f015","M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"]},PM={prefix:"fas",iconName:"pencil-alt",icon:[512,512,[],"f303","M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"]},OM={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},DM={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]},MM={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"]},LM={prefix:"fas",iconName:"user",icon:[448,512,[],"f007","M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"]},FM=function(){var e=tf(),t=function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?((r=new gu).addScope("profile"),r.addScope("email")):"github"===n&&(r=new ku).addScope("repo"),e.next=4,SM.signInWithPopup(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,rf.jsxs)("div",{className:"authContainer",children:[(0,rf.jsx)(fn,{icon:AM,color:"#FEBD00",size:"3x",style:{marginBottom:25}}),(0,rf.jsx)("span",{style:{paddingBottom:10},children:' \ub2e4\ub871\ub124 \ubc29\uba85\ub85d (\uff61\u2022\u0300\u1d17-)\u2727" '}),(0,rf.jsx)("span",{style:{paddingBottom:30},children:" Instagram @darongbae "}),(0,rf.jsx)(af,{auth:e}),(0,rf.jsx)("div",{children:(0,rf.jsxs)("div",{className:"authBtns",children:[(0,rf.jsxs)("button",{onClick:t,name:"google",className:"authBtn",children:["Google\ub85c \uc2dc\uc791\ud558\uae30 ",(0,rf.jsx)(fn,{icon:pn})]}),(0,rf.jsxs)("button",{onClick:t,name:"github",className:"authBtn",children:["Github\ub85c \uc2dc\uc791\ud558\uae30 ",(0,rf.jsx)(fn,{icon:dn})]})]})}),(0,rf.jsx)("span",{style:{color:"darkgray",fontSize:11,paddingTop:10},children:" * \uac00\uc785 \uc808\ucc28\ub294 \uac8c\uc2dc\uae00\uc758 \uc218\uc815 \ubc0f \uc0ad\uc81c \uad8c\ud55c\uc744 \uc704\ud568\uc785\ub2c8\ub2e4. "}),(0,rf.jsx)("span",{style:{color:"darkgray",fontSize:11,paddingTop:10},children:" \uc774\uc678\uc758 \uac1c\uc778\uc815\ubcf4\ub294 \uc218\uc9d1\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. "})]})},UM=function(e){var n=e.nweetObj,r=e.isOwner,i=s((0,t.useState)(!1),2),a=i[0],o=i[1],u=s((0,t.useState)(n.text),2),c=u[0],l=u[1],f=function(){var e=ke(be().mark((function e(){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc9c4\uc9dc \uc0ad\uc81c\ud558\uc2dc\uac8c\uc694? \ud83d\ude31")){e.next=6;break}return e.next=4,nO(SR(CM,"nweets",n.id));case 4:return e.next=6,pM(vM(NM,n.attachmentURL));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){o((function(e){return!e}))},d=function(){var e=ke(be().mark((function e(t){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h(),r=SR(CM,"nweets",n.id),e.next=5,tO(r,{text:c,createdAt:Date.now()});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,rf.jsxs)("div",{className:"nweet",children:[a?(0,rf.jsxs)("form",{className:"container nweetEdit",onSubmit:d,children:[(0,rf.jsx)("input",{className:"formInput",type:"text",placeholder:"\ubb38\uad6c \uc218\uc815\ud558\uae30",value:c,required:!0,autoFocus:!0,onChange:function(e){var t=e.target.value;l(t)},style:{textAlign:"center"}}),(0,rf.jsx)("input",{className:"formBtn",type:"submit",value:"\uc218\uc815\ud558\uae30"}),(0,rf.jsx)("span",{onClick:h,className:"formBtn cancelBtn",children:"\ucde8\uc18c\ud558\uae30"})]}):(0,rf.jsxs)("h4",{children:[" ",n.text," "]},n.id),n.attachmentURL&&(0,rf.jsx)("img",{src:n.attachmentURL,alt:"attachmentURL"}),r&&(0,rf.jsxs)("div",{className:"nweet__actions",children:[(0,rf.jsx)("span",{onClick:f,children:(0,rf.jsx)(fn,{icon:MM})}),(0,rf.jsx)("span",{onClick:h,children:(0,rf.jsx)(fn,{icon:PM})})]})]})},VM=new Uint8Array(16);function jM(){if(!IM&&!(IM="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return IM(VM)}var qM=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var zM=function(e){return"string"===typeof e&&qM.test(e)},BM=[],WM=0;WM<256;++WM)BM.push((WM+256).toString(16).substr(1));var KM=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(BM[e[t+0]]+BM[e[t+1]]+BM[e[t+2]]+BM[e[t+3]]+"-"+BM[e[t+4]]+BM[e[t+5]]+"-"+BM[e[t+6]]+BM[e[t+7]]+"-"+BM[e[t+8]]+BM[e[t+9]]+"-"+BM[e[t+10]]+BM[e[t+11]]+BM[e[t+12]]+BM[e[t+13]]+BM[e[t+14]]+BM[e[t+15]]).toLowerCase();if(!zM(n))throw TypeError("Stringified UUID is invalid");return n};var HM=function(e,t,n){var r=(e=e||{}).random||(e.rng||jM)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return KM(r)},GM=function(e){var n=e.userObj,r=s((0,t.useState)(),2),i=r[0],a=r[1],o=s((0,t.useState)(""),2),u=o[0],c=o[1],l=function(){var e=ke(be().mark((function e(t){var r,o,s,l;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==i){e.next=3;break}return e.abrupt("return");case 3:if(r="",""===u){e.next=12;break}return o=vM(NM,"".concat(n.uid,"/").concat(HM())),e.next=8,cM(o,u,"data_url");case 8:return s=e.sent,e.next=11,dM(s.ref);case 11:r=e.sent;case 12:return l={text:i,createdAt:Date.now(),creatorId:n.uid,attachmentURL:r},e.next=15,CM.collection("nweets").add(l);case 15:a(""),c("");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,rf.jsxs)("form",{onSubmit:l,className:"factoryForm",children:[(0,rf.jsx)("span",{style:{color:"white",fontSize:20,paddingBottom:10},children:"\uc548\ub155\ud558\uc138\uc694?"}),(0,rf.jsx)("span",{style:{color:"white",fontSize:20,paddingBottom:10},children:"\ubc29\ubb38 \uc774\ub825\uc744 \ub0a8\uaca8\uc8fc\uc138\uc694! \ud83d\ude0d"}),(0,rf.jsx)("span",{style:{color:"white",fontSize:18,paddingBottom:10},children:"\ubaa8\ub4e0 \ub0b4\uc6a9\uc740 \uc775\uba85\uc73c\ub85c \uc804\ub2ec\ub429\ub2c8\ub2e4"}),(0,rf.jsx)("span",{style:{color:"darkgray",fontSize:11,paddingBottom:5},children:"*\ubd80\uc801\uc808\ud55c \ub0b4\uc6a9\uc740 \uad00\ub9ac\uc790\uc5d0 \uc758\ud574 \uc0ad\uc81c \uc870\uce58\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4. "}),(0,rf.jsx)("span",{style:{color:"darkgray",fontSize:11,paddingBottom:20},children:"*\ubc30\ub2e4\ub871\uc774 \uc81c\uc791\uc5d0 \ucc38\uc5ec\ud55c HeyNana \uc5b4\ud50c\ub3c4 \ub9ce\uc774 \uc774\uc6a9 \ubd80\ud0c1\ub4dc\ub824\uc694! "}),(0,rf.jsxs)("div",{className:"factoryInput__container",children:[(0,rf.jsx)("input",{className:"factoryInput__input",value:i,onChange:function(e){var t=e.target.value;a(t)},type:"text",placeholder:"\ubb38\uad6c \uc785\ub825...",maxLength:120,style:{textAlign:"center"}}),(0,rf.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),(0,rf.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[(0,rf.jsx)("span",{children:"\uc0ac\uc9c4 \uc5c5\ub85c\ub4dc"}),(0,rf.jsx)(fn,{icon:OM})]}),(0,rf.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;c(t)},n.readAsDataURL(t)},style:{opacity:0}}),u&&(0,rf.jsxs)("div",{className:"factoryForm__attachment",children:[(0,rf.jsx)("img",{alt:"attachment",src:u,style:{backgroundImage:u}}),(0,rf.jsxs)("div",{className:"factoryForm__clear",onClick:function(){return c("")},children:[(0,rf.jsx)("span",{children:"Remove"}),(0,rf.jsx)(fn,{icon:DM})]})]})]})},QM=function(e){var n=e.userObj,r=s((0,t.useState)([]),2),i=r[0],a=r[1];return(0,t.useEffect)((function(){CM.collection("nweets").onSnapshot((function(e){var t=e.docs.map((function(e){return Fr({id:e.id},e.data())})).sort((function(e,t){return t.createdAt-e.createdAt}));a(t)}))}),[]),(0,rf.jsxs)("div",{className:"container",children:[(0,rf.jsx)(GM,{userObj:n}),(0,rf.jsx)("div",{style:{marginTop:30},children:i.map((function(e){return(0,rf.jsx)(UM,{nweetObj:e,isOwner:e.creatorId===n.uid},e.id)}))})]})},YM=function(e){var n=e.userObj,r=e.refreshUser,i=se(Y),a=s((0,t.useState)(n.displayName?n.displayName:""),2),o=a[0],u=a[1],c=function(){var e=ke(be().mark((function e(){var t;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=NP(ER(CM,"nweets"),RP("creatorId","==",n.uid)),e.next=3,JP(t);case 3:e.sent.forEach((function(e){console.log(e.id," => ",e.data())}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=ke(be().mark((function e(t){return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.displayName===o){e.next=5;break}return e.next=4,ms(n,{displayName:o});case 4:r();case 5:i.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){c()})),(0,rf.jsxs)("div",{className:"container",children:[(0,rf.jsx)("input",{type:"text",autoFocus:!0,placeholder:"\ub2c9\ub124\uc784 \uc785\ub825...",onChange:function(e){var t=e.target.value;u(t)},value:o,style:{textAlign:"center"}}),(0,rf.jsx)("input",{type:"submit",onClick:l,value:"\ub2c9\ub124\uc784 \ubcc0\uacbd",className:"formBtn",style:{marginTop:10}}),(0,rf.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){SM.signOut(),r(),i.push("/"),window.location.reload()},children:"\ub85c\uadf8\uc544\uc6c3"})]})},XM=function(e){var t=e.userObj;return(0,rf.jsx)("nav",{children:(0,rf.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[(0,rf.jsxs)(ve,{to:"/",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[(0,rf.jsx)(fn,{icon:RM,color:"#FEBD00",size:"2x"}),(0,rf.jsx)("span",{style:{marginTop:10},children:"Home"})]}),(0,rf.jsxs)(ve,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[(0,rf.jsx)(fn,{icon:LM,color:"#FEBD00",size:"2x"}),(0,rf.jsx)("span",{style:{marginTop:10},children:t.displayName?"".concat(t.displayName,"\uc758 Profile"):"Profile"})]})]})})},$M=function(e){var t=e.isLoggedIn,n=e.userObj,r=e.refreshUser;return(0,rf.jsxs)(ce,{children:[t&&(0,rf.jsx)(XM,{userObj:n}),(0,rf.jsx)(ue,{children:t?(0,rf.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:[(0,rf.jsx)(te,{exact:!0,path:"/",children:(0,rf.jsx)(QM,{userObj:n})}),(0,rf.jsx)(te,{exact:!0,path:"/profile",children:(0,rf.jsx)(YM,{userObj:n,refreshUser:r})})]}):(0,rf.jsx)(te,{exact:!0,path:"/",children:(0,rf.jsx)(FM,{})})})]})};var JM=function(){var e=s((0,t.useState)(!1),2),n=e[0],r=e[1],i=s((0,t.useState)(null),2),a=i[0],o=i[1];return(0,t.useEffect)((function(){!function(e,t,n,r){xr(e).onAuthStateChanged(t,n,r)}(EM,(function(e){e&&o(e),r(!0)}))}),[]),(0,rf.jsx)(rf.Fragment,{children:n?(0,rf.jsx)($M,{isLoggedIn:Boolean(a),userObj:a,refreshUser:function(){o(SM.currentUser)}}):(0,rf.jsx)("div",{className:"authContainer",children:" \ub85c\ub529\uc911.... "})})};r.render((0,rf.jsx)(t.StrictMode,{children:(0,rf.jsx)(JM,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.37d2f4ac.js.map